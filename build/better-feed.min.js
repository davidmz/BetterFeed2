(()=>{"use strict";var e={476:(e,n,t)=>{t.d(n,{Z:()=>d});var r=t(81),o=t.n(r),a=t(645),i=t.n(a),c=t(667),s=t.n(c),u=new URL(t(753),t.b),l=i()(o()),f=s()(u);l.push([e.id,'.comment .comment-icon:not(.fa-stack) {\n  position: relative;\n  top: -2px;\n  left: -1px;\n  z-index: 1;\n}\n.comment-likes .comment-likes-list {\n  z-index: 2;\n}\n.bf2-ico-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  color: #fff;\n  display: none;\n}\n.comment[data-comm-props~="from"] .bf2-ico-bg {\n  display: block;\n}\n.comment[data-comm-props~="from-reader"] .bf2-ico-bg {\n  color: #EDEDED;\n}\n.comment[data-comm-props~="from-friend"] .bf2-ico-bg {\n  color: #CEF4FC;\n}\n.comment[data-comm-props~="from-post-author"] .bf2-ico-bg {\n  color: #B5B5B5;\n}\n.comment[data-comm-props~="from-me"] .bf2-ico-bg {\n  color: #FFD061;\n}\n.comment.omit-bubble .bf2-ico-bg {\n  display: none;\n}\n.bf2-comment-avatar {\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-size: cover;\n  top: 0;\n  left: -4px;\n  z-index: 1;\n  background-color: #fff;\n  border-radius: 50%;\n  border: 1px solid #ccc;\n  box-sizing: content-box;\n  pointer-events: none;\n  background-image: url('+f+");\n}\n.comment.omit-bubble .bf2-comment-avatar {\n  display: none;\n}\n.bf2-gamma-frontend .highlighted .bf2-comment-avatar {\n  top: 4px;\n  left: 3px;\n}\n.bf2-comments-with-avatars .comment-time {\n  margin-right: 5px;\n}\n.bf2-comments-with-avatars .feed-comment-dot:after {\n  margin-top: 1px;\n}\n.bf2-comments-with-avatars .comment {\n  margin-top: 10px;\n}\n.bf2-comments-with-avatars .bf2-likecomm-shift {\n  left: -9px;\n}\n.bf2-comments-with-avatars .likes {\n  position: relative;\n  left: -2px;\n}\n.bf2-comments-with-avatars .likes .icon {\n  margin-right: 7px;\n}\n.bf2-comments-with-avatars .fold-comments-sticky {\n  z-index: 2;\n}\n.bf2-comments-with-avatars .fold-comments-sticky i {\n  left: -2px;\n}\n.bf2-gamma-frontend.bf2-comments-with-avatars .comment.highlighted {\n  margin-top: 6px;\n}\n",""]);const d=l},459:(e,n,t)=>{t.d(n,{Z:()=>d});var r=t(81),o=t.n(r),a=t(645),i=t.n(a),c=t(667),s=t.n(c),u=new URL(t(632),t.b),l=i()(o()),f=s()(u);l.push([e.id,'.bf2-lightbox-container {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 10;\n}\n.bf2-lightbox-shadow {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.bf2-lightbox-content {\n  position: relative;\n  border: 1px solid #000;\n  background-color: #ccc;\n  box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);\n}\n.bf2-settings-lightbox .bf2-lightbox-content {\n  width: 90vw;\n  height: 90vh;\n  max-width: 800px;\n}\n.bf2-settings-lightbox .bf2-lightbox-content iframe {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.bf2-access-token-lightbox .bf2-lightbox-content {\n  background-color: white;\n  max-width: 90vw;\n  padding: 2em;\n}\n.bf2-access-token-lightbox .bf2-lightbox-content button {\n  padding: 0.25em 2em;\n  cursor: pointer;\n}\n.bf2-access-token-lightbox .bf2-lightbox-content .bf2-access-token {\n  word-wrap: break-word;\n  font-family: monospace;\n  color: #069;\n  background-color: #eee;\n  padding: 1em;\n}\n.bf2-green {\n  padding: 1em;\n}\n.bf2-via-names {\n  font-size: 12px;\n}\n.bf2-hide-aliens-cont {\n  font-size: 14px;\n  font-weight: normal;\n  margin-left: 1em;\n  display: none;\n}\n.bf2-homepage .bf2-hide-aliens-cont {\n  display: inline;\n}\n.bf2-hide-aliens .bf2-alien-post {\n  display: none;\n}\n.bf2-saving-settings-indicator {\n  position: fixed;\n  top: 0.66em;\n  right: 1em;\n  background: #f66;\n  color: white;\n  padding: 0.25em 1em;\n  border-radius: 4px;\n  z-index: 100;\n}\n.bf2-animated-gif {\n  position: relative;\n  display: inline-block;\n}\n.bf2-animated-gif::after {\n  content: "\\25B6 GIF";\n  position: absolute;\n  bottom: 3px;\n  right: 4px;\n  background-color: #069;\n  color: #eee;\n  font-weight: bold;\n  padding: 0.1em 0.4em;\n  border-radius: 3px;\n  font-size: 11px;\n  line-height: normal;\n}\n.arrow-span {\n  padding: 0 0.2em;\n}\n.bf2-moon {\n  width: 18px;\n  height: 18px;\n  margin-left: 4px;\n  margin-bottom: 10px;\n}\n.bf2-moon-shadow {\n  fill: #666;\n}\n.bf2-moon-light {\n  fill: #f5eed9;\n}\n.bf2-moon-cont {\n  display: inline-block;\n}\n.bf2-switch-acc {\n  color: #ccc;\n  cursor: pointer;\n  text-align: center;\n}\n.bf2-switch-acc:hover {\n  background-color: #eee;\n  color: #000;\n}\n.bf2-switch-acc__icon {\n  display: inline-block;\n  background: url('+f+') no-repeat;\n  background-size: contain;\n  width: 14px;\n  height: 14px;\n  opacity: 0.4;\n}\n.bf2-switch-account-box .bf2-lightbox-content {\n  width: 360px;\n  height: auto;\n  cursor: auto;\n  border: 1px solid #000;\n  box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.5);\n  background-color: #ffffff;\n  padding: 1em;\n}\n.bf2-switch-dlg-header {\n  font-size: 120%;\n}\n.bf2-switch-dlg-accounts {\n  margin: 1em 0;\n}\n.bf2-switch-dlg-account {\n  cursor: pointer;\n  font-weight: bold;\n  border: 1px solid #ddd;\n  margin: 0.5em 0;\n  position: relative;\n}\n.bf2-switch-dlg-account:hover,\n.bf2-switch-dlg-account.-current {\n  background-color: #eee;\n}\n.bf2-switch-dlg-account.-current {\n  cursor: not-allowed;\n}\n.bf2-switch-dlg-account.-current .bf2-switch-dlg-del {\n  display: none;\n}\n.bf2-switch-dlg-upic {\n  width: 50px;\n  height: 50px;\n  margin-right: 1em;\n  border-right: 1px solid #ddd;\n}\n.bf2-switch-dlg-new-form {\n  display: none;\n}\n.bf2-switch-dlg-del {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  text-align: center;\n  margin-top: -10px;\n}\n.bf2-switch-dlg-del:hover {\n  color: #c00;\n}\n.box {\n  clear: both;\n}\n.bf2-lightboxed-images .image-attachments a {\n  cursor: zoom-in;\n}\n.bf2-search-highlight {\n  background-color: #ffff80;\n}\n.bf2-hp-pre:empty {\n  display: none;\n}\n.bf2-hp-pre-\\( {\n  margin-right: 0.13em;\n}\n.bf2-hp-\\( {\n  margin-left: -0.13em;\n}\n.bf2-hp-pre-« {\n  margin-right: 0.2em;\n}\n.bf2-hp-« {\n  margin-left: -0.2em;\n}\n.bf2-hp-pre-\\" {\n  margin-right: 0.2em;\n}\n.bf2-hp-\\" {\n  margin-left: -0.2em;\n}\n.bf2-hp-pre-“ {\n  margin-right: 0.33em;\n}\n.bf2-hp-“ {\n  margin-left: -0.33em;\n}\n.bf2-hp-pre-- {\n  margin-right: 0.1em;\n}\n.bf2-hp-- {\n  margin-left: -0.1em;\n}\n',""]);const d=l},918:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(81),o=t.n(r),a=t(645),i=t.n(a)()(o());i.push([e.id,".bf2-prvs {\n  margin-left: 1.1875rem;\n  position: relative;\n}\n.bf2-prvs__item {\n  width: 4rem;\n  height: 4rem;\n  border: 1px solid #999;\n  object-fit: cover;\n  border-radius: 2px;\n  cursor: pointer;\n  margin-right: 0.3rem;\n  margin-top: 0.3rem;\n}\n.bf2-prvs__item--video {\n  width: 5rem;\n  height: 3rem;\n}\n",""]);const c=i},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(i[s]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),n.push(l))}},n}},667:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},i=[],c=0;c<e.length;c++){var s=e[c],u=r.base?s[0]+r.base:s[0],l=a[u]||0,f="".concat(u," ").concat(l);a[u]=l+1;var d=t(f),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==d)n[d].references++,n[d].updater(p);else{var h=o(p,r);r.byIndex=c,n.splice(c,0,{identifier:f,updater:h,references:1})}i.push(f)}return i}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var c=t(a[i]);n[c].references--}for(var s=r(e,o),u=0;u<a.length;u++){var l=t(a[u]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}a=s}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},753:(e,n,t)=>{e.exports=t.p+"382e8cdd2616e29da320.png"},632:(e,n,t)=>{e.exports=t.p+"98a4c691c59b1b2090b6.svg"}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href,(()=>{var e=t(379),n=t.n(e),r=t(795),o=t.n(r),a=t(569),i=t.n(a),c=t(565),s=t.n(c),u=t(216),l=t.n(u),f=t(589),d=t.n(f),p=t(459),h={};h.styleTagTransform=d(),h.setAttributes=s(),h.insert=i().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=l(),n()(p.Z,h),p.Z&&p.Z.locals&&p.Z.locals;var m="matches"in HTMLElement.prototype?"matches":"msMatchesSelector";function b(e,n){return e[m](n)}const v=function(e,n,t){if(null===e)return[];var r=e.querySelectorAll(n),o=r?Array.prototype.slice.call(r):[];if(b(e,n)&&o.unshift(e),t)for(var a=0,i=o.length;a<i;a++)t(o[a]);return o};function g(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function y(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=new Map,x=function(){function e(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g(this,e),this.name=n,this.alwaysEnabled=r,this.enabledByDefault=t,this.requiredModules=[],this.active=!0,this._watchers=[],this._initiators=[]}var n,t;return n=e,(t=[{key:"init",value:function(e){this._initiators.push(e)}},{key:"watch",value:function(e,n){this._watchers.push({selector:e,callback:n})}},{key:"required",value:function(e){this.requiredModules.push(e)}},{key:"_initiate",value:function(e){this.active&&(this._initiators.forEach((function(n){return n(e)})),this._watchers.forEach((function(n){var t=n.selector,r=n.callback;return v(document.body,t,(function(n){return r(n,e)}))})))}},{key:"_trigger",value:function(e){this.active&&this._watchers.forEach((function(n){var t=n.selector,r=n.callback;return v(e,t,(function(e){return r(e,E)}))}))}}])&&y(n.prototype,t),e}();function k(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new x(e,n,t);return w.set(e,r),r}var E=null;function S(e){E||(E=e,w.forEach((function(e){E.isModuleEnabled(e)&&e._initiate(E)})),new MutationObserver((function(e){e.forEach((function(e){for(var n=function(n,t){var r=e.addedNodes[n];r.nodeType==Node.ELEMENT_NODE&&w.forEach((function(e){E.isModuleEnabled(e)&&e._trigger(r,E)}))},t=0,r=e.addedNodes.length;t<r;t++)n(t)}))})).observe(document.body,{childList:!0,subtree:!0}))}function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var _={"freefeed.net":{cookies:["freefeedBETA_authToken","freefeed_authToken"]},"gamma.freefeed.net":{cookies:["freefeed_authToken"]}},T=location.hostname,P="freefeedBETA_authToken";function M(){if(T in _){var e,n=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(c)throw a}}}}(_[T].cookies);try{for(n.s();!(e=n.n()).done;){var t=e.value,r=C(localStorage.getItem(t)),o=r.userId,a=r.authToken;if(o)return{userId:o,authToken:a}}}catch(e){n.e(e)}finally{n.f()}}return{userId:null,authToken:null}}function C(e){if(null!==e){var n=e.split(".");if(3===n.length)try{var t=JSON.parse(atob(n[1]));if("userId"in t)return{authToken:e,userId:t.userId}}catch(e){}}return{authToken:null,userId:null}}function I(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function R(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){I(a,r,o,i,c,"next",e)}function c(e){I(a,r,o,i,c,"throw",e)}i(void 0)}))}}function j(){return(j=R(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(B(n),{headers:{Accept:"application/json",Authorization:"Bearer "+M().authToken}}).then((function(e){return e.json()}));case 2:if(!(t=e.sent)||!("err"in t)){e.next=5;break}throw new Error(t.err);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,n){return L.apply(this,arguments)}function L(){return(L=R(regeneratorRuntime.mark((function e(n,t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(B(n),{method:"PUT",body:t,headers:{Accept:"application/json",Authorization:"Bearer "+M().authToken}}).then((function(e){return e.json()}));case 2:if(!(r=e.sent)||!("err"in r)){e.next=5;break}throw new Error(r.err);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,n){return q.apply(this,arguments)}function q(){return(q=R(regeneratorRuntime.mark((function e(n,t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(B(n),{method:"PUT",body:t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json",Authorization:"Bearer "+M().authToken}}).then((function(e){return e.json()}));case 2:if(!(r=e.sent)||!("err"in r)){e.next=5;break}throw new Error(r.err);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return"https://freefeed.net"+e+(-1!==e.indexOf("?")?"&":"?")+"_initiator=betterfeed2"}var D=window.__BetterFeedRoot||"https://cdn.jsdelivr.net/gh/davidmz/BetterFeed2@"+localStorage["bf2-version"];if(document.currentScript){var z=document.currentScript.src.split("/");D=z.slice(0,z.length-2).join("/")}const F=D;function U(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function Z(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){U(a,r,o,i,c,"next",e)}function c(e){U(a,r,o,i,c,"throw",e)}i(void 0)}))}}function $(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function H(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){$(a,r,o,i,c,"next",e)}function c(e){$(a,r,o,i,c,"throw",e)}i(void 0)}))}}function J(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return Q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Q(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(c)throw a}}}}function Q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}t.p;var G,W,X="".concat(F,"/build/default-userpic-50.png"),K=new Map,Y=new Map;function ee(e){return ne.apply(this,arguments)}function ne(){return(ne=H(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=K.get(n))||(t=new Promise((function(e){return Y.set(n,e)})),K.set(n,t)),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}G=function(e){e.req;var n=e.resp;if(n&&"object"===V(n)){var t=n.users,r=n.subscribers,o=new Set;if(t)if(Array.isArray(t)){var a,i=J(t);try{for(i.s();!(a=i.n()).done;){var c=a.value;o.add(c)}}catch(e){i.e(e)}finally{i.f()}}else o.add(t);if(r){var s,u=J(r);try{for(u.s();!(s=u.n()).done;){var l=s.value;o.add(l)}}catch(e){u.e(e)}finally{u.f()}}var f,d=J(o);try{for(d.s();!(f=d.n()).done;){var p=f.value,h=p.profilePictureMediumUrl||X,m=Y.get(p.username);m?m(h):K.set(p.username,Promise.resolve(h))}}catch(e){d.e(e)}finally{d.f()}}},W=window.fetch,window.fetch=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=W.apply(void 0,n);return r.then((function(e){var t=e.json;e.json=Z(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.call(e);case 2:return o=r.sent,G({req:n,resp:o}),r.abrupt("return",o);case 5:case"end":return r.stop()}}),r)})))})),r};const te=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function oe(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=n}var n,t;return n=e,(t=[{key:"toString",value:function(){return this.text}}])&&oe(n.prototype,t),e}();function ie(e){return new ae(e)}function ce(e){return e instanceof ae}function se(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return ie(e.reduce((function(e,n,r){var o=t[r-1];return e+(ce(o)?o:re(o))+n})))}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function le(e,n,t){var r,o,a,i=e.split("."),c=i.shift()||"div";"$"===c?a=document.createDocumentFragment():(a=document.createElement(c),i.length>0&&(a.className=i.join(" ")));var s=1;if(arguments.length>1&&"object"===ue(n)&&!(n instanceof Node)&&!te(n)&&!ce(n)){for(o in n)n.hasOwnProperty(o)&&a.setAttribute(o,n[o]);s=2}if(arguments.length>s)for(r=s;r<arguments.length;r++)fe(a,arguments[r]);return a}function fe(e,n){n instanceof Node?e.appendChild(n):te(n)?n.forEach(fe.bind(null,e)):"string"==typeof n?e.appendChild(document.createTextNode(n)):ce(n)&&e.insertAdjacentHTML("beforeEnd",n.toString())}function de(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function pe(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var he="me.davidmz.BetterFeed2",me=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.me=null,this.myID=null,this.myScreenName=null,this.friends=[],this.readers=[],this.banIds=[],this.bf2Props={},this._savePropsQueue=[],this._savingPropsNow=!1,this._savingIndicator=le(".bf2-saving-settings-indicator","Saving settings…")}var n,t,r,o;return n=e,t=[{key:"whoIs",value:function(n){var t=0;return n===this.me&&(t|=e.ME),-1!==this.friends.indexOf(n)&&(t|=e.FRIEND),-1!==this.readers.indexOf(n)&&(t|=e.READER),t}},{key:"isBanned",value:function(e){return-1!==this.banIds.indexOf(e)}},{key:"saveProps",value:function(e){return this._savePropsQueue.push(e.toJSON()),this._saveProps()}},{key:"_saveProps",value:(r=regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._savingPropsNow){e.next=2;break}return e.abrupt("return");case 2:document.body.appendChild(this._savingIndicator),this._savingPropsNow=!0;case 4:if(!(this._savePropsQueue.length>0)){e.next=11;break}for(r in n=this._savePropsQueue.shift(),t={},n)n.hasOwnProperty(r)&&(t[r]=null);return e.next=9,O("/v1/users/".concat(this.myID),JSON.stringify({user:{frontendPreferences:(o={},a=he,i=n,a in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,o)}}));case 9:e.next=4;break;case 11:this._savingPropsNow=!1,document.body.removeChild(this._savingIndicator);case 13:case"end":return e.stop()}var o,a,i}),e,this)})),o=function(){var e=this,n=arguments;return new Promise((function(t,o){var a=r.apply(e,n);function i(e){de(a,t,o,i,c,"next",e)}function c(e){de(a,t,o,i,c,"throw",e)}i(void 0)}))},function(){return o.apply(this,arguments)})}],t&&pe(n.prototype,t),e}();me.ME=1,me.FRIEND=2,me.READER=4,me.ready=null,me.update=function(){me.ready=function(e){return j.apply(this,arguments)}("/v2/users/whoami").then((function(e){var n=new me;return n.me=e.users.username,n.myID=e.users.id,n.myScreenName=e.users.screenName,n.friends=e.subscribers.map((function(e){return e.username})),n.readers=e.users.subscribers.map((function(e){return e.username})),n.banIds=e.users.banIds,n.bf2Props=e.users.frontendPreferences[he]||{},n}))},me.update();const be=new Promise((function(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,0):document.addEventListener("DOMContentLoaded",e)}));function ve(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(c)throw o}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return ge(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ge(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ye(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function we(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xe=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ye(this,e),this.modules=new Map,w.forEach((function(e){e.alwaysEnabled||n.modules.set(e.name,e.enabledByDefault)})),this.hideAliens=!1,this.commentCloudsMode=2,t&&((t.modules||[]).forEach((function(e){var t=ve(e,2),o=t[0],a=t[1];(r||n.modules.has(o))&&n.modules.set(o,!!a)})),this.hideAliens=!!t.hideAliens,1!==t.commentCloudsMode&&2!==t.commentCloudsMode||(this.commentCloudsMode=t.commentCloudsMode))}var n,t;return n=e,(t=[{key:"toJSON",value:function(){var e={modules:[]};return this.modules.forEach((function(n,t){return e.modules.push([t,n])})),e.hideAliens=this.hideAliens,e.commentCloudsMode=this.commentCloudsMode,e}},{key:"isModuleEnabled",value:function(e){var n=this;return e&&(e.alwaysEnabled||!this.modules.has(e.name)&&e.enabledByDefault||this.modules.get(e.name))&&!e.requiredModules.map((function(e){return w.get(e)})).some((function(e){return!n.isModuleEnabled(e)}))}}])&&we(n.prototype,t),e}();function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Ee(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Se(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ae=1,_e="@response",Te=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Ee(this,e),this.__responders=new Map,this.__listeners=new Map,this.defaultWindow=t,this.defaultOrigin=r,window.addEventListener("message",(function(e){if("object"===ke(e.data)){var t=e.data,r=t.action,o=t.requestId,a=t.value,i=e.source,c=e.origin;if(r===_e&&n.__responders.has(o))n.__responders.get(o)(a),n.__responders.delete(o);else if(n.__listeners.has(r)){var s=n.__listeners.get(r)(a);i.postMessage({action:_e,requestId:o,value:s},c)}}}))}var n,t;return n=e,t=[{key:"send",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.sendEx(this.defaultWindow,this.defaultOrigin,e,n)}},{key:"sendEx",value:function(e,n,t){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(a){var i=Ae++;r.__responders.set(i,a),e.postMessage({action:t,requestId:i,value:o},n)}))}},{key:"on",value:function(e,n){this.__listeners.set(e,n)}}],t&&Se(n.prototype,t),e}(),Pe=!!Element.prototype.closest;function Me(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)return null;var r=t?e:e.parentNode;return Pe&&r?r.closest(n):r&&r.nodeType==Node.ELEMENT_NODE?b(r,n)?r:Me(r,n):null}var Ce=[],Ie=history.pushState.bind(history),Re=history.replaceState.bind(history);function je(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}history.pushState=function(e,n,t){Ie(e,n,t),Ce.forEach((function(e){return e(location)}))},history.replaceState=function(e,n,t){Re(e,n,t),Ce.forEach((function(e){return e(location)}))},window.addEventListener("popstate",(function(){return Ce.forEach((function(e){return e(location)}))}));var Oe=k("common",!0,!0);function Le(e){var n=e.dataset.author;if(!n){var t=e.querySelector(".comment-body > .user-name-wrapper > a");t&&(n=t.getAttribute("href").substr(1),e.dataset.author=n)}return n}function Ne(e){var n=e.dataset.author;if(!n){var t=e.querySelector(".post-header a.post-author");t&&(n=t.getAttribute("href").substr(1),e.dataset.author=n)}return n}function qe(e){return/[\u0600-\u06ff\u0700-\u077f\u08A0-\u08ff]/.test(e)}function Be(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function De(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Oe.init((function(){var e;e=function(e){var n="/"===e.pathname,t="/filter/best_of"===e.pathname;document.body.classList.toggle("bf2-homepage",n),document.body.classList.toggle("bf2-best-of",t),document.body.classList.toggle("bf2-aggregate-page",n||t)},Ce.push(e),e(location),document.addEventListener("click",(function(e){if(0==e.button&&e.target.classList.contains("bf2-user-link")){var n=document.querySelector('a:not(.bf2-user-link)[href="'.concat(CSS.escape(e.target.getAttribute("href")),'"]'));n&&(e.preventDefault(),e.target.blur(),n.click())}})),"gamma.freefeed.net"===T&&document.body.classList.add("bf2-gamma-frontend")})),Oe.watch(".timeline-post, .single-post",(function(e){var n=e.querySelector(".post-timestamp").getAttribute("href").match(/^\/.+?\/([\w-]+)/)[1];e.id="post-".concat(n),e.dataset.postId=n;var t=e.querySelector(".post-author").getAttribute("href").substr(1);e.dataset.postAuthor=t,e.classList.add("bf2-post-from-".concat(t)),v(e,".post-recipient").map((function(e){return e.getAttribute("href").substr(1)})).filter((function(e){return e!==t})).forEach((function(n){return e.classList.add("bf2-post-to-".concat(n))}));var r=e.querySelector(".post-text"),o=e.querySelector(".comment-body");(qe(r.textContent)||o&&qe(o.textContent))&&e.classList.add("bf2-lang-arabic")})),Oe.watch(".user-card .display-name",(function(e){Me(e,".user-card").dataset.userName=e.getAttribute("href").substr(1)})),Oe.watch(".comment",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Le(n)){e.next=3;break}return e.abrupt("return");case 3:if(r=Ne(Me(n,".post"))){e.next=6;break}return e.abrupt("return");case 6:return(o=[]).push("from"),r===t&&o.push("from-post-author"),e.next=11,me.ready;case 11:(a=e.sent.whoIs(t))&me.ME?o.push("from-me"):a&me.FRIEND?o.push("from-friend"):a&me.READER&&o.push("from-reader"),n.dataset.commProps=o.join(" ");case 14:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){je(a,r,o,i,c,"next",e)}function c(e){je(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}());var ze=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Be(this,e),this._container=le(".bf2-lightbox-container"),""!==t&&this._container.classList.add(t);var o=this._container.appendChild(le(".bf2-lightbox-shadow"));this.contentEl=o.appendChild(le(".bf2-lightbox-content")),o.addEventListener("click",(function(e){e.target!==o||r||n.hide()}))}var n,t;return n=e,(t=[{key:"showContent",value:function(e){"string"==typeof e?this.contentEl.innerHTML=e:(this.contentEl.innerHTML="",this.contentEl.appendChild(e)),document.body.appendChild(this._container)}},{key:"hide",value:function(){this.contentEl.innerHTML="",this._container.parentNode.removeChild(this._container)}}])&&De(n.prototype,t),e}();function Fe(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function Ue(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){Fe(a,r,o,i,c,"next",e)}function c(e){Fe(a,r,o,i,c,"throw",e)}i(void 0)}))}}var Ze="v2.22.0";function $e(){return He.apply(this,arguments)}function He(){return He=Ue(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=F+"/src/html/settings.html",e.next=3,fetch(n).then((function(e){return e.text()}));case 3:if(t=e.sent.replace(/\[\[parentOrigin]]/g,re(location.origin)).replace(/\[\[betterFeedVersion]]/g,re(Ze)).replace(/\[\[baseURL]]/g,re(F+"/")),r=URL.createObjectURL(new Blob([t],{type:"text/html;charset=utf-8"})),!/iPhone|iPad/.test(navigator.userAgent)){e.next=8;break}return window.open(r,"_blank"),e.abrupt("return");case 8:new ze("bf2-settings-lightbox").showContent(le("iframe",{src:r,frameborder:"0"}));case 9:case"end":return e.stop()}}),e)}))),He.apply(this,arguments)}k("settings-link",!0,!0).watch(".sidebar",(function(e){if(!e.querySelector(".bf2-sidebar-box")){var n=le("a","BetterFeed settings"),t=le(".bf2-sidebar-box.box",le(".box-header-groups","Add-ons"),le(".box-body",le("ul",le("li",n))),le(".box-footer",Ze));e.querySelector(".box").parentNode.insertBefore(t,null),n.addEventListener("click",$e)}})),k("moon").watch("h1",(function(e){e.appendChild(le(".bf2-moon-cont")).innerHTML='<svg class="bf2-moon" viewBox="-4 -4 108 108" xmlns="http://www.w3.org/2000/svg" version="1.1">\n        <circle class="bf2-moon-shadow" cx="50" cy="50" r="54"></circle>\n        <path class="bf2-moon-light" d="M 50 0 a 30 50 0 0 0 0 100 a 50 50 0 0 0 0 -100 Z"></path>\n    </svg>',Ge(Ve()),setInterval((function(){return Ge(Ve())}),36e5)}));var Je=new Date("Thu Apr 07 2016 14:22:37 GMT+0300").getTime(),Qe=Math.round(2551442813.5680003);function Ve(){return((new Date).getTime()-Je)/Qe%1}function Ge(e){var n=document.querySelector(".bf2-moon");if(n){var t,r=n.querySelector(".bf2-moon-light"),o=50*Math.abs(Math.cos(2*Math.PI*e));t=e<.25?"M 50 0 a ".concat(o," 50 0 0 1 0 100 a 50 50 0 0 0 0 -100 Z"):e<.5?"M 50 0 a ".concat(o," 50 0 0 0 0 100 a 50 50 0 0 0 0 -100 Z"):"M 50 0 a 50 50 0 0 0 0 100 a ".concat(o,e<.75?" 50 0 0 0 0 -100 Z":" 50 0 0 1 0 -100 Z"),r.setAttribute("d",t),Math.abs(.5-e)<.05?n.parentNode.setAttribute("title","Achtung Vollmond!"):n.parentNode.removeAttribute("title")}}function We(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Xe,Ke,Ye,en="https://davidmz.github.io/BetterFeed2/storage.html?_="+Math.random(),nn=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.iframe=document.createElement("iframe"),this.iframe.src=en,this.iframe.style.cssText="visibility: hidden;\n            position: absolute;\n            left: 0; top: 0;\n            height:0; width:0;\n            border: none;",document.body.appendChild(this.iframe),this.msg=new Te(this.iframe.contentWindow,"https://davidmz.github.io")}var n,t;return n=e,(t=[{key:"get",value:function(e){return this.msg.send("get",e)}},{key:"set",value:function(e,n){return this.msg.send("set",{key:e,value:n})}}])&&We(n.prototype,t),e}();function tn(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function rn(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function on(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){rn(a,r,o,i,c,"next",e)}function c(e){rn(a,r,o,i,c,"throw",e)}i(void 0)}))}}var an=k("switch-accounts"),cn="bf2-switch-dlg-",sn="bfAccounts-freefeed.net",un=[{selector:".".concat(cn,"del"),handler:function(e){return confirm("Are you sure?")?on(regeneratorRuntime.mark((function n(){var t,r,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me.ready;case 2:if(t=n.sent,r=t.me,(o=Me(e,".".concat(cn,"account")).dataset.username)!==r){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,bn();case 9:if(1!==(a=n.sent.filter((function(e){return e.username!==o}))).length||a[0].username!==r){n.next=15;break}return n.next=13,ln.set(sn,null);case 13:n.next=17;break;case 15:return n.next=17,ln.set(sn,a);case 17:return n.t0=fn,n.next=20,hn();case 20:n.t1=n.sent,n.t0.showContent.call(n.t0,n.t1);case 22:case"end":return n.stop()}}),n)})))():Promise.resolve()}},{selector:".".concat(cn,"account"),handler:function(e){return wn.apply(this,arguments)}},{selector:".".concat(cn,"add-new"),handler:function(e){e.style.display="none",document.body.querySelector(".".concat(cn,"new-form")).style.display="block"}}],ln=null;an.init((function(){ln=new nn,document.body.addEventListener("click",(function(e){un.some((function(n){var t=Me(e.target,n.selector,!0);return!!t&&(e.preventDefault(),n.handler(t),!0)}))}))})),an.watch(".logged-in > .avatar, .logged-in > .userpic",(function(e){e.appendChild(le(".bf2-switch-acc",{title:"Switch account"},le("span.bf2-switch-acc__icon"))).addEventListener("click",dn)}));var fn=null;function dn(){return pn.apply(this,arguments)}function pn(){return(pn=on(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(fn=new ze("bf2-switch-account-box")).showContent("<p>Loading…</p>"),e.t0=fn,e.next=5,hn();case 5:e.t1=e.sent,e.t0.showContent.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hn(){return mn.apply(this,arguments)}function mn(){return(mn=on(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.ready;case 2:return n=e.sent,t=n.me,(r=le("form.".concat(cn,"new-form"),se(Xe||(Xe=tn(['\n            <p>Please enter username and password of your other account:</p>\n            <p><input class="form-control" type="text" name="username" placeholder="Username" required></p>\n            <p><input class="form-control" type="password" name="password" placeholder="Password" required></p>\n            <p>\n                <button type="submit" class="btn btn-default">Add</button>\n            </p>\n        ']))))).addEventListener("submit",(function(e){e.preventDefault();var n=r.elements.username.value,t=r.elements.password.value;on(regeneratorRuntime.mark((function e(){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("/v1/session","username=".concat(encodeURIComponent(n),"&password=").concat(encodeURIComponent(t)));case 2:if(!(r=e.sent).err){e.next=6;break}return alert(r.err),e.abrupt("return");case 6:return o=r.users.username,a=r.authToken,e.next=9,gn(o,a);case 9:return e.t0=fn,e.next=12,hn();case 12:e.t1=e.sent,e.t0.showContent.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e)})))()})),e.t0=le,e.t1=se(Ke||(Ke=tn(['\n            <div class="','header">Switch account to:</div>'])),cn),e.t2=le,e.t3=".".concat(cn,"accounts"),e.next=12,bn();case 12:return e.t4=e.sent.map((function(e){var n=e.username,r=le("img.".concat(cn,"upic"),{src:X});ee(n).then((function(e){return r.src=e}));var o=le(".".concat(cn,"del"),{title:"Remove from list"},le("i.fa.fa-times-circle"));return le(".".concat(cn,"account").concat(n===t?".-current":""),{"data-username":n},r,n,o)})),e.t5=(0,e.t2)(e.t3,e.t4),e.t6=se(Ye||(Ye=tn(['\n            <div class="','add-new"><a><i class="fa fa-plus"></i> Add new account</a></div>'])),cn),e.t7=r,e.abrupt("return",(0,e.t0)("",e.t1,e.t5,e.t6,e.t7));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bn(){return vn.apply(this,arguments)}function vn(){return(vn=on(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln.get(sn);case 2:if(n=e.sent){e.next=10;break}return e.next=6,me.ready;case 6:e.t0=e.sent.me,e.t1=M().authToken,e.t2={username:e.t0,token:e.t1},n=[e.t2];case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gn(e,n){return yn.apply(this,arguments)}function yn(){return(yn=on(regeneratorRuntime.mark((function e(n,t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn();case 2:return r=e.sent,(o=r.find((function(e){return e.username===n})))?o.token=t:r.push({username:n,token:t}),e.next=7,ln.set(sn,r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wn(){return(wn=on(regeneratorRuntime.mark((function e(n){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.ready;case 2:if(t=e.sent.me,(r=n.dataset.username)!==t){e.next=6;break}return e.abrupt("return");case 6:return o=null,e.next=9,bn();case 9:if(e.sent.some((function(e){return e.username===r&&(o=e.token,!0)})),!o){e.next=16;break}return fn.showContent("Please wait…"),e.next=14,gn(t,M().authToken);case 14:localStorage.setItem(P,o),location.reload();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xn=k("no-read-more",!1);xn.watch("a.read-more",(function(e){return e.click()})),xn.watch(".expand-button > i",(function(e){return e.click()}));var kn=t(476),En={};function Sn(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}En.styleTagTransform=d(),En.setAttributes=s(),En.insert=i().bind(null,"head"),En.domAPI=o(),En.insertStyleElement=l(),n()(kn.Z,En),kn.Z&&kn.Z.locals&&kn.Z.locals;var An=k("comment-clouds"),_n=!1;function Tn(e,n){if(e.nodeType===Node.TEXT_NODE)n(e);else if(e.nodeType===Node.ELEMENT_NODE)for(var t=e.firstChild;t;){var r=t.nextSibling;Tn(t,n),t=r}}An.init((function(e){(_n=2===e.commentCloudsMode)&&document.body.classList.add("bf2-comments-with-avatars")})),An.watch(".comment[data-author]",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.querySelector(".bf2-comment-ex")&&!n.classList.contains("is-hidden")){e.next=2;break}return e.abrupt("return");case 2:if(!_n){e.next=18;break}if(t=n.dataset.author,r=n.appendChild(le(".bf2-comment-avatar.bf2-comment-ex")),e.t0=ee,e.t1=t,e.t1){e.next=11;break}return e.next=10,me.ready;case 10:e.t1=e.sent.me;case 11:return e.t2=e.t1,e.next=14,(0,e.t0)(e.t2);case 14:o=e.sent,r.style.backgroundImage="url("+o+")",e.next=19;break;case 18:n.appendChild(le("i.fa.fa-comment.icon.bf2-ico-bg.bf2-comment-ex"));case 19:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){Sn(a,r,o,i,c,"next",e)}function c(e){Sn(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()),k("hide-arabic",!1).init((function(){document.head.appendChild(le("style.bf2-hide-posts")).sheet.insertRule(".bf2-aggregate-page .bf2-lang-arabic { display: none; }",0)}));var Pn,Mn=k("hanging-punct");Mn.init((function(){Pn=document.createElement("div")}));var Cn=/(^|\s)([(«“-]|&quot;)/g;Mn.watch(".post-text, .comment-body",(function(e){if(b(e,".comment-body")){var n=e.querySelectorAll(".user-name-wrapper"),t=n[n.length-1];t&&t.nextElementSibling&&Tn(t.nextElementSibling,(function(e){"("===e.nodeValue&&(e.nodeValue=" (")}))}Tn(e,(function(e){if(!e.parentNode.classList.contains("bf2-hp")){var n=re(e.nodeValue);if(Cn.test(n)){for(n=n.replace(Cn,'<span class="bf2-hp bf2-hp-pre bf2-hp-pre-$2">$1</span><span class="bf2-hp bf2-hp-$2">$2</span>'),Pn.innerHTML=n;Pn.firstChild;)e.parentNode.insertBefore(Pn.firstChild,e);e.parentNode.removeChild(e)}}}))})),k("show-timestamps",!1).watch(".post-lock-icon",(function(e){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),e.dispatchEvent(n)})),k("no-comment-more",!1).watch(".comment-tail__actions",(function(e){var n=e.querySelectorAll(".comment-tail__action");1===n.length?e.hidden=!0:n[n.length-1].hidden=!0}));var In=t(918),Rn={};function jn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(c)throw o}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return On(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?On(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ln(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}Rn.styleTagTransform=d(),Rn.setAttributes=s(),Rn.insert=i().bind(null,"head"),Rn.domAPI=o(),Rn.insertStyleElement=l(),n()(In.Z,Rn),In.Z&&In.Z.locals&&In.Z.locals;var Nn=k("previews-in-comments",!1),qn=/^https?:\/\/(?:www\.|m\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?(?:v=|.+&v=)))([\w-]+)/i;function Bn(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function Dn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}Nn.watch(".comment",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t,r,o,a,i,c,s,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=n.querySelectorAll(".media-link"),r=[],o=0;o<t.length;o++)"https://media.freefeed.net"===(a=t[o]).origin&&/\.(jpg|png|gif|webp)$/.test(a.pathname)&&((i=a.href.replace(/\/attachments(\/\w+)?\/[0-9a-f]{8}-/,(function(e){var n=e.split("/");return 3===n.length?n.splice(2,0,"thumbnails"):4===n.length&&(n[2]="thumbnails"),n.join("/")}))).replace(/\.webp$/,".jpg"),r.push({thumb:i,link:a})),qn.test(a.href)&&(c=qn.exec(a.href),s=jn(c,2),u=s[1],r.push({thumb:"https://img.youtube.com/vi/".concat(u,"/default.jpg"),link:a,type:"video"}));if(0!==r.length){e.next=5;break}return e.abrupt("return");case 5:l=r.map((function(e){var n=le("img.bf2-prvs__item",{src:e.thumb,loading:"lazy"});return"video"===e.type&&n.classList.add("bf2-prvs__item--video"),n.addEventListener("click",(function(){return e.link.click()})),n.addEventListener("error",(function(){return n.src=e.thumb.replace("/thumbnails","")})),n})),f=le(".bf2-prvs",l),n.appendChild(f);case 8:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){Ln(a,r,o,i,c,"next",e)}function c(e){Ln(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}());var zn=M().userId;function Fn(){var e=Date.now();localStorage["bf2-next-update"]=e+36e5;var n=new XMLHttpRequest;n.open("GET","https://api.github.com/repos/davidmz/BetterFeed2/tags?page=1&per_page=1"),n.responseType="json",n.onload=function(){try{var t=n.response;if(1===t.length&&"name"in t[0]){var r=t[0].name;localStorage["bf2-version"]=r,localStorage["bf2-next-update"]=e+864e5,"v2.22.0"!==r?confirm("Доступна новая версия: ".concat(r,". Она будет установлена после перезагрузки страницы.\n\nПерезагрузить страницу сейчас?"))&&location.reload(!0):alert("У вас установлена последняя версия (".concat(r,")"))}}catch(e){}},n.send()}/^\/(attachments\/|files\/|bookmarklet|v\d\/)/.test(location.pathname)||(MutationObserver&&Promise?null===zn?console.error("Can not start BetterFeed: user not logged in"):"__BetterFeed"in window?console.warn("BetterFeed already started"):(window.__BetterFeed=!0,Promise.all([me.ready,be]).then((function(e){var n,t,r=(n=e,t=1,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(c)throw o}}return a}}(n,t)||function(e,n){if(e){if("string"==typeof e)return Dn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Dn(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];!function(e){S(e);var n=new Te;n.on("getSettings",(function(){return e.toJSON()})),n.on("saveSettings",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.ready;case 2:return t=e.sent,e.next=5,t.saveProps(new xe(n));case 5:location.reload(!0);case 6:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){Bn(a,r,o,i,c,"next",e)}function c(e){Bn(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()),n.on("checkUpdates",Fn)}(new xe(r.bf2Props))}))):console.error("Can not start BetterFeed: MutationObserver & Promise not supported"))})()})();