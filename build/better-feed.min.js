!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(s){return void n(s)}return u.done?void e(a):Promise.resolve(a).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e){var t=this;(0,a.startObserver)(e);var n=new b["default"];n.on("getSettings",function(){return e.toJSON()}),n.on("saveSettings",function(){var e=o(regeneratorRuntime.mark(function n(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f["default"].ready;case 2:return r=t.sent,t.next=5,r.saveProps(new h["default"](e));case 5:location.reload(!0);case 6:case"end":return t.stop()}},n,t)}));return function(t){return e.apply(this,arguments)}}())}var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n(1);var a=n(5),s=n(8),c=n(9),f=r(c),l=n(13),d=r(l),p=n(14),h=r(p),v=n(15),b=r(v);n(16),n(18),n(25),n(27),/^\/(attachments|files)\//.test(location.pathname)||(MutationObserver&&Promise?null===s.userId?console.error("Can not start BetterFeed: user not logged in"):"__BetterFeed"in window?console.warn("BetterFeed already started"):(window.__BetterFeed=!0,Promise.all([f["default"].ready,d["default"]]).then(function(e){var t=u(e,1),n=t[0];i(new h["default"](n.bf2Props))})):console.error("Can not start BetterFeed: MutationObserver & Promise not supported"))},function(e,t,n){var r=n(2);"string"==typeof r&&(r=[[e.id,r,""]]);n(4)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".bf2-lightbox-container{left:0;top:0;width:100%;height:100%;position:fixed}.bf2-lightbox-shadow{left:0;top:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.5)}.bf2-lightbox-content{position:relative;border:1px solid #000;background-color:#ccc;box-shadow:0 0 50px rgba(0,0,0,.5)}.bf2-settings-lightbox .bf2-lightbox-content{width:90vw;height:90vh;max-width:800px}.bf2-settings-lightbox .bf2-lightbox-content iframe{left:0;top:0;width:100%;height:100%}.bf2-access-token-lightbox .bf2-lightbox-content{background-color:#fff;max-width:90vw;padding:2em}.bf2-access-token-lightbox .bf2-lightbox-content button{padding:.25em 2em;cursor:pointer}.bf2-access-token-lightbox .bf2-lightbox-content .bf2-access-token{word-wrap:break-word;font-family:monospace;color:#069;background-color:#eee;padding:1em}.bf2-green{padding:1em}.bf2-via-names{font-size:12px}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var u=t[o];"number"==typeof u[0]&&r[u[0]]||(n&&!u[2]?u[2]=n:n&&(u[2]="("+u[2]+") and ("+n+")"),e.push(u))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(c(r.parts[i],t))}else{for(var u=[],i=0;i<r.parts.length;i++)u.push(c(r.parts[i],t));p[r.id]={id:r.id,refs:1,parts:u}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],u=o[1],a=o[2],s=o[3],c={css:u,media:a,sourceMap:s};n[i]?n[i].parts.push(c):t.push(n[i]={id:i,parts:[c]})}return t}function i(e,t){var n=b(),r=g[g.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function u(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function c(e,t){var n,r,o;if(t.singleton){var i=y++;n=m||(m=a(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=d.bind(null,n),o=function(){u(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=l.bind(null,n),o=function(){u(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var i=document.createTextNode(o),u=e.childNodes;u[t]&&e.removeChild(u[t]),u.length?e.insertBefore(i,u[t]):e.appendChild(i)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),b=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,g=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=v()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],u=0;u<n.length;u++){var a=n[u],s=p[a.id];s.refs--,i.push(s)}if(e){var c=o(e);r(c,t)}for(var u=0;u<i.length;u++){var s=i[u];if(0===s.refs){for(var f=0;f<s.parts.length;f++)s.parts[f]();delete p[s.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=new l(e,t,n);return f.set(e,r),r}function u(e){if(!d){d=e,f.forEach(function(e){d.isModuleEnabled(e)&&e._initiate(d)});var t=new MutationObserver(function(e){e.forEach(function(e){for(var t=function(t,n){var r=e.addedNodes[t];r.nodeType==Node.ELEMENT_NODE&&f.forEach(function(e){d.isModuleEnabled(e)&&e._trigger(r,d)})},n=0,r=e.addedNodes.length;r>n;n++)t(n,r)})});t.observe(document.body,{childList:!0,subtree:!0})}}Object.defineProperty(t,"__esModule",{value:!0}),t.modules=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.registerModule=i,t.startObserver=u;var s=n(6),c=r(s),f=t.modules=new Map,l=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];o(this,e),this.name=t,this.alwaysEnabled=r,this.enabledByDefault=n,this._watchers=[],this._initiators=[]}return a(e,[{key:"init",value:function(e){this._initiators.push(e)}},{key:"watch",value:function(e,t){this._watchers.push({selector:e,callback:t})}},{key:"_initiate",value:function(e){this._initiators.forEach(function(t){return t(e)}),this._watchers.forEach(function(t){var n=t.selector,r=t.callback;return(0,c["default"])(document.body,n,function(t){return r(t,e)})})}},{key:"_trigger",value:function(e){this._watchers.forEach(function(t){var n=t.selector,r=t.callback;return(0,c["default"])(e,n,function(e){return r(e,d)})})}}]),e}(),d=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=r(o);t["default"]=function(e,t,n){if(null===e)return[];var r=e.querySelectorAll(t),o=r?Array.prototype.slice.call(r):[];if((0,i["default"])(e,t)&&o.unshift(e),n)for(var u=0,a=o.length;a>u;u++)n(o[u]);return o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return e[n](t)};var n="matches"in HTMLElement.prototype?"matches":"msMatchesSelector"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.userId=null,r=t.authToken=null,o=t.siteDomain="freefeed.net",i=t.cookieName="freefeed_authToken";"george.freefeed.net"===location.hostname&&(t.cookieName=i="micropeppaBETA_authToken",t.siteDomain=o="george.freefeed.net");var u=document.cookie.match(new RegExp("(?:^|;\\s*)"+i+"=([^;]*)")),a=u?u[1]:null;if(a){var s=a.split(".");if(3===s.length)try{var c=JSON.parse(atob(s[1]));"userId"in c&&(t.userId=n=c.userId,t.authToken=r=a)}catch(f){}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(s){return void n(s)}return u.done?void e(a):Promise.resolve(a).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(10),c=r(s),f=n(11),l=r(f),d="me.davidmz.BetterFeed2",p=function(){function e(){u(this,e),this.me=null,this.myID=null,this.myScreenName=null,this.friends=[],this.readers=[],this.banIds=[],this.bf2Props={},this._savePropsQueue=[],this._savingPropsNow=!1}return a(e,[{key:"whoIs",value:function(t){var n=0;return t===this.me&&(n|=e.ME),-1!==this.friends.indexOf(t)&&(n|=e.FRIEND),-1!==this.readers.indexOf(t)&&(n|=e.READER),n}},{key:"isBanned",value:function(e){return-1!==this.banIds.indexOf(e)}},{key:"saveProps",value:function(e){return this._savePropsQueue.push(e.toJSON()),this._saveProps()}},{key:"_saveProps",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function n(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._savingPropsNow){n.next=2;break}return n.abrupt("return");case 2:this._savingPropsNow=!0;case 3:if(!(this._savePropsQueue.length>0)){n.next=12;break}e=this._savePropsQueue.shift(),t={};for(r in e)e.hasOwnProperty(r)&&(t[r]=null);return n.next=8,c.put("/v1/users/"+this.myID,JSON.stringify({user:{frontendPreferences:o({},d,t)}}));case 8:return n.next=10,c.put("/v1/users/"+this.myID,JSON.stringify({user:{frontendPreferences:o({},d,e)}}));case 10:n.next=3;break;case 12:this._savingPropsNow=!1;case 13:case"end":return n.stop()}},n,this)}));return e}()}]),e}();t["default"]=p,p.ME=1,p.FRIEND=2,p.READER=4,p.ready=null,p.update=function(){p.ready=c.get("/v1/users/whoami").then(function(e){var t=new p;return t.me=e.users.username,t.myID=e.users.id,t.myScreenName=e.users.screenName,l.setPic(e.users.username,e.users.profilePictureMediumUrl),t.friends=(e.subscribers||[]).map(function(e){return l.setPic(e.username,e.profilePictureMediumUrl),e.username}),t.banIds=e.users.banIds,t.bf2Props=e.users.frontendPreferences[d]||{},c.get("/v1/users/"+t.me+"/subscribers").then(function(e){return t.readers=(e.subscribers||[]).map(function(e){return l.setPic(e.username,e.profilePictureMediumUrl),e.username}),t})})},p.update()},function(e,t,n){"use strict";function r(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="json",r.setRequestHeader("X-Authentication-Token",a.authToken),r.onload=function(){r.response&&"err"in r.response?n(r.response.err):t(r.response)},r.send()})}function o(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("PUT",e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",a.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function i(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("DELETE",e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",a.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function u(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("POST",e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",a.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.get=r,t.put=o,t.del=i,t.post=u;var a=n(8)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(s){return void n(s)}return u.done?void e(a):Promise.resolve(a).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e){return l.has(e)||l.set(e,a(e)),l.get(e)}function u(e,t){l.set(e,Promise.resolve(t&&""!==t?t:f))}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPic=void 0;var a=function(){var e=o(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c["default"])(e);case 2:return n=t.sent,r=n.users.profilePictureMediumUrl,t.abrupt("return",r&&""!==r?r:f);case 5:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}();t.getPic=i,t.setPic=u;var s=n(12),c=r(s),f=t.defaultPic="https://freefeed.net/img/default-userpic-48.png",l=new Map},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return a.has(e)&&!t||a.set(e,u.get("/v1/users/"+e)),a.get(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(10),u=r(i),a=new Map},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=new Promise(function(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,0):document.addEventListener("DOMContentLoaded",e)})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),a=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];r(this,e),this.modules=new Map,u.modules.forEach(function(e){e.alwaysEnabled||t.modules.set(e.name,e.enabledByDefault)}),this.hidePostsFrom=new Set,n&&((n.modules||[]).forEach(function(e){var n=o(e,2),r=n[0],u=n[1];(i||t.modules.has(r))&&t.modules.set(r,!!u)}),(n.hidePostsFrom||[]).forEach(function(e){return t.hidePostsFrom.add(e)}))}return i(e,[{key:"toJSON",value:function(){var e={modules:[],hidePostsFrom:[]};return this.modules.forEach(function(t,n){return e.modules.push([n,t])}),this.hidePostsFrom.forEach(function(t){return e.hidePostsFrom.push(t)}),e}},{key:"isModuleEnabled",value:function(e){return e.alwaysEnabled||!this.modules.has(e.name)&&e.enabledByDefault||this.modules.get(e.name)}}]),e}();t["default"]=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=1,u="@response",a=function(){function e(){var t=this;n(this,e),this.__responders=new Map,this.__listeners=new Map,window.addEventListener("message",function(e){if("object"===r(e.data)){var n=e.data,o=n.action,i=n.requestId,a=n.value,s=e.source,c=e.origin;if(o===u&&t.__responders.has(i))t.__responders.get(i)(a),t.__responders["delete"](i);else if(t.__listeners.has(o)){var f=t.__listeners.get(o)(a);s.postMessage({action:u,requestId:i,value:f},c)}}})}return o(e,[{key:"send",value:function(e,t,n){var r=this,o=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return new Promise(function(u){var a=i++;r.__responders.set(a,u),e.postMessage({action:n,requestId:a,value:o},t)})}},{key:"on",value:function(e,t){this.__listeners.set(e,t)}}]),e}();t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(5),i=n(17),u=r(i),a=(0,o.registerModule)("common",!0,!0);a.watch(".timeline-post, .single-post",function(e){var t=e.querySelector(".post-timestamp").getAttribute("href").match(/^\/.+?\/([\w-]+)/)[1];e.id="post-"+t,e.dataset.postId=t;var n=e.querySelector(".post-author").getAttribute("href").substr(1);e.dataset.postAuthor=n,e.classList.add("bf2-post-from-"+n)}),a.watch(".user-card .display-name",function(e){(0,u["default"])(e,".user-card").dataset.userName=e.getAttribute("href").substr(1)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=n?e:e.parentNode;return a?r.closest(t):r&&r.nodeType==Node.ELEMENT_NODE?(0,u["default"])(r,t)?r:o(r,t):null}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(7),u=r(i),a=!!Element.prototype.closest},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=f["default"]+"/src/html/settings.html?origin="+encodeURIComponent(location.origin);return/iPhone|iPad/.test(navigator.userAgent)?void window.open(e,"_blank"):void new d["default"]("bf2-settings-lightbox").showContent((0,s["default"])("iframe",{src:e,frameborder:"0"}))}function i(){var e='\n        <p>\n            Your access token is:\n        </p>\n        <p class="bf2-access-token">\n            '+(0,v["default"])(p.authToken)+'\n        </p>\n        <p>\n            <strong>WARNING:</strong> Keep your token secure at all times and do not share it with services you do not fully trust.\n            They will be able to perform ANY operation on your behalf including changing your password and\n            <strong>locking you out of your account</strong>.\n        </p>\n        <p>\n            Giving your token to third party services provides them with FULL and UNLIMITED access to your account.\n            You can not change the token, you cannot revert access once you give it out.\n        </p>\n        <p>\n            If you suspect your token is being abused, contact <a href="mailto:freefeed.net@gmail.com">freefeed.net@gmail.com</a> <strong>immediately</strong>.\n        </p>\n        <p style="text-align: center">\n            <button>Close</button>\n        </p>\n    ',t=new d["default"]("bf2-access-token-lightbox");t.showContent(e),t.contentEl.querySelector("button").addEventListener("click",function(){return t.hide()})}var u=n(5),a=n(19),s=r(a),c=n(23),f=r(c),l=n(24),d=r(l),p=n(8),h=n(22),v=r(h),b=(0,u.registerModule)("settings-link",!0,!0);b.watch(".sidebar",function(e){if(!e.querySelector(".bf2-sidebar-box")){var t=(0,s["default"])("a","BetterFeed settings"),n=(0,s["default"])(".bf2-sidebar-box.box",(0,s["default"])(".box-header-groups","Add-ons"),(0,s["default"])(".box-body",(0,s["default"])("ul",(0,s["default"])("li",t))),(0,s["default"])(".box-footer","v2.0.0"));e.insertBefore(n,null),t.addEventListener("click",function(){return o()})}}),b.watch(".bf2-settings-description",function(e){if(!document.body.querySelector(".bf2-green")){var t=(0,s["default"])("a","configure settings"),n=(0,s["default"])("a","show access token");e.parentNode.insertBefore((0,s["default"])("p.bg-success.bf2-green","BetterFeed enabled (2.0.s) | ",(0,s["default"])("i.fa.fa-cog")," ",t," | ",(0,s["default"])("i.fa.fa-exclamation-triangle")," ",n),e),t.addEventListener("click",function(){return o()}),n.addEventListener("click",function(){return i()})}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r,o,a,f=e.split("."),l=f.shift()||"div";"$"===l?a=document.createDocumentFragment():(a=document.createElement(l),f.length>0&&(a.className=f.join(" ")));var d=1;if(arguments.length>1&&"object"===("undefined"==typeof t?"undefined":u(t))&&!(t instanceof Node)&&!(0,s["default"])(t)&&!(0,c.isSafeHTML)(t)){for(o in t)t.hasOwnProperty(o)&&a.setAttribute(o,t[o]);d=2}if(arguments.length>d)for(r=d;r<arguments.length;r++)i(a,arguments[r]);return a}function i(e,t){t instanceof Node?e.appendChild(t):(0,s["default"])(t)?t.forEach(i.bind(null,e)):"string"==typeof t?e.appendChild(document.createTextNode(t)):(0,c.isSafeHTML)(t)&&e.insertAdjacentHTML("beforeEnd",t.toString())}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=o;var a=n(20),s=r(a),c=n(21)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return new l(e)}function u(e){return e instanceof l}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return i(e.reduce(function(e,t,r){var o=n[r-1];return e+(u(o)?o:(0,f["default"])(o))+t}))}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.safeHTML=i,t.isSafeHTML=u,t.html=a;var c=n(22),f=r(c),l=function(){function e(t){o(this,e),this.text=t}return s(e,[{key:"toString",value:function(){return this.text}}]),e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="https://cdn.rawgit.com/davidmz/BetterFeed2/"+localStorage["bf2-version"];if(document.currentScript){var r=document.currentScript.src.split("/");n=r.slice(0,r.length-2).join("/")}t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(19),a=r(u),s=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?"":arguments[0],r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];o(this,e),this._container=(0,a["default"])(".bf2-lightbox-container"),""!==n&&this._container.classList.add(n);var i=this._container.appendChild((0,a["default"])(".bf2-lightbox-shadow"));this.contentEl=i.appendChild((0,a["default"])(".bf2-lightbox-content")),i.addEventListener("click",function(e){e.target!==i||r||t.hide()})}return i(e,[{key:"showContent",value:function(e){"string"==typeof e?this.contentEl.innerHTML=e:(this.contentEl.innerHTML="",this.contentEl.appendChild(e)),document.body.appendChild(this._container)}},{key:"hide",value:function(){this.contentEl.innerHTML="",this._container.parentNode.removeChild(this._container)}}]),e}();t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e.title=(t?"Show":"Hide")+" userâ€™s posts "+(t?"in":"from")+" home feed",e.innerHTML=(0,v["default"])((t?"Show":"Hide")+" posts")}var i=n(5),u=n(19),a=r(u),s=n(9),c=r(s),f=n(17),l=r(f),d=n(26),p=r(d),h=n(22),v=r(h),b=(0,i.registerModule)("hide-posts"),m="bf2-homepage",y=null;b.init(function(e){(0,p["default"])(function(e){return document.body.classList.toggle(m,"/"===e.pathname)}),y=document.head.appendChild((0,a["default"])("style.bf2-hide-posts")).sheet,e.hidePostsFrom.forEach(function(e){return y.insertRule("."+m+" .bf2-post-from-"+e+" { display: none; }",0)})}),b.watch(".user-card-actions",function(e,t){var n=(0,l["default"])(e,".user-card").dataset.userName,r=t.hidePostsFrom.has(n),i=(0,a["default"])("a");o(i,r),e.appendChild((0,a["default"])("span"," - ",i)),i.addEventListener("click",function(){r?!function(){var e="."+m+" .bf2-post-from-"+n;Array.prototype.slice.call(y.rules).forEach(function(t,n){t.selectorText===e&&y.deleteRule(n)}),t.hidePostsFrom["delete"](n)}():(y.insertRule("."+m+" .bf2-post-from-"+n+" { display: none; }",0),t.hidePostsFrom.add(n)),r=!r,o(i,r),c["default"].ready.then(function(e){return e.saveProps(t)})})})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){n.push(e),e(location)};var n=[],r=history.pushState.bind(history),o=history.replaceState.bind(history);history.pushState=function(e,t,o){r(e,t,o),n.forEach(function(e){return e(location)})},history.replaceState=function(e,t,r){o(e,t,r),n.forEach(function(e){return e(location)})},window.addEventListener("popstate",function(){return n.forEach(function(e){return e(location)})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(s){return void n(s)}return u.done?void e(a):Promise.resolve(a).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}var a=i(['<span class="user-name-wrapper"><a href="/','">',"</a></span>"],['<span class="user-name-wrapper"><a href="/','">',"</a></span>"]),s=n(5),c=n(6),f=o(c),l=n(10),d=r(l),p=n(21),h=n(9),v=o(h),b=(0,s.registerModule)("posts-via");b.watch(".timeline-post:not(.bf2-post-via)",function(){var e=u(regeneratorRuntime.mark(function t(e){var n,r,o,i,u,s,c,l,h,b,m,y,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("/"===location.pathname){t.next=2;break}return t.abrupt("return");case 2:return e.classList.add("bf2-post-via"),t.next=5,v["default"].ready;case 5:if(n=t.sent,r=e.dataset.postId,o=e.dataset.postAuthor,i=(0,f["default"])(e,".post-recipient").map(function(e){return e.getAttribute("href").substr(1)}).filter(function(e){return e!==o}),!(n.whoIs(o)&(v["default"].ME|v["default"].FRIEND))){t.next=11;break}return t.abrupt("return");case 11:if(!i.some(function(e){return!!(n.whoIs(e)&v["default"].FRIEND)})){t.next=13;break}return t.abrupt("return");case 13:if(e.classList.add("bf2-alien-post"),u=(0,f["default"])(e,".likes a"),s=u.some(function(e){return!e.hasAttribute("href")}),c=u.filter(function(e){return e.hasAttribute("href")}).map(function(e){return e.getAttribute("href").substr(1)}).filter(function(e){return null!==e&&!!(n.whoIs(e)&(v["default"].ME|v["default"].FRIEND))}),l=(0,f["default"])(e,".comment-body > .user-name-wrapper a").map(function(e){return e.getAttribute("href").substr(1)}).filter(function(e){return!!(n.whoIs(e)&(v["default"].ME|v["default"].FRIEND))}),!s||0!=c.length||0!=l.length){t.next=20;break}return t.delegateYield(regeneratorRuntime.mark(function w(){var e,t,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d.get("/v1/posts/"+r+"?maxLikes=all&maxComments=2");case 2:e=i.sent,t=e.posts.likes,o=e.users,c=t.map(function(e){var t=o.filter(function(t){return t.id=e}).map(function(e){return e.username});return t.length>0?t[1]:null}).filter(function(e){return null!==e&&!!(n.whoIs(e)&(v["default"].ME|v["default"].FRIEND))}).filter(function(e,t,n){return n.indexOf(e)===t});case 6:case"end":return i.stop()}},w,void 0)})(),"t0",20);case 20:h=!1,b=!1,m=[],y=0==c.length&&0==l.length,y||(h=c.some(function(e){return e==n.me}),b=l.some(function(e){return e==n.me}),m=c.concat(l).filter(function(e){return e!==n.me}).filter(function(e,t,n){return n.indexOf(e)===t})),g=[],y?g.push("somebody"):(b?g.push("your comment"):h&&g.push("your like"),m.forEach(function(e){return g.push((0,p.html)(a,e,e))})),g.length>1&&(g[g.length-2]=g[g.length-2]+" and "+g[g.length-1],g.length--),e.querySelector(".post-header").insertAdjacentHTML("beforeend",'<span class="bf2-via-names"> via '+g.join(", ")+"</span>");case 29:case"end":return t.stop()}},t,void 0)}));return function(t){return e.apply(this,arguments)}}())}]);
//# sourceMappingURL=better-feed.min.js.map