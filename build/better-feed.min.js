!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e){var t=this;(0,u.startObserver)(e);var n=new b["default"];n.on("getSettings",function(){return e.toJSON()}),n.on("saveSettings",function(){var e=o(regeneratorRuntime.mark(function n(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f["default"].ready;case 2:return r=t.sent,t.next=5,r.saveProps(new h["default"](e));case 5:location.reload(!0);case 6:case"end":return t.stop()}},n,t)}));return function(t){return e.apply(this,arguments)}}()),n.on("checkUpdates",a)}function a(){var e=Date.now(),t=localStorage["bf2-version"];localStorage["bf2-next-update"]=e+36e5;var n=new XMLHttpRequest;n.open("GET","https://api.github.com/repos/davidmz/BetterFeed2/tags?page=1&per_page=1"),n.responseType="json",n.onload=function(){try{var r=n.response;if(1==r.length&&"name"in r[0]){var o=r[0].name;localStorage["bf2-version"]=o,localStorage["bf2-next-update"]=e+864e5,o!=t?confirm("Доступна новая версия: "+o+". Она будет установлена после перезагрузки страницы.\n\nПерезагрузить страницу сейчас?")&&location.reload(!0):alert("У вас установлена последняя версия ("+o+")")}}catch(i){}},n.send()}var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n(1);var u=n(5),c=n(8),l=n(9),f=r(l),d=n(17),p=r(d),m=n(18),h=r(m),v=n(19),b=r(v);n(20),n(23),n(26),n(27),n(28),n(29),n(32),n(37),n(38),n(39),n(41),n(46),/^\/(attachments|files)\//.test(location.pathname)||(MutationObserver&&Promise?null===c.userId?console.error("Can not start BetterFeed: user not logged in"):"__BetterFeed"in window?console.warn("BetterFeed already started"):(window.__BetterFeed=!0,Promise.all([f["default"].ready,p["default"]]).then(function(e){var t=s(e,1),n=t[0];i(new h["default"](n.bf2Props))})):console.error("Can not start BetterFeed: MutationObserver & Promise not supported"))},function(e,t,n){var r=n(2);"string"==typeof r&&(r=[[e.id,r,""]]);n(4)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,'.bf2-lightbox-container{left:0;top:0;width:100%;height:100%;position:fixed}.bf2-lightbox-shadow{left:0;top:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.5)}.bf2-lightbox-content{position:relative;border:1px solid #000;background-color:#ccc;box-shadow:0 0 50px rgba(0,0,0,.5)}.bf2-settings-lightbox .bf2-lightbox-content{width:90vw;height:90vh;max-width:800px}.bf2-settings-lightbox .bf2-lightbox-content iframe{left:0;top:0;width:100%;height:100%}.bf2-access-token-lightbox .bf2-lightbox-content{background-color:#fff;max-width:90vw;padding:2em}.bf2-access-token-lightbox .bf2-lightbox-content button{padding:.25em 2em;cursor:pointer}.bf2-access-token-lightbox .bf2-lightbox-content .bf2-access-token{word-wrap:break-word;font-family:monospace;color:#069;background-color:#eee;padding:1em}.bf2-green{padding:1em}.bf2-via-names{font-size:12px}.bf2-hide-aliens-cont{font-size:14px;font-weight:400;margin-left:1em;display:none}.bf2-homepage .bf2-hide-aliens-cont{display:inline}.bf2-hide-aliens .bf2-alien-post{display:none}.bf2-saving-settings-indicator{position:fixed;top:.66em;right:1em;background:#f66;color:#fff;padding:.25em 1em;border-radius:4px;z-index:100}.bf2-animated-gif{position:relative;display:inline-block}.bf2-animated-gif:after{content:"\\25B6   GIF";position:absolute;bottom:3px;right:4px;background-color:#069;color:#eee;font-weight:700;padding:.1em .4em;border-radius:3px;font-size:11px}.arrow-span{padding:0 .2em}.bf2-moon{width:18px;height:18px;margin-left:4px;margin-bottom:10px}.bf2-moon-shadow{fill:#666}.bf2-moon-light{fill:#f5eed9}h1{float:left;position:relative}.bf2-moon-cont{position:absolute;top:0;right:-20px}.bf2-switch-acc{color:#ccc;cursor:pointer;text-align:center}.bf2-switch-acc:hover{background-color:#eee;color:#000}.bf2-switch-account-box .bf2-lightbox-content{width:360px;height:auto;cursor:auto;border:1px solid #000;box-shadow:1px 1px 10px rgba(0,0,0,.5);background-color:#fff;padding:1em}.bf2-switch-dlg-header{font-size:120%}.bf2-switch-dlg-accounts{margin:1em 0}.bf2-switch-dlg-account{cursor:pointer;font-weight:700;border:1px solid #ddd;margin:.5em 0;position:relative}.bf2-switch-dlg-account.-current,.bf2-switch-dlg-account:hover{background-color:#eee}.bf2-switch-dlg-account.-current{cursor:not-allowed}.bf2-switch-dlg-account.-current .bf2-switch-dlg-del{display:none}.bf2-switch-dlg-upic{width:50px;height:50px;margin-right:1em;border-right:1px solid #ddd}.bf2-switch-dlg-new-form{display:none}.bf2-switch-dlg-del{position:absolute;right:0;top:50%;width:20px;height:20px;line-height:20px;text-align:center;margin-top:-10px}.bf2-switch-dlg-del:hover{color:#c00}.box{clear:both}.bf2-lightboxed-images .image-attachments a{cursor:zoom-in}',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(c(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(c(r.parts[i],t));p[r.id]={id:r.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a=o[1],s=o[2],u=o[3],c={css:a,media:s,sourceMap:u};n[i]?n[i].parts.push(c):t.push(n[i]={id:i,parts:[c]})}return t}function i(e,t){var n=v(),r=g[g.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function c(e,t){var n,r,o;if(t.singleton){var i=y++;n=b||(b=s(t)),r=l.bind(null,n,i,!1),o=l.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=d.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=f.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function l(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var p={},m=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=m(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=m(function(){return document.head||document.getElementsByTagName("head")[0]}),b=null,y=0,g=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var s=n[a],u=p[s.id];u.refs--,i.push(u)}if(e){var c=o(e);r(c,t)}for(var a=0;a<i.length;a++){var u=i[a];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=new f(e,t,n);return l.set(e,r),r}function a(e){if(!d){d=e,l.forEach(function(e){d.isModuleEnabled(e)&&e._initiate(d)});var t=new MutationObserver(function(e){e.forEach(function(e){for(var t=function(t,n){var r=e.addedNodes[t];r.nodeType==Node.ELEMENT_NODE&&l.forEach(function(e){d.isModuleEnabled(e)&&e._trigger(r,d)})},n=0,r=e.addedNodes.length;r>n;n++)t(n,r)})});t.observe(document.body,{childList:!0,subtree:!0})}}Object.defineProperty(t,"__esModule",{value:!0}),t.registeredModules=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.registerModule=i,t.startObserver=a;var u=n(6),c=r(u),l=t.registeredModules=new Map,f=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];o(this,e),this.name=t,this.alwaysEnabled=r,this.enabledByDefault=n,this.requiredModules=[],this._watchers=[],this._initiators=[]}return s(e,[{key:"init",value:function(e){this._initiators.push(e)}},{key:"watch",value:function(e,t){this._watchers.push({selector:e,callback:t})}},{key:"required",value:function(e){this.requiredModules.push(e)}},{key:"_initiate",value:function(e){this._initiators.forEach(function(t){return t(e)}),this._watchers.forEach(function(t){var n=t.selector,r=t.callback;return(0,c["default"])(document.body,n,function(t){return r(t,e)})})}},{key:"_trigger",value:function(e){this._watchers.forEach(function(t){var n=t.selector,r=t.callback;return(0,c["default"])(e,n,function(e){return r(e,d)})})}}]),e}(),d=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=r(o);t["default"]=function(e,t,n){if(null===e)return[];var r=e.querySelectorAll(t),o=r?Array.prototype.slice.call(r):[];if((0,i["default"])(e,t)&&o.unshift(e),n)for(var a=0,s=o.length;s>a;a++)n(o[a]);return o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return e[n](t)};var n="matches"in HTMLElement.prototype?"matches":"msMatchesSelector"},function(e,t){"use strict";function n(e){var t=document.cookie.match(new RegExp("(?:^|;\\s*)"+e+"=([^;]*)"));if(t){var n=t[1],r=n.split(".");if(3===r.length)try{var o=JSON.parse(atob(r[1]));if("userId"in o)return[o.userId,n]}catch(i){}}return[null,null]}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=t.userId=null,i=t.authToken=null,a={"freefeed.net":{cookies:["freefeedBETA_authToken","freefeed_authToken"]},"gamma.freefeed.net":{cookies:["freefeed_authToken"]}},s=t.siteDomain=location.hostname,u=t.cookieName="freefeed_authToken";s in a&&a[s].cookies.some(function(e){var a=n(e),s=r(a,2);return t.userId=o=s[0],t.authToken=i=s[1],t.cookieName=u=e,null!==o})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(10),l=o(c),f=n(11),d=o(f),p=n(13),m=r(p),h="me.davidmz.BetterFeed2",v=function(){function e(){s(this,e),this.me=null,this.myID=null,this.myScreenName=null,this.friends=[],this.readers=[],this.banIds=[],this.bf2Props={},this._savePropsQueue=[],this._savingPropsNow=!1,this._savingIndicator=(0,m["default"])(".bf2-saving-settings-indicator","Saving settings…")}return u(e,[{key:"whoIs",value:function(t){var n=0;return t===this.me&&(n|=e.ME),-1!==this.friends.indexOf(t)&&(n|=e.FRIEND),-1!==this.readers.indexOf(t)&&(n|=e.READER),n}},{key:"isBanned",value:function(e){return-1!==this.banIds.indexOf(e)}},{key:"saveProps",value:function(e){return this._savePropsQueue.push(e.toJSON()),this._saveProps()}},{key:"_saveProps",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function n(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._savingPropsNow){n.next=2;break}return n.abrupt("return");case 2:document.body.appendChild(this._savingIndicator),this._savingPropsNow=!0;case 4:if(!(this._savePropsQueue.length>0)){n.next=13;break}e=this._savePropsQueue.shift(),t={};for(r in e)e.hasOwnProperty(r)&&(t[r]=null);return n.next=9,l.put("/v1/users/"+this.myID,JSON.stringify({user:{frontendPreferences:i({},h,t)}}));case 9:return n.next=11,l.put("/v1/users/"+this.myID,JSON.stringify({user:{frontendPreferences:i({},h,e)}}));case 11:n.next=4;break;case 13:this._savingPropsNow=!1,document.body.removeChild(this._savingIndicator);case 15:case"end":return n.stop()}},n,this)}));return e}()}]),e}();t["default"]=v,v.ME=1,v.FRIEND=2,v.READER=4,v.ready=null,v.update=function(){v.ready=l.get("/v1/users/whoami").then(function(e){var t=new v;return t.me=e.users.username,t.myID=e.users.id,t.myScreenName=e.users.screenName,d.setPic(e.users.username,e.users.profilePictureMediumUrl),t.friends=(e.subscribers||[]).map(function(e){return d.setPic(e.username,e.profilePictureMediumUrl),e.username}),t.banIds=e.users.banIds,t.bf2Props=e.users.frontendPreferences[h]||{},l.get("/v1/users/"+t.me+"/subscribers").then(function(e){return t.readers=(e.subscribers||[]).map(function(e){return d.setPic(e.username,e.profilePictureMediumUrl),e.username}),t})})},v.update()},function(e,t,n){"use strict";function r(e){var t=arguments.length<=1||void 0===arguments[1]?u.authToken:arguments[1];return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("GET",c+e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",t),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send()})}function o(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("PUT",c+e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",u.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function i(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("DELETE",c+e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",u.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function a(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("POST",c+e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",u.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function s(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("POST",c+e),o.responseType="json",o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.get=r,t.put=o,t.del=i,t.post=a,t.anonFormPost=s;var u=n(8),c="https://freefeed.net"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e){return f.has(e)||f.set(e,s(e)),f.get(e)}function a(e,t){f.set(e,Promise.resolve(t&&""!==t?t:l))}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPic=void 0;var s=function(){var e=o(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c["default"])(e);case 2:return n=t.sent,r=n.users.profilePictureMediumUrl,t.abrupt("return",r&&""!==r?r:l);case 5:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}();t.getPic=i,t.setPic=a;var u=n(12),c=r(u),l=t.defaultPic="https://freefeed.net/img/default-userpic-48.png",f=new Map},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return s.has(e)&&!t||s.set(e,a.get("/v1/users/"+e)),s.get(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(10),a=r(i),s=new Map},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r,o,s,l=e.split("."),f=l.shift()||"div";"$"===f?s=document.createDocumentFragment():(s=document.createElement(f),l.length>0&&(s.className=l.join(" ")));var d=1;if(arguments.length>1&&"object"===("undefined"==typeof t?"undefined":a(t))&&!(t instanceof Node)&&!(0,u["default"])(t)&&!(0,c.isSafeHTML)(t)){for(o in t)t.hasOwnProperty(o)&&s.setAttribute(o,t[o]);d=2}if(arguments.length>d)for(r=d;r<arguments.length;r++)i(s,arguments[r]);return s}function i(e,t){t instanceof Node?e.appendChild(t):(0,u["default"])(t)?t.forEach(i.bind(null,e)):"string"==typeof t?e.appendChild(document.createTextNode(t)):(0,c.isSafeHTML)(t)&&e.insertAdjacentHTML("beforeEnd",t.toString())}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=o;var s=n(14),u=r(s),c=n(15)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return new f(e)}function a(e){return e instanceof f}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return i(e.reduce(function(e,t,r){var o=n[r-1];return e+(a(o)?o:(0,l["default"])(o))+t}))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.safeHTML=i,t.isSafeHTML=a,t.html=s;var c=n(16),l=r(c),f=function(){function e(t){o(this,e),this.text=t}return u(e,[{key:"toString",value:function(){return this.text}}]),e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=new Promise(function(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,0):document.addEventListener("DOMContentLoaded",e)})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];r(this,e),this.modules=new Map,a.registeredModules.forEach(function(e){e.alwaysEnabled||t.modules.set(e.name,e.enabledByDefault)}),this.hidePostsFrom=new Set,this.hideAliens=!1,n&&((n.modules||[]).forEach(function(e){var n=o(e,2),r=n[0],a=n[1];(i||t.modules.has(r))&&t.modules.set(r,!!a)}),(n.hidePostsFrom||[]).forEach(function(e){return t.hidePostsFrom.add(e)}),this.hideAliens=!!n.hideAliens)}return i(e,[{key:"toJSON",value:function(){var e={modules:[],hidePostsFrom:[]};return this.modules.forEach(function(t,n){return e.modules.push([n,t])}),this.hidePostsFrom.forEach(function(t){return e.hidePostsFrom.push(t)}),e.hideAliens=this.hideAliens,e}},{key:"isModuleEnabled",value:function(e){var t=this;return(e.alwaysEnabled||!this.modules.has(e.name)&&e.enabledByDefault||this.modules.get(e.name))&&!e.requiredModules.map(function(e){return a.registeredModules.get(e)}).some(function(e){return!t.isModuleEnabled(e)})}}]),e}();t["default"]=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=1,a="@response",s=function(){function e(){var t=this,o=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=arguments.length<=1||void 0===arguments[1]?"":arguments[1];n(this,e),this.__responders=new Map,this.__listeners=new Map,this.defaultWindow=o,this.defaultOrigin=i,window.addEventListener("message",function(e){if("object"===r(e.data)){var n=e.data,o=n.action,i=n.requestId,s=n.value,u=e.source,c=e.origin;if(o===a&&t.__responders.has(i))t.__responders.get(i)(s),t.__responders["delete"](i);else if(t.__listeners.has(o)){var l=t.__listeners.get(o)(s);u.postMessage({action:a,requestId:i,value:l},c)}}})}return o(e,[{key:"send",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.sendEx(this.defaultWindow,this.defaultOrigin,e,t)}},{key:"sendEx",value:function(e,t,n){var r=this,o=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return new Promise(function(a){var s=i++;r.__responders.set(s,a),e.postMessage({action:n,requestId:s,value:o},t)})}},{key:"on",value:function(e,t){this.__listeners.set(e,t)}}]),e}();t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(5),i=n(21),a=r(i),s=n(22),u=r(s),c=n(6),l=r(c),f=(0,o.registerModule)("common",!0,!0);f.init(function(){(0,u["default"])(function(e){return document.body.classList.toggle("bf2-homepage","/"===e.pathname)}),document.addEventListener("click",function(e){if(0==e.button&&e.target.classList.contains("bf2-user-link")){var t=document.querySelector('a:not(.bf2-user-link)[href="'+CSS.escape(e.target.getAttribute("href"))+'"]');t&&(e.preventDefault(),e.target.blur(),t.click())}})}),f.watch(".timeline-post, .single-post",function(e){var t=e.querySelector(".post-timestamp").getAttribute("href").match(/^\/.+?\/([\w-]+)/)[1];e.id="post-"+t,e.dataset.postId=t;var n=e.querySelector(".post-author").getAttribute("href").substr(1);e.dataset.postAuthor=n,e.classList.add("bf2-post-from-"+n),(0,l["default"])(e,".post-recipient").map(function(e){return e.getAttribute("href").substr(1)}).filter(function(e){return e!==n}).forEach(function(t){return e.classList.add("bf2-post-to-"+t)})}),f.watch(".user-card .display-name",function(e){(0,a["default"])(e,".user-card").dataset.userName=e.getAttribute("href").substr(1)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(null===e)return null;var r=n?e:e.parentNode;return s&&r?r.closest(t):r&&r.nodeType==Node.ELEMENT_NODE?(0,a["default"])(r,t)?r:o(r,t):null}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(7),a=r(i),s=!!Element.prototype.closest},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){n.push(e),e(location)};var n=[],r=history.pushState.bind(history),o=history.replaceState.bind(history);history.pushState=function(e,t,o){r(e,t,o),n.forEach(function(e){return e(location)})},history.replaceState=function(e,t,r){o(e,t,r),n.forEach(function(e){return e(location)})},window.addEventListener("popstate",function(){return n.forEach(function(e){return e(location)})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=(0,c["default"])("a","configure settings"),n=(0,c["default"])("a","show access token");e.parentNode.insertBefore((0,c["default"])("p.bg-success.bf2-green","BetterFeed enabled ("+b+") | ",(0,c["default"])("i.fa.fa-cog")," ",t," | ",(0,c["default"])("i.fa.fa-exclamation-triangle")," ",n),e),t.addEventListener("click",function(){return i()}),n.addEventListener("click",function(){return a()})}function i(){var e=f["default"]+"/src/html/settings.html?origin="+encodeURIComponent(location.origin);return/iPhone|iPad/.test(navigator.userAgent)?void window.open(e,"_blank"):void new p["default"]("bf2-settings-lightbox").showContent((0,c["default"])("iframe",{src:e,frameborder:"0"}))}function a(){var e='\n        <p>\n            Your access token is:\n        </p>\n        <p class="bf2-access-token">\n            '+(0,v["default"])(m.authToken)+'\n        </p>\n        <p>\n            <strong>WARNING:</strong> Keep your token secure at all times and do not share it with services you do not fully trust.\n            They will be able to perform ANY operation on your behalf including changing your password and\n            <strong>locking you out of your account</strong>.\n        </p>\n        <p>\n            Giving your token to third party services provides them with FULL and UNLIMITED access to your account.\n            You can not change the token, you cannot revert access once you give it out.\n        </p>\n        <p>\n            If you suspect your token is being abused, contact <a href="mailto:freefeed.net@gmail.com">freefeed.net@gmail.com</a> <strong>immediately</strong>.\n        </p>\n        <p style="text-align: center">\n            <button>Close</button>\n        </p>\n    ',t=new p["default"]("bf2-access-token-lightbox");t.showContent(e),t.contentEl.querySelector("button").addEventListener("click",function(){return t.hide()})}var s=n(5),u=n(13),c=r(u),l=n(24),f=r(l),d=n(25),p=r(d),m=n(8),h=n(16),v=r(h),b=localStorage["bf2-version"]||"v0.0.0",y=(0,s.registerModule)("settings-link",!0,!0);y.watch(".sidebar",function(e){if(!e.querySelector(".bf2-sidebar-box")){var t=(0,c["default"])("a","BetterFeed settings"),n=(0,c["default"])(".bf2-sidebar-box.box",(0,c["default"])(".box-header-groups","Add-ons"),(0,c["default"])(".box-body",(0,c["default"])("ul",(0,c["default"])("li",t))),(0,c["default"])(".box-footer",b));e.insertBefore(n,null),t.addEventListener("click",function(){return i()})}}),"__BetterFeedOnSite"in window?y.watch(".bf2-settings-description",function(e){document.body.querySelector(".bf2-green")||o(e)}):y.watch(".box-body > form > h3",function(e){if(!document.body.querySelector(".bf2-green")&&"Change password"===e.textContent){var t=e.parentNode,n=(0,c["default"])("p.bf2-settings-description","BetterFeed is an add-on that improves or dramatically alters stock interface of FreeFeed (",(0,c["default"])("a",{href:"https://github.com/davidmz/BetterFeed2",target:"_blank"},"details"),"). "),r=(0,c["default"])("div",(0,c["default"])("h3.bf2-settings-header","Add-ons"),n,(0,c["default"])("hr"));t.parentNode.insertBefore(r,t),o(n)}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="https://cdn.rawgit.com/davidmz/BetterFeed2/"+localStorage["bf2-version"];if(document.currentScript){var r=document.currentScript.src.split("/");n=r.slice(0,r.length-2).join("/")}t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(13),s=r(a),u=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?"":arguments[0],r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];o(this,e),
this._container=(0,s["default"])(".bf2-lightbox-container"),""!==n&&this._container.classList.add(n);var i=this._container.appendChild((0,s["default"])(".bf2-lightbox-shadow"));this.contentEl=i.appendChild((0,s["default"])(".bf2-lightbox-content")),i.addEventListener("click",function(e){e.target!==i||r||t.hide()})}return i(e,[{key:"showContent",value:function(e){"string"==typeof e?this.contentEl.innerHTML=e:(this.contentEl.innerHTML="",this.contentEl.appendChild(e)),document.body.appendChild(this._container)}},{key:"hide",value:function(){this.contentEl.innerHTML="",this._container.parentNode.removeChild(this._container)}}]),e}();t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e.title=(t?"Show":"Hide")+" user’s posts "+(t?"in":"from")+" home feed",e.innerHTML=(0,h["default"])((t?"Show":"Hide")+" posts")}function i(e){return".bf2-homepage .bf2-post-from-"+e}function a(e){return".bf2-homepage .bf2-post-to-"+e}var s=n(5),u=n(13),c=r(u),l=n(9),f=r(l),d=n(21),p=r(d),m=n(16),h=r(m),v=(0,s.registerModule)("hide-posts"),b=null;v.init(function(e){b=document.head.appendChild((0,c["default"])("style.bf2-hide-posts")).sheet,e.hidePostsFrom.forEach(function(e){b.insertRule(i(e)+" { display: none; }",0),b.insertRule(a(e)+" { display: none; }",0)})}),v.watch(".user-card-actions",function(e,t){var n=(0,p["default"])(e,".user-card").dataset.userName,r=t.hidePostsFrom.has(n),s=(0,c["default"])("a");o(s,r),e.appendChild((0,c["default"])("span"," - ",s)),s.addEventListener("click",function(){r?(Array.prototype.slice.call(b.rules).forEach(function(e,t){e.selectorText!==i(n)&&e.selectorText!==a(n)||b.deleteRule(t)}),t.hidePostsFrom["delete"](n)):(b.insertRule(i(n)+" { display: none; }",0),b.insertRule(a(n)+" { display: none; }",0),t.hidePostsFrom.add(n)),r=!r,o(s,r),f["default"].ready.then(function(e){return e.saveProps(t)})})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}var s=i(['<a href="/','" class="bf2-user-link">',"</a>"],['<a href="/','" class="bf2-user-link">',"</a>"]),u=n(5),c=n(6),l=o(c),f=n(10),d=r(f),p=n(15),m=n(9),h=o(m),v=(0,u.registerModule)("posts-via");v.watch(".timeline-post:not(.bf2-post-via)",function(){var e=a(regeneratorRuntime.mark(function t(e){var n,r,o,i,a,u,c,f,m,v,b,y,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("/"===location.pathname){t.next=2;break}return t.abrupt("return");case 2:return e.classList.add("bf2-post-via"),t.next=5,h["default"].ready;case 5:if(n=t.sent,r=e.dataset.postId,o=e.dataset.postAuthor,i=(0,l["default"])(e,".post-recipient").map(function(e){return e.getAttribute("href").substr(1)}).filter(function(e){return e!==o}),!(n.whoIs(o)&(h["default"].ME|h["default"].FRIEND))){t.next=11;break}return t.abrupt("return");case 11:if(!i.some(function(e){return!!(n.whoIs(e)&h["default"].FRIEND)})){t.next=13;break}return t.abrupt("return");case 13:if(e.classList.add("bf2-alien-post"),a=(0,l["default"])(e,".likes a"),u=a.some(function(e){return!e.hasAttribute("href")}),c=a.filter(function(e){return e.hasAttribute("href")}).map(function(e){return e.getAttribute("href").substr(1)}).filter(function(e){return null!==e&&!!(n.whoIs(e)&(h["default"].ME|h["default"].FRIEND))}),f=(0,l["default"])(e,".comment-body > .user-name-wrapper a").map(function(e){return e.getAttribute("href").substr(1)}).filter(function(e){return!!(n.whoIs(e)&(h["default"].ME|h["default"].FRIEND))}),!u||0!=c.length||0!=f.length){t.next=20;break}return t.delegateYield(regeneratorRuntime.mark(function w(){var e,t,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d.get("/v1/posts/"+r+"?maxLikes=all&maxComments=2");case 2:e=i.sent,t=e.posts.likes,o=e.users,c=t.map(function(e){var t=o.filter(function(t){return t.id=e}).map(function(e){return e.username});return t.length>0?t[1]:null}).filter(function(e){return null!==e&&!!(n.whoIs(e)&(h["default"].ME|h["default"].FRIEND))}).filter(function(e,t,n){return n.indexOf(e)===t});case 6:case"end":return i.stop()}},w,void 0)})(),"t0",20);case 20:m=!1,v=!1,b=[],y=0==c.length&&0==f.length,y||(m=c.some(function(e){return e==n.me}),v=f.some(function(e){return e==n.me}),b=c.concat(f).filter(function(e){return e!==n.me}).filter(function(e,t,n){return n.indexOf(e)===t})),g=[],y?g.push("somebody"):(v?g.push("your comment"):m&&g.push("your like"),b.forEach(function(e){return g.push((0,p.html)(s,e,e))})),g.length>1&&(g[g.length-2]=g[g.length-2]+" and "+g[g.length-1],g.length--),e.querySelector(".post-header").insertAdjacentHTML("beforeend",'<span class="bf2-via-names"> via '+g.join(", ")+"</span>");case 29:case"end":return t.stop()}},t,void 0)}));return function(t){return e.apply(this,arguments)}}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(5),i=n(13),a=r(i),s=n(9),u=r(s),c=(0,o.registerModule)("hide-aliens");c.required("posts-via");var l=(0,a["default"])("input",{type:"checkbox"}),f=(0,a["default"])("span","0"),d=(0,a["default"])("label.bf2-hide-aliens-cont",l," hide non-friends posts (",f,")");c.init(function(e){setInterval(function(){return f.innerHTML=document.body.querySelectorAll(".bf2-alien-post").length},500),l.checked=e.hideAliens,document.body.classList.toggle("bf2-hide-aliens",e.hideAliens),l.addEventListener("click",function(){document.body.classList.toggle("bf2-hide-aliens",l.checked),e.hideAliens=l.checked,u["default"].ready.then(function(t){return t.saveProps(e)})})}),c.watch(".box-header-timeline",function(e){return e.appendChild(d)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.addEventListener("load",function(){var e,o,i=new Uint8Array(r.response),a=i.length,s=0;if(71!==i[0]||73!==i[1]||70!==i[2]||56!==i[3])return void n("Not a gif file");for(e=0,o=a-3;o>e&&2>s;++e)if(33===i[e+1]&&249===i[e+2]){var u=i[e+3],c=e+4+u;a>c+1&&0===i[c]&&(44===i[c+1]||33===i[c+1])&&s++}t(s>1)}),r.send()})}function a(e){if(!e.src.match(/^data:/)){var t=document.createElement("canvas"),n=t.width=e.width,r=t.height=e.height,o=new Image;o.crossOrigin="anonymous",o.onload=function(){t.getContext("2d").drawImage(o,0,0,n,r),e.src=t.toDataURL()},o.src=e.src}}var s=function(){var e=o(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.match(/([\w-]+)\.gif$/)[1],t.next=4,d.getItem(n);case 4:if(r=t.sent,null!==r){t.next=10;break}return t.next=8,i(e);case 8:r=t.sent,d.setItem(n,r);case 10:return t.abrupt("return",r);case 13:return t.prev=13,t.t0=t["catch"](0),console.warn("Gif analyze problem ("+e+"): "+t.t0),t.abrupt("return",!1);case 17:case"end":return t.stop()}},t,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),u=n(30),c=r(u),l=n(5),f=(0,l.registerModule)("ani-gifs"),d=c["default"].createInstance({name:"BF2_aniGifs"});f.watch(".image-attachments img[src$='.gif'][src*='/attachments/']:not(.bf2-gif)",function(){var e=o(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.classList.add("bf2-gif"),t.next=3,s(e.src);case 3:if(!t.sent){t.next=6;break}e.parentNode.classList.add("bf2-animated-gif"),a(e);case 6:case"end":return t.stop()}},t,void 0)}));return function(t){return e.apply(this,arguments)}}())},function(e,t,n){(function(t,n){/*!
	    localForage -- Offline Storage, Improved
	    Version 1.4.0
	    https://mozilla.github.io/localForage
	    (c) 2013-2015 Mozilla, Apache License 2.0
	*/
!function(){var e,r,o,i;!function(){var t={},n={};e=function(e,n,r){t[e]={deps:n,callback:r}},i=o=r=function(e){function o(t){if("."!==t.charAt(0))return t;for(var n=t.split("/"),r=e.split("/").slice(0,-1),o=0,i=n.length;i>o;o++){var a=n[o];if(".."===a)r.pop();else{if("."===a)continue;r.push(a)}}return r.join("/")}if(i._eak_seen=t,n[e])return n[e];if(n[e]={},!t[e])throw new Error("Could not find module "+e);for(var a,s=t[e],u=s.deps,c=s.callback,l=[],f=0,d=u.length;d>f;f++)"exports"===u[f]?l.push(a={}):l.push(r(o(u[f])));var p=c.apply(this,l);return n[e]=a||p}}(),e("promise/all",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to all.");return new t(function(t,n){function r(e){return function(t){i(e,t)}}function i(e,n){s[e]=n,0===--u&&t(s)}var a,s=[],u=e.length;0===u&&t([]);for(var c=0;c<e.length;c++)a=e[c],a&&o(a.then)?a.then(r(c),n):i(c,a)})}var r=e.isArray,o=e.isFunction;t.all=n}),e("promise/asap",["exports"],function(e){"use strict";function r(){return function(){n.nextTick(a)}}function o(){var e=0,t=new l(a),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function i(){return function(){f.setTimeout(a,1)}}function a(){for(var e=0;e<d.length;e++){var t=d[e],n=t[0],r=t[1];n(r)}d=[]}function s(e,t){var n=d.push([e,t]);1===n&&u()}var u,c="undefined"!=typeof window?window:{},l=c.MutationObserver||c.WebKitMutationObserver,f="undefined"!=typeof t?t:void 0===this?window:this,d=[];u="undefined"!=typeof n&&"[object process]"==={}.toString.call(n)?r():l?o():i(),e.asap=s}),e("promise/config",["exports"],function(e){"use strict";function t(e,t){return 2!==arguments.length?n[e]:void(n[e]=t)}var n={instrument:!1};e.config=n,e.configure=t}),e("promise/polyfill",["./promise","./utils","exports"],function(e,n,r){"use strict";function o(){var e;e="undefined"!=typeof t?t:"undefined"!=typeof window&&window.document?window:self;var n="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),a(t)}();n||(e.Promise=i)}var i=e.Promise,a=n.isFunction;r.polyfill=o}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,n,r,o,i,a,s){"use strict";function u(e){if(!x(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof u))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(e,this)}function c(e,t){function n(e){m(t,e)}function r(e){v(t,e)}try{e(n,r)}catch(o){r(o)}}function l(e,t,n,r){var o,i,a,s,u=x(n);if(u)try{o=n(r),a=!0}catch(c){s=!0,i=c}else o=r,a=!0;p(t,o)||(u&&a?m(t,o):s?v(t,i):e===M?m(t,o):e===P&&v(t,o))}function f(e,t,n,r){var o=e._subscribers,i=o.length;o[i]=t,o[i+M]=n,o[i+P]=r}function d(e,t){for(var n,r,o=e._subscribers,i=e._detail,a=0;a<o.length;a+=3)n=o[a],r=o[a+t],l(t,n,r,i);e._subscribers=null}function p(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(w(t)&&(r=t.then,x(r)))return r.call(t,function(r){return n?!0:(n=!0,void(t!==r?m(e,r):h(e,r)))},function(t){return n?!0:(n=!0,void v(e,t))}),!0}catch(o){return n?!0:(v(e,o),!0)}return!1}function m(e,t){e===t?h(e,t):p(e,t)||h(e,t)}function h(e,t){e._state===T&&(e._state=C,e._detail=t,g.async(b,e))}function v(e,t){e._state===T&&(e._state=C,e._detail=t,g.async(y,e))}function b(e){d(e,e._state=M)}function y(e){d(e,e._state=P)}var g=e.config,w=(e.configure,t.objectOrFunction),x=t.isFunction,_=(t.now,n.all),k=r.race,S=o.resolve,E=i.reject,I=a.asap;g.async=I;var T=void 0,C=0,M=1,P=2;u.prototype={constructor:u,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,r=new this.constructor(function(){});if(this._state){var o=arguments;g.async(function(){l(n._state,r,o[n._state-1],n._detail)})}else f(this,r,e,t);return r},"catch":function(e){return this.then(null,e)}},u.all=_,u.race=k,u.resolve=S,u.reject=E,s.Promise=u}),e("promise/race",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to race.");return new t(function(t,n){for(var r,o=0;o<e.length;o++)r=e[o],r&&"function"==typeof r.then?r.then(t,n):t(r)})}var r=e.isArray;t.race=n}),e("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,n){n(e)})}e.reject=t}),e("promise/resolve",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.resolve=t}),e("promise/utils",["exports"],function(e){"use strict";function t(e){return n(e)||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}var o=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=n,e.isArray=r,e.now=o}),r("promise/polyfill").polyfill()}(),function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(e){function t(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function o(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(d(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function i(e){for(var t in s)if(s.hasOwnProperty(t)&&s[t]===e)return!0;return!1}var a={},s={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},u=[s.INDEXEDDB,s.WEBSQL,s.LOCALSTORAGE],c=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],l={description:"",driver:u.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},f=function(e){var t={};return t[s.INDEXEDDB]=!!function(){try{var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB;return"undefined"!=typeof e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent)?!1:t&&"function"==typeof t.open&&"undefined"!=typeof e.IDBKeyRange}catch(n){return!1}}(),t[s.WEBSQL]=!!function(){try{return e.openDatabase}catch(t){return!1}}(),t[s.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(t){return!1}}(),t}(e),d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=function(){function e(t){r(this,e),this.INDEXEDDB=s.INDEXEDDB,this.LOCALSTORAGE=s.LOCALSTORAGE,this.WEBSQL=s.WEBSQL,this._defaultConfig=o({},l),this._config=o({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new Promise(function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),s=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(o);if(i(e._driver))return void n(s);for(var u=c.concat("_initStorage"),l=0;l<u.length;l++){var d=u[l];if(!d||!e[d]||"function"!=typeof e[d])return void n(o)}var p=Promise.resolve(!0);"_support"in e&&(p=e._support&&"function"==typeof e._support?e._support():Promise.resolve(!!e._support)),p.then(function(n){f[r]=n,a[r]=e,t()},n)}catch(m){n(m)}});return r.then(t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var o=this,s=function(){if(i(e))switch(e){case o.INDEXEDDB:return new Promise(function(e,t){e(n(1))});case o.LOCALSTORAGE:return new Promise(function(e,t){e(n(2))});case o.WEBSQL:return new Promise(function(e,t){e(n(4))})}else if(a[e])return Promise.resolve(a[e]);return Promise.reject(new Error("Driver not found."))}();return s.then(t,r),s},e.prototype.getSerializer=function(e){var t=new Promise(function(e,t){e(n(3))});return e&&"function"==typeof e&&t.then(function(t){e(t)}),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return n.then(e,e),n},e.prototype.setDriver=function(e,t,n){function r(){i._config.driver=i.driver()}function o(e){return function(){function t(){for(;n<e.length;){var o=e[n];return n++,i._dbInfo=null,i._ready=null,i.getDriver(o).then(function(e){return i._extend(e),r(),i._ready=i._initStorage(i._config),i._ready})["catch"](t)}r();var a=new Error("No available storage method found.");return i._driverSet=Promise.reject(a),i._driverSet}var n=0;return t()}}var i=this;d(e)||(e=[e]);var a=this._getSupportedDrivers(e),s=null!==this._driverSet?this._driverSet["catch"](function(){return Promise.resolve()}):Promise.resolve();return this._driverSet=s.then(function(){var e=a[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,r(),i._wrapLibraryMethodsWithReady(),i._initDriver=o(a)})})["catch"](function(){r();var e=new Error("No available storage method found.");return i._driverSet=Promise.reject(e),i._driverSet}),this._driverSet.then(t,n),this._driverSet},e.prototype.supports=function(e){return!!f[e]},e.prototype._extend=function(e){o(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;r>n;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<c.length;e++)t(this,c[e])},e.prototype.createInstance=function(t){return new e(t)},e}();return new p}("undefined"!=typeof window?window:self);t["default"]=o,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0;var n=function(e){function t(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(r){if("TypeError"!==r.name)throw r;for(var o=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,i=new o,a=0;a<t.length;a+=1)i.append(t[a]);return i.getBlob(n.type)}}function n(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;t>o;o++)r[o]=e.charCodeAt(o);return n}function r(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.withCredentials=!0,r.responseType="arraybuffer",r.onreadystatechange=function(){return 4===r.readyState?200===r.status?t({response:r.response,type:r.getResponseHeader("Content-Type")}):void n({status:r.status,response:r.response}):void 0},r.send()})}function o(e){return new Promise(function(n,o){var i=t([""],{type:"image/png"}),a=e.transaction([M],"readwrite");a.objectStore(M).put(i,"key"),a.oncomplete=function(){var t=e.transaction([M],"readwrite"),i=t.objectStore(M).get("key");i.onerror=o,i.onsuccess=function(e){var t=e.target.result,o=URL.createObjectURL(t);r(o).then(function(e){n(!(!e||"image/png"!==e.type))},function(){n(!1)}).then(function(){URL.revokeObjectURL(o)})}},a.onerror=a.onabort=o})["catch"](function(){return!1})}function i(e){return"boolean"==typeof T?Promise.resolve(T):o(e).then(function(e){return T=e})}function a(e){return new Promise(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function s(e){var r=n(atob(e.data));return t([r],{type:e.type})}function u(e){return e&&e.__local_forage_encoded_blob}function c(e){var t=this,n=t._initReady().then(function(){var e=C[t._dbInfo.name];return e&&e.dbReady?e.dbReady:void 0});return n.then(e,e),n}function l(e){var t=C[e.name],n={};n.promise=new Promise(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function f(e){var t=C[e.name],n=t.deferredOperations.pop();n&&n.resolve()}function d(e){function t(){return Promise.resolve()}var n=this,r={db:null};if(e)for(var o in e)r[o]=e[o];C||(C={});var i=C[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},C[r.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=c);for(var a=[],s=0;s<i.forages.length;s++){var u=i.forages[s];u!==n&&a.push(u._initReady()["catch"](t))}var l=i.forages.slice(0);return Promise.all(a).then(function(){return r.db=i.db,p(r)}).then(function(e){return r.db=e,v(r,n._defaultConfig.version)?m(r):e}).then(function(e){r.db=i.db=e,n._dbInfo=r;for(var t=0;t<l.length;t++){var o=l[t];o!==n&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}})}function p(e){return h(e,!1)}function m(e){return h(e,!0)}function h(t,n){return new Promise(function(r,o){if(t.db){if(!n)return r(t.db);l(t),t.db.close()}var i=[t.name];n&&i.push(t.version);var a=I.open.apply(I,i);n&&(a.onupgradeneeded=function(n){var r=a.result;try{r.createObjectStore(t.storeName),n.oldVersion<=1&&r.createObjectStore(M)}catch(o){if("ConstraintError"!==o.name)throw o;e.console.warn('The database "'+t.name+'" has been upgraded from version '+n.oldVersion+" to version "+n.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(){o(a.error)},a.onsuccess=function(){r(a.result),f(t)}})}function v(t,n){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),o=t.version<t.db.version,i=t.version>t.db.version;if(o&&(t.version!==n&&e.console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||r){if(r){var a=t.db.version+1;a>t.version&&(t.version=a)}return!0}return!1}function b(t,n){var r=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new Promise(function(e,n){r.ready().then(function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),u(t)&&(t=s(t)),e(t)},a.onerror=function(){n(a.error)}})["catch"](n)});return E(o,n),o}function y(e,t){var n=this,r=new Promise(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.openCursor(),c=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;u(r)&&(r=s(r));var o=e(r,n.key,c++);void 0!==o?t(o):n["continue"]()}else t()},a.onerror=function(){r(a.error)}})["catch"](r)});return E(r,t),r}function g(t,n,r){var o=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var s=new Promise(function(e,r){var s;o.ready().then(function(){return s=o._dbInfo,n instanceof Blob?i(s.db).then(function(e){return e?n:a(n)}):n}).then(function(n){var o=s.db.transaction(s.storeName,"readwrite"),i=o.objectStore(s.storeName);null===n&&(n=void 0),o.oncomplete=function(){void 0===n&&(n=null),e(n)},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;r(e)};var a=i.put(n,t)})["catch"](r)});return E(s,r),s}function w(t,n){var r=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new Promise(function(e,n){r.ready().then(function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName),s=a["delete"](t);i.oncomplete=function(){e()},i.onerror=function(){n(s.error)},i.onabort=function(){var e=s.error?s.error:s.transaction.error;n(e)}})["catch"](n)});return E(o,n),o}function x(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),i=o.objectStore(r.storeName),a=i.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}})["catch"](n)});return E(n,e),n}function _(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}})["catch"](n)});return E(n,e),n}function k(e,t){var n=this,r=new Promise(function(t,r){return 0>e?void t(null):void n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,s=i.openCursor();s.onsuccess=function(){var n=s.result;return n?void(0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))):void t(null)},s.onerror=function(){r(s.error)}})["catch"](r)});return E(r,t),r}function S(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),a=[];i.onsuccess=function(){var t=i.result;return t?(a.push(t.key),void t["continue"]()):void e(a)},i.onerror=function(){n(i.error)}})["catch"](n)});return E(n,e),n}function E(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var I=I||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB;if(I){var T,C,M="local-forage-detect-blob-support",P={_driver:"asyncStorage",_initStorage:d,iterate:y,getItem:b,setItem:g,removeItem:w,clear:x,length:_,key:k,keys:S};return P}}("undefined"!=typeof window?window:self);t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){function t(e){var t=this,r={};if(e)for(var o in e)r[o]=e[o];return r.keyPrefix=r.name+"/",r.storeName!==t._defaultConfig.storeName&&(r.keyPrefix+=r.storeName+"/"),t._dbInfo=r,new Promise(function(e,t){e(n(3))}).then(function(e){return r.serializer=e,Promise.resolve()})}function r(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=d.length-1;n>=0;n--){var r=d.key(n);0===r.indexOf(e)&&d.removeItem(r)}});return f(n,e),n}function o(t,n){var r=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=r.ready().then(function(){var e=r._dbInfo,n=d.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n});return f(o,n),o}function i(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=d.length,a=1,s=0;i>s;s++){var u=d.key(s);if(0===u.indexOf(r)){var c=d.getItem(u);if(c&&(c=t.serializer.deserialize(c)),c=e(c,u.substring(o),a++),void 0!==c)return c}}});return f(r,t),r}function a(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=d.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return f(r,t),r}function s(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=d.length,r=[],o=0;n>o;o++)0===d.key(o).indexOf(e.keyPrefix)&&r.push(d.key(o).substring(e.keyPrefix.length));return r});return f(n,e),n}function u(e){var t=this,n=t.keys().then(function(e){return e.length});return f(n,e),n}function c(t,n){var r=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=r.ready().then(function(){var e=r._dbInfo;d.removeItem(e.keyPrefix+t)});return f(o,n),o}function l(t,n,r){var o=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=o.ready().then(function(){void 0===n&&(n=null);var e=n;return new Promise(function(r,i){var a=o._dbInfo;a.serializer.serialize(n,function(n,o){if(o)i(o);else try{d.setItem(a.keyPrefix+t,n),r(e)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}})})});return f(i,r),i}function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var d=null;try{if(!(e.localStorage&&"setItem"in e.localStorage))return;d=e.localStorage}catch(p){return}var m={_driver:"localStorageWrapper",_initStorage:t,iterate:i,getItem:o,setItem:l,removeItem:c,clear:r,length:u,key:a,keys:s};return m}("undefined"!=typeof window?window:self);t["default"]=r,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0;var n=function(e){function t(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(r){if("TypeError"!==r.name)throw r;for(var o=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,i=new o,a=0;a<t.length;a+=1)i.append(t[a]);return i.getBlob(n.type)}}function n(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,o=c;e instanceof ArrayBuffer?(r=e,o+=f):(r=e.buffer,"[object Int8Array]"===n?o+=p:"[object Uint8Array]"===n?o+=m:"[object Uint8ClampedArray]"===n?o+=h:"[object Int16Array]"===n?o+=v:"[object Uint16Array]"===n?o+=y:"[object Int32Array]"===n?o+=b:"[object Uint32Array]"===n?o+=g:"[object Float32Array]"===n?o+=w:"[object Float64Array]"===n?o+=x:t(new Error("Failed to get type for BinaryArray"))),t(o+i(r))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=s+e.type+"~"+i(this.result);t(c+d+n)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(u){console.error("Couldn't convert value into a JSON string: ",e),t(null,u)}}function r(e){if(e.substring(0,l)!==c)return JSON.parse(e);var n,r=e.substring(_),i=e.substring(l,_);if(i===d&&u.test(r)){var a=r.match(u);n=a[1],r=r.substring(a[0].length)}var s=o(r);switch(i){case f:return s;case d:return t([s],{type:n});case p:return new Int8Array(s);case m:return new Uint8Array(s);case h:return new Uint8ClampedArray(s);case v:return new Int16Array(s);case y:return new Uint16Array(s);case b:return new Int32Array(s);case g:return new Uint32Array(s);case w:return new Float32Array(s);case x:return new Float64Array(s);default:throw new Error("Unkown type: "+i)}}function o(e){var t,n,r,o,i,s=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),f=new Uint8Array(l);for(t=0;u>t;t+=4)n=a.indexOf(e[t]),r=a.indexOf(e[t+1]),o=a.indexOf(e[t+2]),i=a.indexOf(e[t+3]),f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return l}function i(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=a[n[t]>>2],r+=a[(3&n[t])<<4|n[t+1]>>4],r+=a[(15&n[t+1])<<2|n[t+2]>>6],r+=a[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="~~local_forage_type~",u=/^~~local_forage_type~([^~]+)~/,c="__lfsc__:",l=c.length,f="arbf",d="blob",p="si08",m="ui08",h="uic8",v="si16",b="si32",y="ur16",g="ui32",w="fl32",x="fl64",_=l+f.length,k={serialize:n,deserialize:r,stringToBuffer:o,bufferToString:i};return k}("undefined"!=typeof window?window:self);t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){function t(e){var t=this,r={db:null};if(e)for(var o in e)r[o]="string"!=typeof e[o]?e[o].toString():e[o];var i=new Promise(function(e,n){try{r.db=d(r.name,String(r.version),r.description,r.size)}catch(o){return n(o)}r.db.transaction(function(o){o.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=r,e()},function(e,t){n(t)})})});return new Promise(function(e,t){e(n(3))}).then(function(e){return r.serializer=e,i})}function r(t,n){var r=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new Promise(function(e,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){r.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),e(r)},function(e,t){n(t)})})})["catch"](n)});return f(o,n),o}function o(e,t){var n=this,r=new Promise(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var i=r.rows,a=i.length,s=0;a>s;s++){var u=i.item(s),c=u.value;if(c&&(c=o.serializer.deserialize(c)),c=e(c,u.key,s+1),void 0!==c)return void t(c)}t()},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function i(t,n,r){var o=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(e,r){o.ready().then(function(){void 0===n&&(n=null);var i=n,a=o._dbInfo;a.serializer.serialize(n,function(n,o){o?r(o):a.db.transaction(function(o){o.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[t,n],function(){e(i)},function(e,t){r(t)})},function(e){e.code===e.QUOTA_ERR&&r(e)})})})["catch"](r)});return f(i,r),i}function a(t,n){var r=this;"string"!=typeof t&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new Promise(function(e,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){r.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[t],function(){e()},function(e,t){n(t)})})})["catch"](n)});return f(o,n),o}function s(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function u(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function c(e,t){var n=this,r=new Promise(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function l(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var d=e.openDatabase;if(d){var p={_driver:"webSQLStorage",_initStorage:t,iterate:o,getItem:r,setItem:i,removeItem:a,clear:s,length:u,key:c,keys:l};return p}}("undefined"!=typeof window?window:self);t["default"]=r,e.exports=t["default"]}])})}).call(t,function(){return this}(),n(31))},function(e,t){function n(){c=!1,a.length?u=a.concat(u):l=-1,u.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,s=e.exports={},u=[],c=!1,l=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e){var t=parseInt(e.dataset.lcCount),n=parseInt(e.dataset.lcMy),r=(0,_["default"])((0,w["default"])(e,".comments"),".bf2-likecomm-cont").reduce(function(e,t){var n=d(e,2),r=n[0],o=n[1];return[r+parseInt(t.dataset.lcCount),o+parseInt(t.dataset.lcMy)]},[0,0]),o=d(r,2),i=o[0],a=o[1];t-=i,n-=a,e.querySelector(".bf2-likecomm-count").innerHTML=t.toString(10),e.classList.toggle("bf2-likecomm-liked",t>0),e.classList.toggle("bf2-likecomm-with-my",n>0),e.querySelector(".bf2-likecomm-count-label").innerHTML=1==t?" like":" likes"}function a(){(0,_["default"])(document.body,".bf2-likecomm-cont, .bf2-likecomm-folded",function(e){var t=e.dataset;t.commId?s(t.commId):t.postId&&u(t.postId)})}function s(e){A.push(e),A.length>=O?c():(D&&clearTimeout(D),D=setTimeout(c,R))}function u(e){L.push(e),L.length>=O?c():(D&&clearTimeout(D),D=setTimeout(c,R))}function c(){A.length>0&&(M.allLikes(A),A.length=0),L.length>0&&(M.allPostsLikes(L),L.length=0),D&&(clearTimeout(D),D=null)}function l(e,t){N.innerHTML="",N.appendChild(t),e.appendChild(N)}function f(){N.parentNode&&N.parentNode.removeChild(N)}var d=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},m=n(5),h=n(33),v=r(h),b=n(9),y=r(b),g=n(21),w=r(g),x=n(6),_=r(x),k=n(13),S=r(k),E=n(7),I=r(E);n(35);var T=(0,m.registerModule)("likecomm"),C=(0,m.registerModule)("likecomm-auth",!1),M=new v["default"];T.init(function(e){M.anonymous=!e.isModuleEnabled(C),!function(){var e=!0;M.onConnect(function(){e?e=!1:a()}),M.watch()}(),document.body.classList.toggle("bf2-likecomm-anon",M.anonymous),document.body.addEventListener("click",function(e){if(!M.anonymous&&(0,I["default"])(e.target,".bf2-likecomm-act")){var t=(0,w["default"])(e.target,".bf2-likecomm-cont"),n=(0,w["default"])(t,".comment").dataset.commId,r=(0,w["default"])(t,".post").dataset.postId,i=t.querySelector(".bf2-likecomm-count"),a=parseInt(i.innerHTML);if(!n)return;t.classList.contains("bf2-likecomm-with-my")?(M.unlike(n),i.innerHTML=(a-1).toString(10),t.classList.toggle("bf2-likecomm-liked",a>1),t.classList.remove("bf2-likecomm-with-my")):(M.like(n,r),i.innerHTML=(a+1).toString(10),t.classList.add("bf2-likecomm-liked"),t.classList.add("bf2-likecomm-with-my"))}if((0,I["default"])(e.target,".bf2-likecomm-count")){var s=function(){var t=(0,w["default"])(e.target,".comment").dataset.commId;if(!t)return{v:void 0};var n=(0,S["default"])("",(0,S["default"])("em","Loading…"));l((0,w["default"])(e.target,".bf2-likecomm-cont"),n),M.likes(t).then(function(){var e=o(regeneratorRuntime.mark(function t(e){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.length){t.next=3;break}return n.innerHTML="<em>Not available.</em>",t.abrupt("return");case 3:return n.innerHTML="",t.next=6,y["default"].ready;case 6:r=t.sent,o=e.some(function(e){return e===r.me}),e.sort(),e=e.filter(function(e){return e!==r.me}),o&&e.unshift(r.me),e.forEach(function(e){n.appendChild((0,S["default"])("",(0,S["default"])("a.bf2-user-link",{href:"/"+e},e)))});case 12:case"end":return t.stop()}},t,void 0)}));return function(t){return e.apply(this,arguments)}}())}();if("object"===("undefined"==typeof s?"undefined":p(s)))return s.v}(0,w["default"])(e.target,".bf2-likecomm-cont")||f()})}),T.watch(".comments .comment .comment-icon",function(e){if(e.id){var t=(0,w["default"])(e,".comment");
if(!t.querySelector("textarea")){var n=e.id.match(/^comment-(.+)/)[1];t.dataset.commId=n,s(n),t.appendChild((0,S["default"])(".bf2-likecomm-shift",(0,S["default"])(".bf2-likecomm-cont",{id:"likecomm-"+n,"data-lc-updated":"0","data-lc-count":"0","data-lc-my":"0","data-comm-id":n},(0,S["default"])("span.bf2-likecomm-count","0"),(0,S["default"])("i.fa.fa-heart.bf2-likecomm-act"))))}}}),T.watch(".comments .comment .more-comments-link",function(e){var t=(0,w["default"])(e,".post").dataset.postId;u(t),e.appendChild((0,S["default"])(".bf2-likecomm-folded",{id:"lc-post-"+t,"data-lc-updated":"0","data-lc-count":"0","data-lc-my":"0","data-post-id":t}," with ",(0,S["default"])("span.bf2-likecomm-count","0"),(0,S["default"])("i.fa.fa-heart"),(0,S["default"])("span.bf2-likecomm-count-label"," likes")))});var P=0;M.onLike(function(e){var t=e.id,n=e.post_id,r=e.likes,o=e.my_likes,a=e.updated,s=t?document.getElementById("likecomm-"+t):null,c=n?document.getElementById("lc-post-"+n):null;if(a>P&&(P=a),t){if(s){var l=s.dataset;parseInt(l.lcUpdated)<a&&(s.querySelector(".bf2-likecomm-count").innerHTML=r.toString(10),s.classList.toggle("bf2-likecomm-liked",r>0),s.classList.toggle("bf2-likecomm-with-my",o>0),l.lcUpdated=a.toString(10),l.lcCount=r.toString(10),l.lcMy=o.toString(10))}c&&(parseInt(c.dataset.lcUpdated)<a?u(n):i(c))}else c&&parseInt(c.dataset.lcUpdated)<a&&(c.dataset.lcCount=r,c.dataset.lcMy=o,c.dataset.lcUpdated=a.toString(10),i(c))});var O=50,R=500,A=[],L=[],D=null,N=(0,S["default"])(".bf2-likecomm-list")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=n(34),c=r(u),l="https://davidmz.me/frfrfr/likecomm",f="wss://davidmz.me/frfrfr/likecomm/watch",d=function(){function e(){i(this,e),this.anonymous=!0,this.listeners=[],this.connectListeners=[]}return a(e,[{key:"like",value:function(e,t){return this.anonymous?Promise.reject("Attempt to like in anonymous mode"):this.req(l+"/like?comm_id="+encodeURIComponent(e)+"&post_id="+encodeURIComponent(t),{method:"POST"})}},{key:"unlike",value:function(e){return this.anonymous?Promise.reject("Attempt to unlike in anonymous mode"):this.req(l+"/unlike?comm_id="+encodeURIComponent(e),{method:"POST"})}},{key:"allLikes",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.req(l+"/all-likes",{method:"POST",body:JSON.stringify(e)});case 2:return t=n.sent,t.forEach(function(e){return r.listeners.forEach(function(t){return t(e)})}),n.abrupt("return",null);case 5:case"end":return n.stop()}},n,this)}));return e}()},{key:"allPostsLikes",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.req(l+"/all-posts-likes",{method:"POST",body:JSON.stringify(e)});case 2:return t=n.sent,t.forEach(function(e){return r.listeners.forEach(function(t){return t(e)})}),n.abrupt("return",null);case 5:case"end":return n.stop()}},n,this)}));return e}()},{key:"likes",value:function(e){return this.req(l+"/likes?comm_id="+encodeURIComponent(e))}},{key:"watch",value:function(){var e=this,t=new c["default"](f);this.anonymous||(t.prepareConnect=o(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.req(l+"/auth",{method:"POST"});case 2:r=n.sent,t.url=f+"?auth="+encodeURIComponent(r);case 4:case"end":return n.stop()}},n,e)}))),t.onMessage=function(t){return e.listeners.forEach(function(e){return e(t)})},t.onConnect=function(){return e.connectListeners.forEach(function(e){return e()})},t.connect()}},{key:"onLike",value:function(e){this.listeners.push(e)}},{key:"onConnect",value:function(e){this.connectListeners.push(e)}},{key:"req",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,r,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o.mode="cors",this.anonymous||(o.headers||(o.headers={}),o.headers["X-Authentication-Token"]=s.authToken),n.next=4,fetch(e,o);case 4:return n.next=6,n.sent.json();case 6:if(t=n.sent,"error"!=t.status){n.next=11;break}throw r=new Error(t.msg),r.code=t.code,r;case 11:return n.abrupt("return",t.data);case 12:case"end":return n.stop()}},n,this)}));return e}()}]),e}();t["default"]=d},function(e,t){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];r(this,e),this.url=t,this.ws=null,this.onMessage=function(){},this.prepareConnect=function(){return Promise.resolve()},this.onConnect=function(){},this._sendBuf=[],this._reconnectTimer=null,this._reconnectTimeout=e.minReconnectTimeout}return o(e,[{key:"send",value:function(e){this.ws&&this.ws.readyState==WebSocket.OPEN?this.ws.send(e):this._sendBuf.push(e)}},{key:"connect",value:function(){function t(){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function o(){var t=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this._reconnectTimer=null,this._reconnectTimeout*=1.5,this._reconnectTimeout>e.maxReconnectTimeout&&(this._reconnectTimeout=e.maxReconnectTimeout),n.prev=3,n.next=6,this.prepareConnect();case 6:this.ws=new WebSocket(this.url),this.ws.onclose=function(){return t._reconnect()},this.ws.onerror=function(){return t._reconnect()},this.ws.onmessage=function(e){return t.onMessage(JSON.parse(e.data))},this.ws.onopen=function(){return t._onopen()},n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](3),console.warn("WS prepare connect error: "+n.t0.message),this._reconnect();case 17:case"end":return n.stop()}},o,this,[[3,13]])}));return t}()},{key:"_onopen",value:function(){var t=this;this._reconnectTimeout=e.minReconnectTimeout,this._sendBuf.forEach(function(e){return t.ws.send(e)}),this._sendBuf=[],this.onConnect()}},{key:"_reconnect",value:function(){var e=this;this.ws.readyState!=WebSocket.CONNECTING&&this.ws.readyState!=WebSocket.OPEN||this.ws.close(),null===this._reconnectTimer&&(this._reconnectTimer=setTimeout(function(){return e.connect()},this._reconnectTimeout))}}]),e}();i.minReconnectTimeout=1e3,i.maxReconnectTimeout=2e4,t["default"]=i},function(e,t,n){var r=n(36);"string"==typeof r&&(r=[[e.id,r,""]]);n(4)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,'.comment{position:relative}.bf2-likecomm-shift{position:absolute;top:0;left:-6px}.bf2-likecomm-cont{position:absolute;top:1px;right:0;font-size:12px;color:#999;opacity:0;transition:opacity .5s;white-space:nowrap}.bf2-likecomm-cont.bf2-likecomm-liked{opacity:1}.comment:hover .bf2-likecomm-cont{opacity:1;transition:opacity .25s}.bf2-likecomm-anon .bf2-likecomm-cont{display:none}.bf2-likecomm-anon .bf2-likecomm-cont.bf2-likecomm-liked{display:block}.bf2-likecomm-count{margin-right:.3em;display:none;cursor:pointer}.bf2-likecomm-count:hover{text-decoration:underline}.bf2-likecomm-liked .bf2-likecomm-count{display:inline}.bf2-likecomm-act{position:relative;cursor:pointer;color:#ffce5b;transition:transform .25s}.bf2-likecomm-anon .bf2-likecomm-act{cursor:default}.bf2-likecomm-act:after{content:"";visibility:hidden;transition:visibility 0s}.bf2-likecomm-act:hover{transform:scale(1.5)}.bf2-likecomm-act:hover:after{content:"Like";position:absolute;top:-9px;left:-1px;font:8px Helvetica Neue,Helvetica,Arial,sans-serif;white-space:nowrap;visibility:visible;transition:visibility 0s .25s;background:hsla(0,0%,100%,.75);color:#999}.bf2-likecomm-with-my .bf2-likecomm-act:hover:after{content:"Un-like";left:-6px}.bf2-likecomm-anon .bf2-likecomm-act:hover{transform:none}.bf2-likecomm-anon .bf2-likecomm-act:hover:after{content:""}.bf2-likecomm-act .bf2-likecomm-act:after{content:"Like";position:absolute;top:-14px;left:-5px;font:12px Arial}.bf2-likecomm-cont.bf2-likecomm-with-my{color:#d00}.bf2-likecomm-cont.bf2-likecomm-with-my .bf2-likecomm-act{color:#e66}.bf2-likecomm-list{position:absolute;border:1px solid #999;color:#000;padding:.5em;background:#fff;box-shadow:1px 1px 10px rgba(0,0,0,.3);min-width:100px;max-height:200px;overflow:auto;top:20px;left:-4px;z-index:1}.bf2-likecomm-dash{position:absolute;top:-1px;right:-19px;color:#ddd}.bf2-likecomm-folded{display:none}.bf2-likecomm-folded.bf2-likecomm-liked{display:inline}.bf2-likecomm-folded .fa-heart{font-size:12px;color:#ffce5b}.bf2-likecomm-folded.bf2-likecomm-with-my .fa-heart{color:#e66}.bf2-likecomm-folded.bf2-likecomm-with-my .bf2-likecomm-count{color:#d00}',""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(5),i=n(21),a=r(i),s=n(6),u=r(s),c=(0,o.registerModule)("cloud-clicks");c.init(function(){document.addEventListener("click",function(e){var t=(0,a["default"])(e.target,".comment-icon",!0),n=(0,a["default"])(t,".comment");if(t&&n&&0==e.button&&t.id&&!n.querySelector("textarea")){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();var r="";if(e.metaKey||e.ctrlKey){for(var o=n.nextSibling,i=1;o;){var s=o.querySelector(".more-comments-link");if(s){var c=parseInt(s.textContent);isNaN(c)||(i+=c)}else{if(n.querySelector("textarea")||n.querySelector(".add-comment-link"))break;i++}o=o.nextSibling}2>i&&(i=2),r=new Array(i).join("^")}var l=n.querySelectorAll(".user-name-wrapper"),f=l[l.length-1].querySelector("a").getAttribute("href").substr(1),d=(0,a["default"])(n,".post"),p=d.querySelector(".comment-textarea"),m=!p;p||((0,u["default"])(d,".post-footer a").filter(function(e){return"Comment"==e.textContent}).forEach(function(e){return e.click()}),p=d.querySelector(".comment-textarea")),p&&(m&&(p.value=""),""!==r?p.value+=r+" "+(e.shiftKey?"this":""):f&&(p.value+="@"+f+" "),p.focus(),p.blur(),p.focus(),p.selectionStart=p.selectionEnd=p.value.length)}},!0)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){return((new Date).getTime()-f)/d%1}function i(e){var t=document.querySelector(".bf2-moon");if(t){var n=t.querySelector(".bf2-moon-light"),r=50,o=r*Math.abs(Math.cos(2*Math.PI*e)),i=void 0;i=.25>e?"M 50 0 a "+o+" 50 0 0 1 0 100 a 50 50 0 0 0 0 -100 Z":.5>e?"M 50 0 a "+o+" 50 0 0 0 0 100 a 50 50 0 0 0 0 -100 Z":.75>e?"M 50 0 a 50 50 0 0 0 0 100 a "+o+" 50 0 0 0 0 -100 Z":"M 50 0 a 50 50 0 0 0 0 100 a "+o+" 50 0 0 1 0 -100 Z",n.setAttribute("d",i),Math.abs(.5-e)<.05?t.parentNode.setAttribute("title","Achtung Vollmond!"):t.parentNode.removeAttribute("title")}}var a=n(5),s=n(13),u=r(s),c=(0,a.registerModule)("moon"),l='<svg class="bf2-moon" viewBox="-4 -4 108 108" xmlns="http://www.w3.org/2000/svg" version="1.1">\n        <circle class="bf2-moon-shadow" cx="50" cy="50" r="54"></circle>\n        <path class="bf2-moon-light" d="M 50 0 a 30 50 0 0 0 0 100 a 50 50 0 0 0 0 -100 Z"></path>\n    </svg>';c.watch("h1",function(e){e.appendChild((0,u["default"])(".bf2-moon-cont")).innerHTML=l,i(o()),setInterval(function(){return i(o())},36e5)});var f=new Date("Thu Apr 07 2016 14:22:37 GMT+0300").getTime(),d=Math.round(2551442813.5680003)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function s(e){e.style.display="none",document.body.querySelector("."+L+"new-form").style.display="block"}function u(e){var t=this;return confirm("Are you sure?")?a(regeneratorRuntime.mark(function n(){var r,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I["default"].ready;case 2:if(r=t.sent,o=r.me,i=(0,R["default"])(e,"."+L+"account").dataset.username,i!==o){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,f();case 9:if(t.t0=function(e){return e.username!==i},a=t.sent.filter(t.t0),1!=a.length||a[0].username!==o){t.next=16;break}return t.next=14,F.set(D,null);case 14:t.next=18;break;case 16:return t.next=18,F.set(D,a);case 18:return t.t1=j,t.next=21,l();case 21:t.t2=t.sent,t.t1.showContent.call(t.t1,t.t2);case 23:case"end":return t.stop()}},n,t)}))():Promise.resolve()}var c=function(){var e=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j=new S["default"]("bf2-switch-account-box"),j.showContent("<p>Loading…</p>"),e.t0=j,e.next=5,l();case 5:e.t1=e.sent,e.t0.showContent.call(e.t0,e.t1);case 7:case"end":return e.stop()}},t,this)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=a(regeneratorRuntime.mark(function t(){var e,n,r,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I["default"].ready;case 2:return e=t.sent,n=e.me,r=(0,x["default"])("form."+L+"new-form",(0,_.html)(m)),r.addEventListener("submit",function(e){e.preventDefault();var t=r.elements.username.value,n=r.elements.password.value;a(regeneratorRuntime.mark(function i(){var e,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,C.anonFormPost("/v1/session","username="+encodeURIComponent(t)+"&password="+encodeURIComponent(n));case 2:if(e=o.sent,!e.err){o.next=6;break}return alert(e.err),o.abrupt("return");case 6:return r=e.users.username,a=e.authToken,o.next=10,d(r,a);case 10:return o.t0=j,o.next=13,l();case 13:o.t1=o.sent,o.t0.showContent.call(o.t0,o.t1);case 15:case"end":return o.stop()}},i,o)}))()}),t.t0=(0,_.html)(h,L),t.t1="."+L+"accounts",t.next=10,f();case 10:return t.t2=function(e){var t=e.username,r=(0,x["default"])("img."+L+"upic",{src:M.defaultPic});(0,M.getPic)(t).then(function(e){return r.src=e});var o=(0,x["default"])("."+L+"del",{title:"Remove from list"},(0,x["default"])("i.fa.fa-times-circle"));return(0,x["default"])("."+L+"account"+(t==n?".-current":""),{"data-username":t},r,t,o)},t.t3=t.sent.map(t.t2),t.t4=(0,x["default"])(t.t1,t.t3),t.t5=(0,_.html)(v,L),t.t6=r,t.abrupt("return",(0,x["default"])("",t.t0,t.t4,t.t5,t.t6));case 16:case"end":return t.stop()}},t,this)}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=a(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.get(D);case 2:if(e=t.sent){t.next=10;break}return t.next=6,I["default"].ready;case 6:t.t0=t.sent.me,t.t1=P.authToken,t.t2={username:t.t0,token:t.t1},e=[t.t2];case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}},t,this)}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=a(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:if(r=t.sent,!r.some(function(t){return t.username===e})){t.next=5;break}return t.abrupt("return");case 5:return r.push({username:e,token:n}),t.next=8,F.set(D,r);case 8:case"end":return t.stop()}},t,this)}));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=a(regeneratorRuntime.mark(function t(e){var n,r,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dataset.username,t.t0=n,t.next=4,I["default"].ready;case 4:if(t.t1=t.sent.me,t.t0!==t.t1){t.next=7;break}return t.abrupt("return");case 7:return r=null,t.next=10,f();case 10:if(t.t2=function(e){return e.username==n?(r=e.token,!0):!1},t.sent.some(t.t2),!r){t.next=22;break}return j.showContent("Please wait…"),o=new Date,o.setTime(o.getTime()+31536e6),document.cookie=P.cookieName+"="+encodeURIComponent(r)+"; path=/; expires="+o.toUTCString(),t.next=19,C.get("/v1/users/whoami",r);case 19:i=t.sent,localStorage.setItem("whoamiCache",JSON.stringify(i.users)),location.reload();case 22:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),m=i(['\n        <p>Please enter username and password of your other account:</p>\n        <p><input class="form-control" type="text" name="username" placeholder="Username" required></p>\n        <p><input class="form-control" type="password" name="password" placeholder="Password" required></p>\n        <p><button type="submit" class="btn btn-default">Add</button></p>\n        '],['\n        <p>Please enter username and password of your other account:</p>\n        <p><input class="form-control" type="text" name="username" placeholder="Username" required></p>\n        <p><input class="form-control" type="password" name="password" placeholder="Password" required></p>\n        <p><button type="submit" class="btn btn-default">Add</button></p>\n        ']),h=i(['<div class="','header">Switch account to:</div>'],['<div class="','header">Switch account to:</div>']),v=i(['<div class="','add-new"><a><i class="fa fa-plus"></i> Add new account</a></div>'],['<div class="','add-new"><a><i class="fa fa-plus"></i> Add new account</a></div>']),b=n(5),y=n(40),g=o(y),w=n(13),x=o(w),_=n(15),k=n(25),S=o(k),E=n(9),I=o(E),T=n(10),C=r(T),M=n(11),P=n(8),O=n(21),R=o(O),A=(0,b.registerModule)("switch-accounts"),L="bf2-switch-dlg-",D="bfAccounts-freefeed.net",N=[{selector:"."+L+"del",handler:u},{selector:"."+L+"account",handler:p},{selector:"."+L+"add-new",handler:s}],F=null;A.init(function(){F=new g["default"],document.body.addEventListener("click",function(e){N.some(function(t){var n=(0,R["default"])(e.target,t.selector,!0);return n?(e.preventDefault(),t.handler(n),!0):!1})})}),A.watch(".logged-in .avatar, .logged-in .userpic",function(e){e.appendChild((0,x["default"])(".bf2-switch-acc",{title:"Switch account"},(0,x["default"])("span.fa.fa-exchange"))).addEventListener("click",c)});var j=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(19),s=r(a),u="https://davidmz.github.io/BetterFeed2/storage.html?_="+Math.random(),c="https://davidmz.github.io",l=function(){function e(){o(this,e),this.iframe=document.createElement("iframe"),this.iframe.src=u,this.iframe.style.cssText="visibility: hidden;\n            position: absolute;\n            left: 0; top: 0;\n            height:0; width:0;\n            border: none;",document.body.appendChild(this.iframe),this.msg=new s["default"](this.iframe.contentWindow,c)}return i(e,[{key:"get",value:function(e){return this.msg.send("get",e)}},{key:"set",value:function(e,t){return this.msg.send("set",{key:e,value:t})}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){return function(t){var n=e[t]._att.querySelector("img").getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop;return{x:n.left,y:n.top+r,w:n.width}}}var a=n(5),s=n(21),u=o(s),c=n(6),l=o(c),f=n(42),d=r(f),p=n(24),m=o(p),h=n(43),v=o(h),b=n(44),y=o(b),g=n(45),w=o(g),x=(0,a.registerModule)("lightbox");x.init(function(){document.body.insertAdjacentHTML("beforeend",w["default"]),d.CSS(m["default"]+"/src/photoswipe/photoswipe.css"),d.CSS(m["default"]+"/src/photoswipe/default-skin/default-skin.css"),document.body.classList.add("bf2-lightboxed-images")}),x.init(function(){document.addEventListener("click",function(e){if(0==e.button){var t=(0,u["default"])(e.target,".image-attachments");if(t){var n=(0,l["default"])(t,".attachment > a").map(function(e){var t=e.title.match(/(\d+)\D(\d+)px\)$/);return{w:t?parseInt(t[1]):0,h:t?parseInt(t[2]):0,src:e.href,msrc:e.firstElementChild.src,_att:e.parentNode}}).filter(function(e){return e.w>0});if(0==n.length)return void console.warn("Old post, images doesn't have size in html code. Sorry, can not show lightbox.");e.preventDefault();var r=0,o=(0,u["default"])(e.target,".attachment");n.some(function(e,t){var n=e._att;return n===o?(r=t,!0):!1});var a=new v["default"](document.body.querySelector(".bf2-pswp"),y["default"],n,{bgOpacity:.8,history:!1,getThumbBoundsFn:i(n),index:r});a.init()}}})})},function(e,t){"use strict";function n(e){var t=document.createElement("script");return t.src=e,t.type="text/javascript",t.charset="utf-8",t.async=!0,document.head.appendChild(t),t}function r(e){var t=arguments.length<=1||void 0===arguments[1]?"all":arguments[1],n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.charset="utf-8",n.href=e,n.media=t,document.head.appendChild(n),n}Object.defineProperty(t,"__esModule",{value:!0}),t.JavaScript=n,t.CSS=r},function(e,t,n){var r,o;/*! PhotoSwipe - v4.1.1 - 2015-12-24
	* http://photoswipe.com
	* Copyright (c) 2015 Dmitry Semenov; */
!function(i,a){r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o))}(this,function(){"use strict";var e=function(e,t,n,r){var o={features:null,bind:function(e,t,n,r){var o=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var i=0;i<t.length;i++)t[i]&&e[o](t[i],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",r={};if(r.oldIE=document.all&&!document.addEventListener,r.touch="ontouchstart"in window,window.requestAnimationFrame&&(r.raf=window.requestAnimationFrame,r.caf=window.cancelAnimationFrame),r.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!r.pointerEvent){var i=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);a&&a.length>0&&(a=parseInt(a[1],10),a>=1&&8>a&&(r.isOldIOSPhone=!0))}var s=i.match(/Android\s([0-9\.]*)/),u=s?s[1]:0;u=parseFloat(u),u>=1&&(4.4>u&&(r.isOldAndroid=!0),r.androidVersion=u),r.isMobileOpera=/opera mini|opera mobi/i.test(i)}for(var c,l,f=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],p=0;4>p;p++){n=d[p];for(var m=0;3>m;m++)c=f[m],l=n+(n?c.charAt(0).toUpperCase()+c.slice(1):c),!r[c]&&l in t&&(r[c]=l);n&&!r.raf&&(n=n.toLowerCase(),r.raf=window[n+"RequestAnimationFrame"],r.raf&&(r.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!r.raf){var h=0;r.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),r=window.setTimeout(function(){e(t+n)},n);return h=t+n,r},r.caf=function(e){clearTimeout(e)}}return r.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=r,r}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,r){t=t.split(" ");for(var o,i=(r?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(o=t[s])if("object"==typeof n&&n.handleEvent){if(r){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=a;e[i]("on"+o,n["oldIE"+o])}else e[i]("on"+o,n)});var i=this,a=25,s=3,u={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(u,r);var c,l,f,d,p,m,h,v,b,y,g,w,x,_,k,S,E,I,T,C,M,P,O,R,A,L,D,N,F,j,B,U,z,q,H,Z,W,K,G,X,Y,V,J,Q,$,ee,te,ne,re,oe,ie,ae,se,ue,ce,le,fe=function(){return{x:0,y:0}},de=fe(),pe=fe(),me=fe(),he={},ve=0,be={},ye=fe(),ge=0,we=!0,xe=[],_e={},ke=!1,Se=function(e,t){o.extend(i,t.publicMethods),xe.push(e)},Ee=function(e){var t=$t();return e>t-1?e-t:0>e?t+e:e},Ie={},Te=function(e,t){return Ie[e]||(Ie[e]=[]),Ie[e].push(t)},Ce=function(e){var t=Ie[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(i,n)}},Me=function(){return(new Date).getTime()},Pe=function(e){ue=e,i.bg.style.opacity=e*u.bgOpacity},Oe=function(e,t,n,r,o){(!ke||o&&o!==i.currItem)&&(r/=o?o.fitRatio:i.currItem.fitRatio),e[P]=w+t+"px, "+n+"px"+x+" scale("+r+")"},Re=function(e){re&&(e&&(y>i.currItem.fitRatio?ke||(dn(i.currItem,!1,!0),ke=!0):ke&&(dn(i.currItem),ke=!1)),Oe(re,me.x,me.y,y))},Ae=function(e){e.container&&Oe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Le=function(e,t){t[P]=w+e+"px, 0px"+x},De=function(e,t){if(!u.loop&&t){var n=d+(ye.x*ve-e)/ye.x,r=Math.round(e-yt.x);(0>n&&r>0||n>=$t()-1&&0>r)&&(e=yt.x+r*u.mainScrollEndFriction)}yt.x=e,Le(e,p)},Ne=function(e,t){var n=gt[e]-be[e];return pe[e]+de[e]+n-n*(t/g)},Fe=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},je=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Be=null,Ue=function(){Be&&(o.unbind(document,"mousemove",Ue),o.addClass(e,"pswp--has_mouse"),u.mouseUsed=!0,Ce("mouseUsed")),Be=setTimeout(function(){Be=null},100)},ze=function(){o.bind(document,"keydown",i),B.transform&&o.bind(i.scrollWrap,"click",i),u.mouseUsed||o.bind(document,"mousemove",Ue),o.bind(window,"resize scroll",i),Ce("bindEvents")},qe=function(){o.unbind(window,"resize",i),o.unbind(window,"scroll",b.scroll),o.unbind(document,"keydown",i),o.unbind(document,"mousemove",Ue),B.transform&&o.unbind(i.scrollWrap,"click",i),K&&o.unbind(window,h,i),Ce("unbindEvents")},He=function(e,t){var n=un(i.currItem,he,e);return t&&(ne=n),n},Ze=function(e){return e||(e=i.currItem),e.initialZoomLevel},We=function(e){return e||(e=i.currItem),e.w>0?u.maxSpreadZoom:1},Ke=function(e,t,n,r){return r===i.currItem.initialZoomLevel?(n[e]=i.currItem.initialPosition[e],!0):(n[e]=Ne(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]?(n[e]=t.max[e],!0):!1)},Ge=function(){if(P){var t=B.perspective&&!R;return w="translate"+(t?"3d(":"("),void(x=B.perspective?", 0px)":")")}P="left",o.addClass(e,"pswp--ie"),Le=function(e,t){t.left=e+"px"},Ae=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,o=t*e.h;n.width=r+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Re=function(){if(re){var e=re,t=i.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,o=n*t.h;e.width=r+"px",e.height=o+"px",e.left=me.x+"px",e.top=me.y+"px"}}},Xe=function(e){var t="";u.escKey&&27===e.keyCode?t="close":u.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,i[t]()))},Ye=function(e){e&&(Y||X||oe||Z)&&(e.preventDefault(),e.stopPropagation())},Ve=function(){i.setScrollOffset(0,o.getScrollY())},Je={},Qe=0,$e=function(e){Je[e]&&(Je[e].raf&&L(Je[e].raf),Qe--,delete Je[e])},et=function(e){Je[e]&&$e(e),Je[e]||(Qe++,Je[e]={})},tt=function(){for(var e in Je)Je.hasOwnProperty(e)&&$e(e)},nt=function(e,t,n,r,o,i,a){var s,u=Me();et(e);var c=function(){if(Je[e]){if(s=Me()-u,s>=r)return $e(e),i(n),void(a&&a());i((n-t)*o(s/r)+t),Je[e].raf=A(c)}};c()},rt={shout:Ce,listen:Te,viewportSize:he,options:u,isMainScrollAnimating:function(){return oe},getZoomLevel:function(){return y},getCurrentIndex:function(){return d},isDragging:function(){return K},isZooming:function(){return $},setScrollOffset:function(e,t){be.x=e,j=be.y=t,Ce("updateScrollOffset",be)},applyZoomPan:function(e,t,n,r){me.x=t,me.y=n,y=e,Re(r)},init:function(){if(!c&&!l){var n;i.framework=o,i.template=e,i.bg=o.getChildByClass(e,"pswp__bg"),D=e.className,c=!0,B=o.detectFeatures(),A=B.raf,L=B.caf,P=B.transform,F=B.oldIE,i.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),i.container=o.getChildByClass(i.scrollWrap,"pswp__container"),p=i.container.style,i.itemHolders=S=[{el:i.container.children[0],wrap:0,index:-1},{el:i.container.children[1],wrap:0,index:-1},{el:i.container.children[2],wrap:0,index:-1}],S[0].el.style.display=S[2].el.style.display="none",Ge(),b={resize:i.updateSize,scroll:Ve,keydown:Xe,click:Ye};var r=B.isOldIOSPhone||B.isOldAndroid||B.isMobileOpera;for(B.animationName&&B.transform&&!r||(u.showAnimationDuration=u.hideAnimationDuration=0),n=0;n<xe.length;n++)i["init"+xe[n]]();if(t){var a=i.ui=new t(i,o);a.init()}Ce("firstUpdate"),d=d||u.index||0,(isNaN(d)||0>d||d>=$t())&&(d=0),i.currItem=Qt(d),(B.isOldIOSPhone||B.isOldAndroid)&&(we=!1),e.setAttribute("aria-hidden","false"),u.modal&&(we?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===j&&(Ce("initialLayout"),j=N=o.getScrollY());var f="pswp--open ";for(u.mainClass&&(f+=u.mainClass+" "),u.showHideOpacity&&(f+="pswp--animate_opacity "),f+=R?"pswp--touch":"pswp--notouch",f+=B.animationName?" pswp--css_animation":"",f+=B.svg?" pswp--svg":"",o.addClass(e,f),i.updateSize(),m=-1,ge=null,n=0;s>n;n++)Le((n+m)*ye.x,S[n].el.style);F||o.bind(i.scrollWrap,v,i),Te("initialZoomInEnd",function(){i.setContent(S[0],d-1),i.setContent(S[2],d+1),S[0].el.style.display=S[2].el.style.display="block",u.focus&&e.focus(),ze()}),i.setContent(S[1],d),i.updateCurrItem(),Ce("afterInit"),we||(_=setInterval(function(){Qe||K||$||y!==i.currItem.initialZoomLevel||i.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){c&&(c=!1,l=!0,Ce("close"),qe(),tn(i.currItem,null,!0,i.destroy))},destroy:function(){Ce("destroy"),Xt&&clearTimeout(Xt),e.setAttribute("aria-hidden","true"),e.className=D,_&&clearInterval(_),o.unbind(i.scrollWrap,v,i),o.unbind(window,"scroll",i),St(),tt(),Ie=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),me.x=e,me.y=t,Re()},handleEvent:function(e){e=e||window.event,b[e.type]&&b[e.type](e)},goTo:function(e){e=Ee(e);var t=e-d;ge=t,d=e,i.currItem=Qt(d),ve-=t,De(ye.x*ve),tt(),oe=!1,i.updateCurrItem()},next:function(){i.goTo(d+1)},prev:function(){i.goTo(d-1)},updateCurrZoomItem:function(e){if(e&&Ce("beforeChange",0),S[1].el.children.length){var t=S[1].el.children[0];re=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else re=null;ne=i.currItem.bounds,g=y=i.currItem.initialZoomLevel,me.x=ne.center.x,me.y=ne.center.y,e&&Ce("afterChange")},invalidateCurrItems:function(){k=!0;for(var e=0;s>e;e++)S[e].item&&(S[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==ge){var t,n=Math.abs(ge);if(!(e&&2>n)){i.currItem=Qt(d),ke=!1,Ce("beforeChange",ge),n>=s&&(m+=ge+(ge>0?-s:s),n=s);for(var r=0;n>r;r++)ge>0?(t=S.shift(),S[s-1]=t,m++,Le((m+2)*ye.x,t.el.style),i.setContent(t,d-n+r+1+1)):(t=S.pop(),S.unshift(t),m--,Le(m*ye.x,t.el.style),i.setContent(t,d+n-r-1-1));if(re&&1===Math.abs(ge)){var o=Qt(E);o.initialZoomLevel!==y&&(un(o,he),dn(o),Ae(o))}ge=0,i.updateCurrZoomItem(),E=d,Ce("afterChange")}}},updateSize:function(t){if(!we&&u.modal){var n=o.getScrollY();if(j!==n&&(e.style.top=n+"px",j=n),!t&&_e.x===window.innerWidth&&_e.y===window.innerHeight)return;_e.x=window.innerWidth,_e.y=window.innerHeight,e.style.height=_e.y+"px"}if(he.x=i.scrollWrap.clientWidth,he.y=i.scrollWrap.clientHeight,Ve(),ye.x=he.x+Math.round(he.x*u.spacing),ye.y=he.y,De(ye.x*ve),Ce("beforeResize"),void 0!==m){for(var r,a,c,l=0;s>l;l++)r=S[l],Le((l+m)*ye.x,r.el.style),c=d+l-1,u.loop&&$t()>2&&(c=Ee(c)),a=Qt(c),a&&(k||a.needsUpdate||!a.bounds)?(i.cleanSlide(a),i.setContent(r,c),1===l&&(i.currItem=a,i.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===r.index&&c>=0&&i.setContent(r,c),a&&a.container&&(un(a,he),dn(a),Ae(a));k=!1}g=y=i.currItem.initialZoomLevel,ne=i.currItem.bounds,ne&&(me.x=ne.center.x,me.y=ne.center.y,Re(!0)),Ce("resize")},zoomTo:function(e,t,n,r,i){t&&(g=y,gt.x=Math.abs(t.x)-me.x,gt.y=Math.abs(t.y)-me.y,Fe(pe,me));var a=He(e,!1),s={};Ke("x",a,s,e),Ke("y",a,s,e);var u=y,c={x:me.x,y:me.y};je(s);var l=function(t){1===t?(y=e,me.x=s.x,me.y=s.y):(y=(e-u)*t+u,me.x=(s.x-c.x)*t+c.x,me.y=(s.y-c.y)*t+c.y),i&&i(t),Re(1===t)};n?nt("customZoomTo",0,1,n,r||o.easing.sine.inOut,l):l(1)}},ot=30,it=10,at={},st={},ut={},ct={},lt={},ft=[],dt={},pt=[],mt={},ht=0,vt=fe(),bt=0,yt=fe(),gt=fe(),wt=fe(),xt=function(e,t){return e.x===t.x&&e.y===t.y},_t=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},kt=function(e,t){return mt.x=Math.abs(e.x-t.x),mt.y=Math.abs(e.y-t.y),Math.sqrt(mt.x*mt.x+mt.y*mt.y)},St=function(){V&&(L(V),V=null)},Et=function(){K&&(V=A(Et),zt())},It=function(){return!("fit"===u.scaleMode&&y===i.currItem.initialZoomLevel)},Tt=function(e,t){return e&&e!==document?e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1?!1:t(e)?e:Tt(e.parentNode,t):!1},Ct={},Mt=function(e,t){return Ct.prevent=!Tt(e.target,u.isClickableElement),Ce("preventDragEvent",e,t,Ct),Ct.prevent},Pt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Ot=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Rt=function(e,t,n){if(e-z>50){var r=pt.length>2?pt.shift():{};r.x=t,r.y=n,pt.push(r),z=e}},At=function(){var e=me.y-i.currItem.initialPosition.y;return 1-Math.abs(e/(he.y/2))},Lt={},Dt={},Nt=[],Ft=function(e){for(;Nt.length>0;)Nt.pop();return O?(le=0,ft.forEach(function(e){0===le?Nt[0]=e:1===le&&(Nt[1]=e),le++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Nt[0]=Pt(e.touches[0],Lt),e.touches.length>1&&(Nt[1]=Pt(e.touches[1],Dt))):(Lt.x=e.pageX,Lt.y=e.pageY,Lt.id="",Nt[0]=Lt),Nt},jt=function(e,t){var n,r,o,a,s=0,c=me[e]+t[e],l=t[e]>0,f=yt.x+t.x,d=yt.x-dt.x;return n=c>ne.min[e]||c<ne.max[e]?u.panEndFriction:1,c=me[e]+t[e]*n,!u.allowPanToNext&&y!==i.currItem.initialZoomLevel||(re?"h"!==ie||"x"!==e||X||(l?(c>ne.min[e]&&(n=u.panEndFriction,s=ne.min[e]-c,r=ne.min[e]-pe[e]),(0>=r||0>d)&&$t()>1?(a=f,0>d&&f>dt.x&&(a=dt.x)):ne.min.x!==ne.max.x&&(o=c)):(c<ne.max[e]&&(n=u.panEndFriction,s=c-ne.max[e],r=pe[e]-ne.max[e]),(0>=r||d>0)&&$t()>1?(a=f,d>0&&f<dt.x&&(a=dt.x)):ne.min.x!==ne.max.x&&(o=c))):a=f,"x"!==e)?void(oe||J||y>i.currItem.fitRatio&&(me[e]+=t[e]*n)):(void 0!==a&&(De(a,!0),J=a!==dt.x),ne.min.x!==ne.max.x&&(void 0!==o?me.x=o:J||(me.x+=t.x*n)),void 0!==a)},Bt=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Jt)return void e.preventDefault();if(!W||"mousedown"!==e.type){if(Mt(e,!0)&&e.preventDefault(),Ce("pointerDown"),O){var t=o.arraySearch(ft,e.pointerId,"id");0>t&&(t=ft.length),ft[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Ft(e),r=n.length;Q=null,tt(),K&&1!==r||(K=ae=!0,o.bind(window,h,i),H=ce=se=Z=J=Y=G=X=!1,ie=null,Ce("firstTouchStart",n),Fe(pe,me),de.x=de.y=0,Fe(ct,n[0]),Fe(lt,ct),dt.x=ye.x*ve,pt=[{x:ct.x,y:ct.y}],z=U=Me(),He(y,!0),St(),Et()),!$&&r>1&&!oe&&!J&&(g=y,X=!1,$=G=!0,de.y=de.x=0,Fe(pe,me),Fe(at,n[0]),Fe(st,n[1]),Ot(at,st,wt),gt.x=Math.abs(wt.x)-me.x,gt.y=Math.abs(wt.y)-me.y,ee=te=kt(at,st))}}},Ut=function(e){if(e.preventDefault(),O){var t=o.arraySearch(ft,e.pointerId,"id");if(t>-1){var n=ft[t];n.x=e.pageX,n.y=e.pageY}}if(K){var r=Ft(e);if(ie||Y||$)Q=r;else if(yt.x!==ye.x*ve)ie="h";else{var i=Math.abs(r[0].x-ct.x)-Math.abs(r[0].y-ct.y);Math.abs(i)>=it&&(ie=i>0?"h":"v",Q=r)}}},zt=function(){if(Q){var e=Q.length;if(0!==e)if(Fe(at,Q[0]),ut.x=at.x-ct.x,ut.y=at.y-ct.y,$&&e>1){if(ct.x=at.x,ct.y=at.y,!ut.x&&!ut.y&&xt(Q[1],st))return;Fe(st,Q[1]),X||(X=!0,Ce("zoomGestureStarted"));var t=kt(at,st),n=Kt(t);n>i.currItem.initialZoomLevel+i.currItem.initialZoomLevel/15&&(ce=!0);var r=1,o=Ze(),a=We();if(o>n)if(u.pinchToClose&&!ce&&g<=i.currItem.initialZoomLevel){var s=o-n,c=1-s/(o/1.2);Pe(c),Ce("onPinchClose",c),se=!0}else r=(o-n)/o,r>1&&(r=1),n=o-r*(o/3);else n>a&&(r=(n-a)/(6*o),r>1&&(r=1),n=a+r*o);0>r&&(r=0),ee=t,Ot(at,st,vt),de.x+=vt.x-wt.x,de.y+=vt.y-wt.y,Fe(wt,vt),me.x=Ne("x",n),me.y=Ne("y",n),H=n>y,y=n,Re()}else{if(!ie)return;if(ae&&(ae=!1,Math.abs(ut.x)>=it&&(ut.x-=Q[0].x-lt.x),Math.abs(ut.y)>=it&&(ut.y-=Q[0].y-lt.y)),ct.x=at.x,ct.y=at.y,0===ut.x&&0===ut.y)return;if("v"===ie&&u.closeOnVerticalDrag&&!It()){de.y+=ut.y,me.y+=ut.y;var l=At();return Z=!0,Ce("onVerticalDrag",l),Pe(l),void Re()}Rt(Me(),at.x,at.y),Y=!0,ne=i.currItem.bounds;var f=jt("x",ut);f||(jt("y",ut),je(me),Re())}}},qt=function(e){if(B.isOldAndroid){if(W&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(W),W=setTimeout(function(){W=0},600))}Ce("pointerUp"),Mt(e,!1)&&e.preventDefault();var t;if(O){var n=o.arraySearch(ft,e.pointerId,"id");if(n>-1)if(t=ft.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var r={4:"mouse",2:"touch",3:"pen"};t.type=r[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var a,s=Ft(e),c=s.length;if("mouseup"===e.type&&(c=0),2===c)return Q=null,!0;1===c&&Fe(lt,s[0]),0!==c||ie||oe||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ce("touchRelease",e,t));var l=-1;if(0===c&&(K=!1,o.unbind(window,h,i),St(),$?l=0:-1!==bt&&(l=Me()-bt)),bt=1===c?Me():-1,a=-1!==l&&150>l?"zoom":"swipe",$&&2>c&&($=!1,1===c&&(a="zoomPointerUp"),Ce("zoomGestureEnded")),Q=null,Y||X||oe||Z)if(tt(),q||(q=Ht()),q.calculateSwipeSpeed("x"),Z){var f=At();if(f<u.verticalDragRange)i.close();else{var d=me.y,p=ue;nt("verticalDrag",0,1,300,o.easing.cubic.out,function(e){me.y=(i.currItem.initialPosition.y-d)*e+d,Pe((1-p)*e+p),Re()}),Ce("onVerticalDrag",1)}}else{if((J||oe)&&0===c){var m=Wt(a,q);if(m)return;a="zoomPointerUp"}if(!oe)return"swipe"!==a?void Gt():void(!J&&y>i.currItem.fitRatio&&Zt(q))}},Ht=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){pt.length>1?(e=Me()-z+50,t=pt[pt.length-2][r]):(e=Me()-U,t=lt[r]),n.lastFlickOffset[r]=ct[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(me[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:me[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,me[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){me[e]=t,Re()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,me[e]+=n.distanceOffset[e])},panAnimLoop:function(){return Je.zoomPan&&(Je.zoomPan.raf=A(n.panAnimLoop),n.now=Me(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Re(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05)?(me.x=Math.round(me.x),me.y=Math.round(me.y),Re(),void $e("zoomPan")):void 0}};return n},Zt=function(e){return e.calculateSwipeSpeed("y"),ne=i.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(et("zoomPan"),e.lastNow=Me(),void e.panAnimLoop())},Wt=function(e,t){var n;oe||(ht=d);var r;if("swipe"===e){var a=ct.x-lt.x,s=t.lastFlickDist.x<10;a>ot&&(s||t.lastFlickOffset.x>20)?r=-1:-ot>a&&(s||t.lastFlickOffset.x<-20)&&(r=1)}var c;r&&(d+=r,0>d?(d=u.loop?$t()-1:0,c=!0):d>=$t()&&(d=u.loop?0:$t()-1,c=!0),c&&!u.loop||(ge+=r,ve-=r,n=!0));var l,f=ye.x*ve,p=Math.abs(f-yt.x);return n||f>yt.x==t.lastFlickSpeed.x>0?(l=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,l=Math.min(l,400),l=Math.max(l,250)):l=333,ht===d&&(n=!1),oe=!0,Ce("mainScrollAnimStart"),nt("mainScroll",yt.x,f,l,o.easing.cubic.out,De,function(){tt(),oe=!1,ht=-1,(n||ht!==d)&&i.updateCurrItem(),Ce("mainScrollAnimComplete")}),n&&i.updateCurrItem(!0),n},Kt=function(e){return 1/te*e*g},Gt=function(){var e=y,t=Ze(),n=We();t>y?e=t:y>n&&(e=n);var r,a=1,s=ue;return se&&!H&&!ce&&t>y?(i.close(),!0):(se&&(r=function(e){Pe((a-s)*e+s)}),i.zoomTo(e,0,200,o.easing.cubic.out,r),!0)};Se("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,o){I=e+t,T=e+n,C=e+r,M=o?e+o:""};O=B.pointerEvent,O&&B.touch&&(B.touch=!1),O?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):B.touch?(e("touch","start","move","end","cancel"),R=!0):e("mouse","down","move","up"),h=T+" "+C+" "+M,v=I,O&&!R&&(R=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),i.likelyTouchDevice=R,b[I]=Bt,b[T]=Ut,b[C]=qt,M&&(b[M]=b[C]),B.touch&&(v+=" mousedown",h+=" mousemove mouseup",b.mousedown=b[I],b.mousemove=b[T],b.mouseup=b[C]),R||(u.allowPanToNext=!1)}}});var Xt,Yt,Vt,Jt,Qt,$t,en,tn=function(t,n,r,a){Xt&&clearTimeout(Xt),Jt=!0,Vt=!0;var s;t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=u.getThumbBoundsFn&&u.getThumbBoundsFn(d);var c=r?u.hideAnimationDuration:u.showAnimationDuration,l=function(){$e("initialZoom"),r?(i.template.removeAttribute("style"),i.bg.removeAttribute("style")):(Pe(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),Ce("initialZoom"+(r?"OutEnd":"InEnd"))),a&&a(),Jt=!1};if(!c||!s||void 0===s.x)return Ce("initialZoom"+(r?"Out":"In")),y=t.initialZoomLevel,Fe(me,t.initialPosition),Re(),e.style.opacity=r?0:1,Pe(1),void(c?setTimeout(function(){l()},c):l());var p=function(){var n=f,a=!i.currItem.src||i.currItem.loadError||u.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(y=s.w/t.w,me.x=s.x,me.y=s.y-N,i[a?"template":"bg"].style.opacity=.001,Re()),et("initialZoom"),r&&!n&&o.removeClass(e,"pswp--animated-in"),a&&(r?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),Xt=setTimeout(function(){if(Ce("initialZoom"+(r?"Out":"In")),r){var i=s.w/t.w,u={x:me.x,y:me.y},f=y,d=ue,p=function(t){1===t?(y=i,me.x=s.x,me.y=s.y-j):(y=(i-f)*t+f,me.x=(s.x-u.x)*t+u.x,me.y=(s.y-j-u.y)*t+u.y),Re(),a?e.style.opacity=1-t:Pe(d-t*d)};n?nt("initialZoom",0,1,c,o.easing.cubic.out,p,l):(p(1),Xt=setTimeout(l,c+20))}else y=t.initialZoomLevel,Fe(me,t.initialPosition),Re(),Pe(1),a?e.style.opacity=1:Pe(1),Xt=setTimeout(l,c+20)},r?25:90)};p()},nn={},rn=[],on={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Yt.length}},an=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},sn=function(e,t,n){var r=e.bounds;r.center.x=Math.round((nn.x-t)/2),r.center.y=Math.round((nn.y-n)/2)+e.vGap.top,r.max.x=t>nn.x?Math.round(nn.x-t):r.center.x,r.max.y=n>nn.y?Math.round(nn.y-n)+e.vGap.top:r.center.y,r.min.x=t>nn.x?0:r.center.x,r.min.y=n>nn.y?e.vGap.top:r.center.y},un=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),Ce("parseVerticalMargin",e)),nn.x=t.x,nn.y=t.y-e.vGap.top-e.vGap.bottom,r){var o=nn.x/e.w,i=nn.y/e.h;e.fitRatio=i>o?o:i;var a=u.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=an())}if(!n)return;return sn(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=an(),e.initialPosition=e.bounds.center,e.bounds},cn=function(e,t,n,r,o,a){t.loadError||r&&(t.imageAppended=!0,dn(t,r,t===i.currItem&&ke),n.appendChild(r),a&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},ln=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},fn=function(e,t){return e.src&&e.loadError&&e.container?(t&&(e.container.innerHTML=""),e.container.innerHTML=u.errorMsg.replace("%url%",e.src),!0):void 0},dn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=o+"px"),t.style.width=r+"px",t.style.height=o+"px"}},pn=function(){if(rn.length){for(var e,t=0;t<rn.length;t++)e=rn[t],e.holder.index===e.index&&cn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);rn=[]}};Se("Controller",{publicMethods:{lazyLoadItem:function(e){e=Ee(e);var t=Qt(e);t&&(!t.loaded&&!t.loading||k)&&(Ce("gettingData",e,t),t.src&&ln(t))},initController:function(){o.extend(u,on,!0),i.items=Yt=n,Qt=i.getItemAt,$t=u.getNumItemsFn,en=u.loop,$t()<3&&(u.loop=!1),Te("beforeChange",function(e){var t,n=u.preload,r=null===e?!0:e>=0,o=Math.min(n[0],$t()),a=Math.min(n[1],$t());for(t=1;(r?a:o)>=t;t++)i.lazyLoadItem(d+t);for(t=1;(r?o:a)>=t;t++)i.lazyLoadItem(d-t)}),Te("initialLayout",function(){i.currItem.initialLayout=u.getThumbBoundsFn&&u.getThumbBoundsFn(d)}),Te("mainScrollAnimComplete",pn),Te("initialZoomInEnd",pn),Te("destroy",function(){for(var e,t=0;t<Yt.length;t++)e=Yt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);rn=null})},getItemAt:function(e){return e>=0&&void 0!==Yt[e]?Yt[e]:!1},allowProgressiveImg:function(){return u.forceProgressiveLoading||!R||u.mouseUsed||screen.width>1200},setContent:function(e,t){u.loop&&(t=Ee(t));var n=i.getItemAt(e.index);n&&(n.container=null);var r,a=i.getItemAt(t);if(!a)return void(e.el.innerHTML="");Ce("gettingData",t,a),e.index=t,e.item=a;var s=a.container=o.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?s.appendChild(a.html):s.innerHTML=a.html),fn(a),un(a,he),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&(r=o.createEl("pswp__img","img"),r.style.opacity=1,r.src=a.src,dn(a,r),cn(t,a,s,r,!0));else{if(a.loadComplete=function(n){if(c){if(e&&e.index===t){if(fn(n,!0))return n.loadComplete=n.img=null,un(n,he),Ae(n),void(e.index===d&&i.updateCurrZoomItem());n.imageAppended?!Jt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):B.transform&&(oe||Jt)?rn.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):cn(t,n,s,n.img,oe||Jt,!0)}n.loadComplete=null,n.img=null,Ce("imageLoadComplete",t,n)}},o.features.transform){var l="pswp__img pswp__img--placeholder";l+=a.msrc?"":" pswp__img--placeholder--blank";var f=o.createEl(l,a.msrc?"img":"");a.msrc&&(f.src=a.msrc),dn(a,f),s.appendChild(f),a.placeholder=f}a.loading||ln(a),i.allowProgressiveImg()&&(!Vt&&B.transform?rn.push({item:a,baseDiv:s,img:a.img,index:t,holder:e}):cn(t,a,s,a.img,!0,!0))}Vt||t!==d?Ae(a):(re=s.style,tn(a,r||a.img)),e.el.innerHTML="",e.el.appendChild(s)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var mn,hn={},vn=function(e,t,n){var r=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(r)};Se("Tap",{publicMethods:{initTap:function(){Te("firstTouchStart",i.onTapStart),Te("touchRelease",i.onTapRelease),Te("destroy",function(){hn={},mn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(mn),mn=null)},onTapRelease:function(e,t){if(t&&!Y&&!G&&!Qe){var n=t;if(mn&&(clearTimeout(mn),mn=null,_t(n,hn)))return void Ce("doubleTap",n);if("mouse"===t.type)return void vn(e,t,"mouse");var r=e.target.tagName.toUpperCase();if("BUTTON"===r||o.hasClass(e.target,"pswp__single-tap"))return void vn(e,t);Fe(hn,n),mn=setTimeout(function(){vn(e,t),mn=null},300)}}}});var bn;Se("DesktopZoom",{publicMethods:{initDesktopZoom:function(){F||(R?Te("mouseUsed",function(){i.setupDesktopZoom()}):i.setupDesktopZoom(!0))},setupDesktopZoom:function(t){bn={};var n="wheel mousewheel DOMMouseScroll";Te("bindEvents",function(){o.bind(e,n,i.handleMouseWheel)}),Te("unbindEvents",function(){bn&&o.unbind(e,n,i.handleMouseWheel)}),i.mouseZoomedIn=!1;var r,a=function(){i.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),i.mouseZoomedIn=!1),1>y?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){r&&(o.removeClass(e,"pswp--dragging"),r=!1)};Te("resize",a),Te("afterChange",a),Te("pointerDown",function(){i.mouseZoomedIn&&(r=!0,o.addClass(e,"pswp--dragging"))}),Te("pointerUp",s),t||a()},handleMouseWheel:function(e){if(y<=i.currItem.fitRatio)return u.modal&&(!u.closeOnScroll||Qe||K?e.preventDefault():P&&Math.abs(e.deltaY)>2&&(f=!0,i.close())),!0;if(e.stopPropagation(),bn.x=0,"deltaX"in e)1===e.deltaMode?(bn.x=18*e.deltaX,bn.y=18*e.deltaY):(bn.x=e.deltaX,bn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(bn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?bn.y=-.16*e.wheelDeltaY:bn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;bn.y=e.detail}He(y,!0);var t=me.x-bn.x,n=me.y-bn.y;(u.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),i.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:he.x/2+be.x,y:he.y/2+be.y};var n=u.getDoubleTapZoom(!0,i.currItem),r=y===n;i.mouseZoomedIn=!r,i.zoomTo(r?i.currItem.initialZoomLevel:n,t,333),o[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var yn,gn,wn,xn,_n,kn,Sn,En,In,Tn,Cn,Mn,Pn={history:!0,galleryUID:1},On=function(){return Cn.hash.substring(1)},Rn=function(){yn&&clearTimeout(yn),wn&&clearTimeout(wn)},An=function(){var e=On(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var o=r[n].split("=");o.length<2||(t[o[0]]=o[1])}if(u.galleryPIDs){var i=t.pid;for(t.pid=0,n=0;n<Yt.length;n++)if(Yt[n].pid===i){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Ln=function(){if(wn&&clearTimeout(wn),Qe||K)return void(wn=setTimeout(Ln,500));xn?clearTimeout(gn):xn=!0;var e=d+1,t=Qt(d);t.hasOwnProperty("pid")&&(e=t.pid);var n=Sn+"&gid="+u.galleryUID+"&pid="+e;En||-1===Cn.hash.indexOf(n)&&(Tn=!0);var r=Cn.href.split("#")[0]+"#"+n;Mn?"#"+n!==window.location.hash&&history[En?"replaceState":"pushState"]("",document.title,r):En?Cn.replace(r):Cn.hash=n,En=!0,gn=setTimeout(function(){xn=!1},60)};Se("History",{publicMethods:{initHistory:function(){if(o.extend(u,Pn,!0),u.history){Cn=window.location,Tn=!1,In=!1,En=!1,Sn=On(),Mn="pushState"in history,Sn.indexOf("gid=")>-1&&(Sn=Sn.split("&gid=")[0],Sn=Sn.split("?gid=")[0]),Te("afterChange",i.updateURL),Te("unbindEvents",function(){o.unbind(window,"hashchange",i.onHashChange)});var e=function(){kn=!0,In||(Tn?history.back():Sn?Cn.hash=Sn:Mn?history.pushState("",document.title,Cn.pathname+Cn.search):Cn.hash=""),Rn()};Te("unbindEvents",function(){f&&e()}),Te("destroy",function(){kn||e()}),Te("firstUpdate",function(){d=An().pid});var t=Sn.indexOf("pid=");t>-1&&(Sn=Sn.substring(0,t),"&"===Sn.slice(-1)&&(Sn=Sn.slice(0,-1))),setTimeout(function(){c&&o.bind(window,"hashchange",i.onHashChange)},40)}},onHashChange:function(){return On()===Sn?(In=!0,void i.close()):void(xn||(_n=!0,i.goTo(An().pid),_n=!1))},updateURL:function(){Rn(),_n||(En?yn=setTimeout(Ln,800):Ln())}}}),o.extend(i,rt)};return e})},function(e,t,n){var r,o;!function(i,a){r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o))}(this,function(){"use strict";var e=function(e,t){var n,r,o,i,a,s,u,c,l,f,d,p,m,h,v,b,y,g,w,x=this,_=!1,k=!0,S=!0,E={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,
!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},I=function(e){if(b)return!0;e=e||window.event,v.timeToIdle&&v.mouseUsed&&!l&&N();for(var n,r,o=e.target||e.srcElement,i=o.getAttribute("class")||"",a=0;a<Z.length;a++)n=Z[a],n.onTap&&i.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),b=!0;var s=t.features.isOldAndroid?600:30;y=setTimeout(function(){b=!1},s)}},T=function(){return!e.likelyTouchDevice||v.mouseUsed||screen.width>v.fitControlsWidth},C=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},M=function(){var e=1===v.getNumItemsFn();e!==h&&(C(r,"ui--one-slide",e),h=e)},P=function(){C(u,"share-modal--hidden",S)},O=function(){return S=!S,S?(t.removeClass(u,"pswp__share-modal--fade-in"),setTimeout(function(){S&&P()},300)):(P(),setTimeout(function(){S||t.addClass(u,"pswp__share-modal--fade-in")},30)),S||A(),!1},R=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),n.href?n.hasAttribute("download")?!0:(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),S||O(),!1):!1},A=function(){for(var e,t,n,r,o,i="",a=0;a<v.shareButtons.length;a++)e=v.shareButtons[a],n=v.getImageURLForShare(e),r=v.getPageURLForShare(e),o=v.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(r)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),i+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",v.parseShareButtonOut&&(i=v.parseShareButtonOut(e,i));u.children[0].innerHTML=i,u.children[0].onclick=R},L=function(e){for(var n=0;n<v.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+v.closeElClasses[n]))return!0},D=0,N=function(){clearTimeout(w),D=0,l&&x.setIdle(!1)},F=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(w),w=setTimeout(function(){x.setIdle(!0)},v.timeToIdleOutside))},j=function(){v.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=x.getFullscreenAPI()),n?(t.bind(document,n.eventK,x.updateFullscreen),x.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},B=function(){v.preloaderEl&&(U(!0),f("beforeChange",function(){clearTimeout(m),m=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&U(!1):U(!0)},v.loadingIndicatorDelay)}),f("imageLoadComplete",function(t,n){e.currItem===n&&U(!0)}))},U=function(e){p!==e&&(C(d,"preloader--active",!e),p=e)},z=function(e){var n=e.vGap;if(T()){var a=v.barsSize;if(v.captionEl&&"auto"===a.bottom)if(i||(i=t.createEl("pswp__caption pswp__caption--fake"),i.appendChild(t.createEl("pswp__caption__center")),r.insertBefore(i,o),t.addClass(r,"pswp__ui--fit")),v.addCaptionHTMLFn(e,i,!0)){var s=i.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},q=function(){v.timeToIdle&&f("mouseUsed",function(){t.bind(document,"mousemove",N),t.bind(document,"mouseout",F),g=setInterval(function(){D++,2===D&&x.setIdle(!0)},v.timeToIdle/2)})},H=function(){f("onVerticalDrag",function(e){k&&.95>e?x.hideControls():!k&&e>=.95&&x.showControls()});var e;f("onPinchClose",function(t){k&&.9>t?(x.hideControls(),e=!0):e&&!k&&t>.9&&x.showControls()}),f("zoomGestureEnded",function(){e=!1,e&&!k&&x.showControls()})},Z=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){u=e},onTap:function(){O()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){O()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){d=e}}],W=function(){var e,n,o,i=function(r){if(r)for(var i=r.length,a=0;i>a;a++){e=r[a],n=e.className;for(var s=0;s<Z.length;s++)o=Z[s],n.indexOf("pswp__"+o.name)>-1&&(v[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};i(r.children);var a=t.getChildByClass(r,"pswp__top-bar");a&&i(a.children)};x.init=function(){t.extend(e.options,E,!0),v=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),f=e.listen,H(),f("beforeChange",x.update),f("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(v.getDoubleTapZoom(!1,e.currItem),t,333)}),f("preventDragEvent",function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)}),f("bindEvents",function(){t.bind(r,"pswpTap click",I),t.bind(e.scrollWrap,"pswpTap",x.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",x.onMouseOver)}),f("unbindEvents",function(){S||O(),g&&clearInterval(g),t.unbind(document,"mouseout",F),t.unbind(document,"mousemove",N),t.unbind(r,"pswpTap click",I),t.unbind(e.scrollWrap,"pswpTap",x.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",x.onMouseOver),n&&(t.unbind(document,n.eventK,x.updateFullscreen),n.isFullscreen()&&(v.hideAnimationDuration=0,n.exit()),n=null)}),f("destroy",function(){v.captionEl&&(i&&r.removeChild(i),t.removeClass(o,"pswp__caption--empty")),u&&(u.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),x.setIdle(!1)}),v.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),f("initialZoomIn",function(){v.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")}),f("initialZoomOut",function(){t.addClass(r,"pswp__ui--hidden")}),f("parseVerticalMargin",z),W(),v.shareEl&&s&&u&&(S=!0),M(),q(),j(),B()},x.setIdle=function(e){l=e,C(r,"ui--idle",e)},x.update=function(){k&&e.currItem?(x.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(e.currItem,o),C(o,"caption--empty",!e.currItem.title)),_=!0):_=!1,S||O(),M()},x.updateFullscreen=function(r){r&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},x.updateIndexIndicator=function(){v.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},x.onGlobalTap=function(n){n=n||window.event;var r=n.target||n.srcElement;if(!b)if(n.detail&&"mouse"===n.detail.pointerType){if(L(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?v.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(v.tapToToggleControls&&(k?x.hideControls():x.showControls()),v.tapToClose&&(t.hasClass(r,"pswp__img")||L(r)))return void e.close()},x.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;C(r,"ui--over-close",L(t))},x.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),k=!1},x.showControls=function(){k=!0,_||x.update(),t.removeClass(r,"pswp__ui--hidden")},x.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},x.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return c=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return v.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e})},function(e,t){e.exports='<div class="pswp bf2-pswp" tabindex=-1 role=dialog aria-hidden=true> <div class=pswp__bg></div> <div class=pswp__scroll-wrap> <div class=pswp__container> <div class=pswp__item></div> <div class=pswp__item></div> <div class=pswp__item></div> </div> <div class="pswp__ui pswp__ui--hidden"> <div class=pswp__top-bar> <div class=pswp__counter></div> <button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button> <div class=pswp__preloader> <div class=pswp__preloader__icn> <div class=pswp__preloader__cut> <div class=pswp__preloader__donut></div> </div> </div> </div> </div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"> <div class=pswp__share-tooltip></div> </div> <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"> </button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"> </button> <div class=pswp__caption> <div class=pswp__caption__center></div> </div> </div> </div> </div>'},function(e,t,n){"use strict";var r=n(5),o=(0,r.registerModule)("no-read-more",!1);o.watch("a.read-more",function(e){return e.click()})}]);
//# sourceMappingURL=better-feed.min.js.map