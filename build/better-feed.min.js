(()=>{"use strict";var e={476:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(81),o=t.n(r),a=t(645),i=t.n(a)()(o());i.push([e.id,'.comment .comment-icon:not(.fa-stack) {\n  position: relative;\n  top: -2px;\n  left: -1px;\n  z-index: 1;\n}\n.comment-likes .comment-likes-list {\n  z-index: 2;\n}\n.bf2-ico-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  color: #fff;\n  display: none;\n}\n.comment[data-comm-props~="from"] .bf2-ico-bg {\n  display: block;\n}\n.comment[data-comm-props~="from-reader"] .bf2-ico-bg {\n  color: #EDEDED;\n}\n.comment[data-comm-props~="from-friend"] .bf2-ico-bg {\n  color: #CEF4FC;\n}\n.comment[data-comm-props~="from-post-author"] .bf2-ico-bg {\n  color: #B5B5B5;\n}\n.comment[data-comm-props~="from-me"] .bf2-ico-bg {\n  color: #FFD061;\n}\n.comment.omit-bubble .bf2-ico-bg {\n  display: none;\n}\n.bf2-comment-avatar {\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-size: cover;\n  top: 0;\n  left: -4px;\n  z-index: 1;\n  background-color: #fff;\n  border-radius: 50%;\n  border: 1px solid #ccc;\n  box-sizing: content-box;\n  pointer-events: none;\n}\n.comment.omit-bubble .bf2-comment-avatar {\n  display: none;\n}\n.bf2-gamma-frontend .highlighted .bf2-comment-avatar {\n  top: 4px;\n  left: 3px;\n}\n.bf2-comments-with-avatars .comment-time {\n  margin-right: 5px;\n}\n.bf2-comments-with-avatars .feed-comment-dot:after {\n  margin-top: 1px;\n}\n.bf2-comments-with-avatars .comment {\n  margin-top: 10px;\n}\n.bf2-comments-with-avatars .bf2-likecomm-shift {\n  left: -9px;\n}\n.bf2-comments-with-avatars .likes {\n  position: relative;\n  left: -2px;\n}\n.bf2-comments-with-avatars .likes .icon {\n  margin-right: 7px;\n}\n.bf2-comments-with-avatars .fold-comments-sticky {\n  z-index: 2;\n}\n.bf2-comments-with-avatars .fold-comments-sticky i {\n  left: -2px;\n}\n.bf2-gamma-frontend.bf2-comments-with-avatars .comment.highlighted {\n  margin-top: 6px;\n}\n',""]);const s=i},459:(e,n,t)=>{t.d(n,{Z:()=>d});var r=t(81),o=t.n(r),a=t(645),i=t.n(a),s=t(667),c=t.n(s),u=new URL(t(632),t.b),l=i()(o()),f=c()(u);l.push([e.id,'.bf2-lightbox-container {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 10;\n}\n.bf2-lightbox-shadow {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.bf2-lightbox-content {\n  position: relative;\n  border: 1px solid #000;\n  background-color: #ccc;\n  box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);\n}\n.bf2-settings-lightbox .bf2-lightbox-content {\n  width: 90vw;\n  height: 90vh;\n  max-width: 800px;\n}\n.bf2-settings-lightbox .bf2-lightbox-content iframe {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.bf2-access-token-lightbox .bf2-lightbox-content {\n  background-color: white;\n  max-width: 90vw;\n  padding: 2em;\n}\n.bf2-access-token-lightbox .bf2-lightbox-content button {\n  padding: 0.25em 2em;\n  cursor: pointer;\n}\n.bf2-access-token-lightbox .bf2-lightbox-content .bf2-access-token {\n  word-wrap: break-word;\n  font-family: monospace;\n  color: #069;\n  background-color: #eee;\n  padding: 1em;\n}\n.bf2-green {\n  padding: 1em;\n}\n.bf2-via-names {\n  font-size: 12px;\n}\n.bf2-hide-aliens-cont {\n  font-size: 14px;\n  font-weight: normal;\n  margin-left: 1em;\n  display: none;\n}\n.bf2-homepage .bf2-hide-aliens-cont {\n  display: inline;\n}\n.bf2-hide-aliens .bf2-alien-post {\n  display: none;\n}\n.bf2-saving-settings-indicator {\n  position: fixed;\n  top: 0.66em;\n  right: 1em;\n  background: #f66;\n  color: white;\n  padding: 0.25em 1em;\n  border-radius: 4px;\n  z-index: 100;\n}\n.bf2-animated-gif {\n  position: relative;\n  display: inline-block;\n}\n.bf2-animated-gif::after {\n  content: "\\25B6 GIF";\n  position: absolute;\n  bottom: 3px;\n  right: 4px;\n  background-color: #069;\n  color: #eee;\n  font-weight: bold;\n  padding: 0.1em 0.4em;\n  border-radius: 3px;\n  font-size: 11px;\n  line-height: normal;\n}\n.arrow-span {\n  padding: 0 0.2em;\n}\n.bf2-moon {\n  width: 18px;\n  height: 18px;\n  margin-left: 4px;\n  margin-bottom: 10px;\n}\n.bf2-moon-shadow {\n  fill: #666;\n}\n.bf2-moon-light {\n  fill: #f5eed9;\n}\n.bf2-moon-cont {\n  display: inline-block;\n}\n.bf2-switch-acc {\n  color: #ccc;\n  cursor: pointer;\n  text-align: center;\n}\n.bf2-switch-acc:hover {\n  background-color: #eee;\n  color: #000;\n}\n.bf2-switch-acc__icon {\n  display: inline-block;\n  background: url('+f+') no-repeat;\n  background-size: contain;\n  width: 14px;\n  height: 14px;\n  opacity: 0.4;\n}\n.bf2-switch-account-box .bf2-lightbox-content {\n  width: 360px;\n  height: auto;\n  cursor: auto;\n  border: 1px solid #000;\n  box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.5);\n  background-color: #ffffff;\n  padding: 1em;\n}\n.bf2-switch-dlg-header {\n  font-size: 120%;\n}\n.bf2-switch-dlg-accounts {\n  margin: 1em 0;\n}\n.bf2-switch-dlg-account {\n  cursor: pointer;\n  font-weight: bold;\n  border: 1px solid #ddd;\n  margin: 0.5em 0;\n  position: relative;\n}\n.bf2-switch-dlg-account:hover,\n.bf2-switch-dlg-account.-current {\n  background-color: #eee;\n}\n.bf2-switch-dlg-account.-current {\n  cursor: not-allowed;\n}\n.bf2-switch-dlg-account.-current .bf2-switch-dlg-del {\n  display: none;\n}\n.bf2-switch-dlg-upic {\n  width: 50px;\n  height: 50px;\n  margin-right: 1em;\n  border-right: 1px solid #ddd;\n}\n.bf2-switch-dlg-new-form {\n  display: none;\n}\n.bf2-switch-dlg-del {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  text-align: center;\n  margin-top: -10px;\n}\n.bf2-switch-dlg-del:hover {\n  color: #c00;\n}\n.box {\n  clear: both;\n}\n.bf2-lightboxed-images .image-attachments a {\n  cursor: zoom-in;\n}\n.bf2-search-highlight {\n  background-color: #ffff80;\n}\n.bf2-hp-pre:empty {\n  display: none;\n}\n.bf2-hp-pre-\\( {\n  margin-right: 0.13em;\n}\n.bf2-hp-\\( {\n  margin-left: -0.13em;\n}\n.bf2-hp-pre-« {\n  margin-right: 0.2em;\n}\n.bf2-hp-« {\n  margin-left: -0.2em;\n}\n.bf2-hp-pre-\\" {\n  margin-right: 0.2em;\n}\n.bf2-hp-\\" {\n  margin-left: -0.2em;\n}\n.bf2-hp-pre-“ {\n  margin-right: 0.33em;\n}\n.bf2-hp-“ {\n  margin-left: -0.33em;\n}\n.bf2-hp-pre-- {\n  margin-right: 0.1em;\n}\n.bf2-hp-- {\n  margin-left: -0.1em;\n}\n',""]);const d=l},918:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(81),o=t.n(r),a=t(645),i=t.n(a)()(o());i.push([e.id,".bf2-prvs {\n  margin-left: 1.1875rem;\n  position: relative;\n}\n.bf2-prvs__item {\n  width: 4rem;\n  height: 4rem;\n  border: 1px solid #999;\n  object-fit: cover;\n  border-radius: 2px;\n  cursor: pointer;\n  margin-right: 0.3rem;\n  margin-top: 0.3rem;\n}\n.bf2-prvs__item--video {\n  width: 5rem;\n  height: 3rem;\n}\n",""]);const s=i},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),n.push(l))}},n}},667:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],u=r.base?c[0]+r.base:c[0],l=a[u]||0,f="".concat(u," ").concat(l);a[u]=l+1;var d=t(f),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)n[d].references++,n[d].updater(p);else{var h=o(p,r);r.byIndex=s,n.splice(s,0,{identifier:f,updater:h,references:1})}i.push(f)}return i}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=t(a[i]);n[s].references--}for(var c=r(e,o),u=0;u<a.length;u++){var l=t(a[u]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}a=c}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},632:(e,n,t)=>{e.exports=t.p+"98a4c691c59b1b2090b6.svg"}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href,(()=>{var e=t(379),n=t.n(e),r=t(795),o=t.n(r),a=t(569),i=t.n(a),s=t(565),c=t.n(s),u=t(216),l=t.n(u),f=t(589),d=t.n(f),p=t(459),h={};h.styleTagTransform=d(),h.setAttributes=c(),h.insert=i().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=l(),n()(p.Z,h),p.Z&&p.Z.locals&&p.Z.locals;var m="matches"in HTMLElement.prototype?"matches":"msMatchesSelector";function b(e,n){return e[m](n)}const v=function(e,n,t){if(null===e)return[];var r=e.querySelectorAll(n),o=r?Array.prototype.slice.call(r):[];if(b(e,n)&&o.unshift(e),t)for(var a=0,i=o.length;a<i;a++)t(o[a]);return o};function g(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function y(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=new Map,x=function(){function e(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g(this,e),this.name=n,this.alwaysEnabled=r,this.enabledByDefault=t,this.requiredModules=[],this.active=!0,this._watchers=[],this._initiators=[]}var n,t;return n=e,(t=[{key:"init",value:function(e){this._initiators.push(e)}},{key:"watch",value:function(e,n){this._watchers.push({selector:e,callback:n})}},{key:"required",value:function(e){this.requiredModules.push(e)}},{key:"_initiate",value:function(e){this.active&&(this._initiators.forEach((function(n){return n(e)})),this._watchers.forEach((function(n){var t=n.selector,r=n.callback;return v(document.body,t,(function(n){return r(n,e)}))})))}},{key:"_trigger",value:function(e){this.active&&this._watchers.forEach((function(n){var t=n.selector,r=n.callback;return v(e,t,(function(e){return r(e,E)}))}))}}])&&y(n.prototype,t),e}();function k(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new x(e,n,t);return w.set(e,r),r}var E=null;function S(e){E||(E=e,w.forEach((function(e){E.isModuleEnabled(e)&&e._initiate(E)})),new MutationObserver((function(e){e.forEach((function(e){for(var n=function(n,t){var r=e.addedNodes[n];r.nodeType==Node.ELEMENT_NODE&&w.forEach((function(e){E.isModuleEnabled(e)&&e._trigger(r,E)}))},t=0,r=e.addedNodes.length;t<r;t++)n(t)}))})).observe(document.body,{childList:!0,subtree:!0}))}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var T={"freefeed.net":{cookies:["freefeedBETA_authToken","freefeed_authToken"]},"gamma.freefeed.net":{cookies:["freefeed_authToken"]}},A=location.hostname,M="freefeedBETA_authToken";function P(){if(A in T){var e,n=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw a}}}}(T[A].cookies);try{for(n.s();!(e=n.n()).done;){var t=e.value,r=C(localStorage.getItem(t)),o=r.userId,a=r.authToken;if(o)return{userId:o,authToken:a}}}catch(e){n.e(e)}finally{n.f()}}return{userId:null,authToken:null}}function C(e){if(null!==e){var n=e.split(".");if(3===n.length)try{var t=JSON.parse(atob(n[1]));if("userId"in t)return{authToken:e,userId:t.userId}}catch(e){}}return{authToken:null,userId:null}}function R(e,n){return new Promise((function(t,r){var o=new XMLHttpRequest;o.open("PUT",j(e)),o.responseType="json",o.setRequestHeader("Authorization","Bearer "+P().authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):t(o.response)},o.send(n)}))}function I(e,n){return new Promise((function(t,r){var o=new XMLHttpRequest;o.open("POST",j(e)),o.responseType="json",o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):t(o.response)},o.send(n)}))}function j(e){return"https://freefeed.net"+e+(-1!==e.indexOf("?")?"&":"?")+"_initiator=betterfeed2"}var L=window.__BetterFeedRoot||"https://cdn.jsdelivr.net/gh/davidmz/BetterFeed2@"+localStorage["bf2-version"];if(document.currentScript){var O=document.currentScript.src.split("/");L=O.slice(0,O.length-2).join("/")}const N=L;function q(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function D(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){q(a,r,o,i,s,"next",e)}function s(e){q(a,r,o,i,s,"throw",e)}i(void 0)}))}}t.p;var B="".concat(N,"/build/default-userpic-50.png"),F=new Map;function z(){return(z=D(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://davidmz.me/frfrfr/uinfo/upic?username=".concat(n));case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,e.abrupt("return","ok"===t.status&&""!==t.data?t.data:B);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return F.has(e)||F.set(e,function(e){return z.apply(this,arguments)}(e)),F.get(e)}function Z(e,n){F.set(e,Promise.resolve(n&&""!==n?n:B))}const H=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function J(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=n}var n,t;return n=e,(t=[{key:"toString",value:function(){return this.text}}])&&J(n.prototype,t),e}();function V(e){return new Q(e)}function X(e){return e instanceof Q}function G(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return V(e.reduce((function(e,n,r){var o=t[r-1];return e+(X(o)?o:$(o))+n})))}function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function K(e,n,t){var r,o,a,i=e.split("."),s=i.shift()||"div";"$"===s?a=document.createDocumentFragment():(a=document.createElement(s),i.length>0&&(a.className=i.join(" ")));var c=1;if(arguments.length>1&&"object"===W(n)&&!(n instanceof Node)&&!H(n)&&!X(n)){for(o in n)n.hasOwnProperty(o)&&a.setAttribute(o,n[o]);c=2}if(arguments.length>c)for(r=c;r<arguments.length;r++)Y(a,arguments[r]);return a}function Y(e,n){n instanceof Node?e.appendChild(n):H(n)?n.forEach(Y.bind(null,e)):"string"==typeof n?e.appendChild(document.createTextNode(n)):X(n)&&e.insertAdjacentHTML("beforeEnd",n.toString())}function ee(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function ne(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var te="me.davidmz.BetterFeed2",re=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.me=null,this.myID=null,this.myScreenName=null,this.friends=[],this.readers=[],this.banIds=[],this.bf2Props={},this._savePropsQueue=[],this._savingPropsNow=!1,this._savingIndicator=K(".bf2-saving-settings-indicator","Saving settings…")}var n,t,r,o;return n=e,t=[{key:"whoIs",value:function(n){var t=0;return n===this.me&&(t|=e.ME),-1!==this.friends.indexOf(n)&&(t|=e.FRIEND),-1!==this.readers.indexOf(n)&&(t|=e.READER),t}},{key:"isBanned",value:function(e){return-1!==this.banIds.indexOf(e)}},{key:"saveProps",value:function(e){return this._savePropsQueue.push(e.toJSON()),this._saveProps()}},{key:"_saveProps",value:(r=regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._savingPropsNow){e.next=2;break}return e.abrupt("return");case 2:document.body.appendChild(this._savingIndicator),this._savingPropsNow=!0;case 4:if(!(this._savePropsQueue.length>0)){e.next=11;break}for(r in n=this._savePropsQueue.shift(),t={},n)n.hasOwnProperty(r)&&(t[r]=null);return e.next=9,R("/v1/users/".concat(this.myID),JSON.stringify({user:{frontendPreferences:(o={},a=te,i=n,a in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,o)}}));case 9:e.next=4;break;case 11:this._savingPropsNow=!1,document.body.removeChild(this._savingIndicator);case 13:case"end":return e.stop()}var o,a,i}),e,this)})),o=function(){var e=this,n=arguments;return new Promise((function(t,o){var a=r.apply(e,n);function i(e){ee(a,t,o,i,s,"next",e)}function s(e){ee(a,t,o,i,s,"throw",e)}i(void 0)}))},function(){return o.apply(this,arguments)})}],t&&ne(n.prototype,t),e}();re.ME=1,re.FRIEND=2,re.READER=4,re.ready=null,re.update=function(){re.ready=("/v2/users/whoami",new Promise((function(e,n){var t=new XMLHttpRequest;t.open("GET",j("/v2/users/whoami")),t.responseType="json",t.setRequestHeader("Authorization","Bearer "+P().authToken),t.onload=function(){t.response&&"err"in t.response?n(t.response.err):e(t.response)},t.send()}))).then((function(e){var n=new re;return n.me=e.users.username,n.myID=e.users.id,n.myScreenName=e.users.screenName,Z(e.users.username,e.users.profilePictureMediumUrl),n.friends=e.subscribers.map((function(e){return Z(e.username,e.profilePictureMediumUrl),e.username})),n.readers=e.users.subscribers.map((function(e){return Z(e.username,e.profilePictureMediumUrl),e.username})),n.banIds=e.users.banIds,n.bf2Props=e.users.frontendPreferences[te]||{},n}))},re.update();const oe=new Promise((function(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,0):document.addEventListener("DOMContentLoaded",e)}));function ae(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return ie(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ie(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function se(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ce(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ue=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];se(this,e),this.modules=new Map,w.forEach((function(e){e.alwaysEnabled||n.modules.set(e.name,e.enabledByDefault)})),this.hideAliens=!1,this.commentCloudsMode=2,t&&((t.modules||[]).forEach((function(e){var t=ae(e,2),o=t[0],a=t[1];(r||n.modules.has(o))&&n.modules.set(o,!!a)})),this.hideAliens=!!t.hideAliens,1!==t.commentCloudsMode&&2!==t.commentCloudsMode||(this.commentCloudsMode=t.commentCloudsMode))}var n,t;return n=e,(t=[{key:"toJSON",value:function(){var e={modules:[]};return this.modules.forEach((function(n,t){return e.modules.push([t,n])})),e.hideAliens=this.hideAliens,e.commentCloudsMode=this.commentCloudsMode,e}},{key:"isModuleEnabled",value:function(e){var n=this;return e&&(e.alwaysEnabled||!this.modules.has(e.name)&&e.enabledByDefault||this.modules.get(e.name))&&!e.requiredModules.map((function(e){return w.get(e)})).some((function(e){return!n.isModuleEnabled(e)}))}}])&&ce(n.prototype,t),e}();function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function fe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function de(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pe=1,he="@response",me=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";fe(this,e),this.__responders=new Map,this.__listeners=new Map,this.defaultWindow=t,this.defaultOrigin=r,window.addEventListener("message",(function(e){if("object"===le(e.data)){var t=e.data,r=t.action,o=t.requestId,a=t.value,i=e.source,s=e.origin;if(r===he&&n.__responders.has(o))n.__responders.get(o)(a),n.__responders.delete(o);else if(n.__listeners.has(r)){var c=n.__listeners.get(r)(a);i.postMessage({action:he,requestId:o,value:c},s)}}}))}var n,t;return n=e,t=[{key:"send",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.sendEx(this.defaultWindow,this.defaultOrigin,e,n)}},{key:"sendEx",value:function(e,n,t){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(a){var i=pe++;r.__responders.set(i,a),e.postMessage({action:t,requestId:i,value:o},n)}))}},{key:"on",value:function(e,n){this.__listeners.set(e,n)}}],t&&de(n.prototype,t),e}(),be=!!Element.prototype.closest;function ve(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)return null;var r=t?e:e.parentNode;return be&&r?r.closest(n):r&&r.nodeType==Node.ELEMENT_NODE?b(r,n)?r:ve(r,n):null}var ge=[],ye=history.pushState.bind(history),we=history.replaceState.bind(history);function xe(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}history.pushState=function(e,n,t){ye(e,n,t),ge.forEach((function(e){return e(location)}))},history.replaceState=function(e,n,t){we(e,n,t),ge.forEach((function(e){return e(location)}))},window.addEventListener("popstate",(function(){return ge.forEach((function(e){return e(location)}))}));var ke=k("common",!0,!0);function Ee(e){var n=e.dataset.author;if(!n){var t=e.querySelector(".comment-body > .user-name-wrapper > a");t&&(n=t.getAttribute("href").substr(1),e.dataset.author=n)}return n}function Se(e){var n=e.dataset.author;if(!n){var t=e.querySelector(".post-header a.post-author");t&&(n=t.getAttribute("href").substr(1),e.dataset.author=n)}return n}function _e(e){return/[\u0600-\u06ff\u0700-\u077f\u08A0-\u08ff]/.test(e)}function Te(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ae(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ke.init((function(){var e;e=function(e){var n="/"===e.pathname,t="/filter/best_of"===e.pathname;document.body.classList.toggle("bf2-homepage",n),document.body.classList.toggle("bf2-best-of",t),document.body.classList.toggle("bf2-aggregate-page",n||t)},ge.push(e),e(location),document.addEventListener("click",(function(e){if(0==e.button&&e.target.classList.contains("bf2-user-link")){var n=document.querySelector('a:not(.bf2-user-link)[href="'.concat(CSS.escape(e.target.getAttribute("href")),'"]'));n&&(e.preventDefault(),e.target.blur(),n.click())}})),"gamma.freefeed.net"===A&&document.body.classList.add("bf2-gamma-frontend")})),ke.watch(".timeline-post, .single-post",(function(e){var n=e.querySelector(".post-timestamp").getAttribute("href").match(/^\/.+?\/([\w-]+)/)[1];e.id="post-".concat(n),e.dataset.postId=n;var t=e.querySelector(".post-author").getAttribute("href").substr(1);e.dataset.postAuthor=t,e.classList.add("bf2-post-from-".concat(t)),v(e,".post-recipient").map((function(e){return e.getAttribute("href").substr(1)})).filter((function(e){return e!==t})).forEach((function(n){return e.classList.add("bf2-post-to-".concat(n))}));var r=e.querySelector(".post-text"),o=e.querySelector(".comment-body");(_e(r.textContent)||o&&_e(o.textContent))&&e.classList.add("bf2-lang-arabic")})),ke.watch(".user-card .display-name",(function(e){ve(e,".user-card").dataset.userName=e.getAttribute("href").substr(1)})),ke.watch(".comment",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ee(n)){e.next=3;break}return e.abrupt("return");case 3:if(r=Se(ve(n,".post"))){e.next=6;break}return e.abrupt("return");case 6:return(o=[]).push("from"),r===t&&o.push("from-post-author"),e.next=11,re.ready;case 11:(a=e.sent.whoIs(t))&re.ME?o.push("from-me"):a&re.FRIEND?o.push("from-friend"):a&re.READER&&o.push("from-reader"),n.dataset.commProps=o.join(" ");case 14:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){xe(a,r,o,i,s,"next",e)}function s(e){xe(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}());var Me=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Te(this,e),this._container=K(".bf2-lightbox-container"),""!==t&&this._container.classList.add(t);var o=this._container.appendChild(K(".bf2-lightbox-shadow"));this.contentEl=o.appendChild(K(".bf2-lightbox-content")),o.addEventListener("click",(function(e){e.target!==o||r||n.hide()}))}var n,t;return n=e,(t=[{key:"showContent",value:function(e){"string"==typeof e?this.contentEl.innerHTML=e:(this.contentEl.innerHTML="",this.contentEl.appendChild(e)),document.body.appendChild(this._container)}},{key:"hide",value:function(){this.contentEl.innerHTML="",this._container.parentNode.removeChild(this._container)}}])&&Ae(n.prototype,t),e}();function Pe(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function Ce(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){Pe(a,r,o,i,s,"next",e)}function s(e){Pe(a,r,o,i,s,"throw",e)}i(void 0)}))}}var Re="v2.21.2";function Ie(){return je.apply(this,arguments)}function je(){return je=Ce(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N+"/src/html/settings.html",e.next=3,fetch(n).then((function(e){return e.text()}));case 3:if(t=e.sent.replace(/\[\[parentOrigin]]/g,$(location.origin)).replace(/\[\[betterFeedVersion]]/g,$(Re)).replace(/\[\[baseURL]]/g,$(N+"/")),r=URL.createObjectURL(new Blob([t],{type:"text/html;charset=utf-8"})),!/iPhone|iPad/.test(navigator.userAgent)){e.next=8;break}return window.open(r,"_blank"),e.abrupt("return");case 8:new Me("bf2-settings-lightbox").showContent(K("iframe",{src:r,frameborder:"0"}));case 9:case"end":return e.stop()}}),e)}))),je.apply(this,arguments)}k("settings-link",!0,!0).watch(".sidebar",(function(e){if(!e.querySelector(".bf2-sidebar-box")){var n=K("a","BetterFeed settings"),t=K(".bf2-sidebar-box.box",K(".box-header-groups","Add-ons"),K(".box-body",K("ul",K("li",n))),K(".box-footer",Re));e.querySelector(".box").parentNode.insertBefore(t,null),n.addEventListener("click",Ie)}})),k("moon").watch("h1",(function(e){e.appendChild(K(".bf2-moon-cont")).innerHTML='<svg class="bf2-moon" viewBox="-4 -4 108 108" xmlns="http://www.w3.org/2000/svg" version="1.1">\n        <circle class="bf2-moon-shadow" cx="50" cy="50" r="54"></circle>\n        <path class="bf2-moon-light" d="M 50 0 a 30 50 0 0 0 0 100 a 50 50 0 0 0 0 -100 Z"></path>\n    </svg>',qe(Ne()),setInterval((function(){return qe(Ne())}),36e5)}));var Le=new Date("Thu Apr 07 2016 14:22:37 GMT+0300").getTime(),Oe=Math.round(2551442813.5680003);function Ne(){return((new Date).getTime()-Le)/Oe%1}function qe(e){var n=document.querySelector(".bf2-moon");if(n){var t,r=n.querySelector(".bf2-moon-light"),o=50*Math.abs(Math.cos(2*Math.PI*e));t=e<.25?"M 50 0 a ".concat(o," 50 0 0 1 0 100 a 50 50 0 0 0 0 -100 Z"):e<.5?"M 50 0 a ".concat(o," 50 0 0 0 0 100 a 50 50 0 0 0 0 -100 Z"):"M 50 0 a 50 50 0 0 0 0 100 a ".concat(o,e<.75?" 50 0 0 0 0 -100 Z":" 50 0 0 1 0 -100 Z"),r.setAttribute("d",t),Math.abs(.5-e)<.05?n.parentNode.setAttribute("title","Achtung Vollmond!"):n.parentNode.removeAttribute("title")}}function De(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be,Fe,ze,Ue="https://davidmz.github.io/BetterFeed2/storage.html?_="+Math.random(),Ze=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.iframe=document.createElement("iframe"),this.iframe.src=Ue,this.iframe.style.cssText="visibility: hidden;\n            position: absolute;\n            left: 0; top: 0;\n            height:0; width:0;\n            border: none;",document.body.appendChild(this.iframe),this.msg=new me(this.iframe.contentWindow,"https://davidmz.github.io")}var n,t;return n=e,(t=[{key:"get",value:function(e){return this.msg.send("get",e)}},{key:"set",value:function(e,n){return this.msg.send("set",{key:e,value:n})}}])&&De(n.prototype,t),e}();function He(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function $e(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function Je(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){$e(a,r,o,i,s,"next",e)}function s(e){$e(a,r,o,i,s,"throw",e)}i(void 0)}))}}var Qe=k("switch-accounts"),Ve="bf2-switch-dlg-",Xe="bfAccounts-freefeed.net",Ge=[{selector:".".concat(Ve,"del"),handler:function(e){return confirm("Are you sure?")?Je(regeneratorRuntime.mark((function n(){var t,r,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,re.ready;case 2:if(t=n.sent,r=t.me,(o=ve(e,".".concat(Ve,"account")).dataset.username)!==r){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,rn();case 9:if(1!==(a=n.sent.filter((function(e){return e.username!==o}))).length||a[0].username!==r){n.next=15;break}return n.next=13,We.set(Xe,null);case 13:n.next=17;break;case 15:return n.next=17,We.set(Xe,a);case 17:return n.t0=Ke,n.next=20,nn();case 20:n.t1=n.sent,n.t0.showContent.call(n.t0,n.t1);case 22:case"end":return n.stop()}}),n)})))():Promise.resolve()}},{selector:".".concat(Ve,"account"),handler:function(e){return cn.apply(this,arguments)}},{selector:".".concat(Ve,"add-new"),handler:function(e){e.style.display="none",document.body.querySelector(".".concat(Ve,"new-form")).style.display="block"}}],We=null;Qe.init((function(){We=new Ze,document.body.addEventListener("click",(function(e){Ge.some((function(n){var t=ve(e.target,n.selector,!0);return!!t&&(e.preventDefault(),n.handler(t),!0)}))}))})),Qe.watch(".logged-in > .avatar, .logged-in > .userpic",(function(e){e.appendChild(K(".bf2-switch-acc",{title:"Switch account"},K("span.bf2-switch-acc__icon"))).addEventListener("click",Ye)}));var Ke=null;function Ye(){return en.apply(this,arguments)}function en(){return(en=Je(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(Ke=new Me("bf2-switch-account-box")).showContent("<p>Loading…</p>"),e.t0=Ke,e.next=5,nn();case 5:e.t1=e.sent,e.t0.showContent.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nn(){return tn.apply(this,arguments)}function tn(){return(tn=Je(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.ready;case 2:return n=e.sent,t=n.me,(r=K("form.".concat(Ve,"new-form"),G(Be||(Be=He(['\n            <p>Please enter username and password of your other account:</p>\n            <p><input class="form-control" type="text" name="username" placeholder="Username" required></p>\n            <p><input class="form-control" type="password" name="password" placeholder="Password" required></p>\n            <p>\n                <button type="submit" class="btn btn-default">Add</button>\n            </p>\n        ']))))).addEventListener("submit",(function(e){e.preventDefault();var n=r.elements.username.value,t=r.elements.password.value;Je(regeneratorRuntime.mark((function e(){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/v1/session","username=".concat(encodeURIComponent(n),"&password=").concat(encodeURIComponent(t)));case 2:if(!(r=e.sent).err){e.next=6;break}return alert(r.err),e.abrupt("return");case 6:return o=r.users.username,a=r.authToken,e.next=9,an(o,a);case 9:return e.t0=Ke,e.next=12,nn();case 12:e.t1=e.sent,e.t0.showContent.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e)})))()})),e.t0=K,e.t1=G(Fe||(Fe=He(['\n            <div class="','header">Switch account to:</div>'])),Ve),e.t2=K,e.t3=".".concat(Ve,"accounts"),e.next=12,rn();case 12:return e.t4=e.sent.map((function(e){var n=e.username,r=K("img.".concat(Ve,"upic"),{src:B});U(n).then((function(e){return r.src=e}));var o=K(".".concat(Ve,"del"),{title:"Remove from list"},K("i.fa.fa-times-circle"));return K(".".concat(Ve,"account").concat(n===t?".-current":""),{"data-username":n},r,n,o)})),e.t5=(0,e.t2)(e.t3,e.t4),e.t6=G(ze||(ze=He(['\n            <div class="','add-new"><a><i class="fa fa-plus"></i> Add new account</a></div>'])),Ve),e.t7=r,e.abrupt("return",(0,e.t0)("",e.t1,e.t5,e.t6,e.t7));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rn(){return on.apply(this,arguments)}function on(){return(on=Je(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get(Xe);case 2:if(n=e.sent){e.next=10;break}return e.next=6,re.ready;case 6:e.t0=e.sent.me,e.t1=P().authToken,e.t2={username:e.t0,token:e.t1},n=[e.t2];case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function an(e,n){return sn.apply(this,arguments)}function sn(){return(sn=Je(regeneratorRuntime.mark((function e(n,t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn();case 2:return r=e.sent,(o=r.find((function(e){return e.username===n})))?o.token=t:r.push({username:n,token:t}),e.next=7,We.set(Xe,r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cn(){return(cn=Je(regeneratorRuntime.mark((function e(n){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.ready;case 2:if(t=e.sent.me,(r=n.dataset.username)!==t){e.next=6;break}return e.abrupt("return");case 6:return o=null,e.next=9,rn();case 9:if(e.sent.some((function(e){return e.username===r&&(o=e.token,!0)})),!o){e.next=16;break}return Ke.showContent("Please wait…"),e.next=14,an(t,P().authToken);case 14:localStorage.setItem(M,o),location.reload();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var un=k("no-read-more",!1);un.watch("a.read-more",(function(e){return e.click()})),un.watch(".expand-button > i",(function(e){return e.click()}));var ln=t(476),fn={};function dn(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}fn.styleTagTransform=d(),fn.setAttributes=c(),fn.insert=i().bind(null,"head"),fn.domAPI=o(),fn.insertStyleElement=l(),n()(ln.Z,fn),ln.Z&&ln.Z.locals&&ln.Z.locals;var pn=k("comment-clouds"),hn=new Map,mn=!1,bn=null;function vn(e,n){if(e.nodeType===Node.TEXT_NODE)n(e);else if(e.nodeType===Node.ELEMENT_NODE)for(var t=e.firstChild;t;){var r=t.nextSibling;vn(t,n),t=r}}pn.init((function(e){bn=document.head.appendChild(K("style.bf2-comments-avatars")).sheet,(mn=2===e.commentCloudsMode)&&document.body.classList.add("bf2-comments-with-avatars")})),pn.watch(".comment[data-author]",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.querySelector(".bf2-comment-ex")&&!n.classList.contains("is-hidden")){e.next=2;break}return e.abrupt("return");case 2:if(!mn){e.next=20;break}if(t=n.dataset.author,n.appendChild(K(".bf2-comment-avatar.bf2-comment-ex")),hn.has(t)){e.next=18;break}if(hn.set(t,!0),e.t0=U,e.t1=t,e.t1){e.next=13;break}return e.next=12,re.ready;case 12:e.t1=e.sent.me;case 13:return e.t2=e.t1,e.next=16,(0,e.t0)(e.t2);case 16:r=e.sent,bn.insertRule('.comment[data-author="'.concat(t,'"] .bf2-comment-avatar { background-image: url(').concat(r,"); }"),0);case 18:e.next=21;break;case 20:n.appendChild(K("i.fa.fa-comment.icon.bf2-ico-bg.bf2-comment-ex"));case 21:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){dn(a,r,o,i,s,"next",e)}function s(e){dn(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()),k("hide-arabic",!1).init((function(){document.head.appendChild(K("style.bf2-hide-posts")).sheet.insertRule(".bf2-aggregate-page .bf2-lang-arabic { display: none; }",0)}));var gn,yn=k("hanging-punct");yn.init((function(){gn=document.createElement("div")}));var wn=/(^|\s)([(«“-]|&quot;)/g;yn.watch(".post-text, .comment-body",(function(e){if(b(e,".comment-body")){var n=e.querySelectorAll(".user-name-wrapper"),t=n[n.length-1];t&&t.nextElementSibling&&vn(t.nextElementSibling,(function(e){"("===e.nodeValue&&(e.nodeValue=" (")}))}vn(e,(function(e){if(!e.parentNode.classList.contains("bf2-hp")){var n=$(e.nodeValue);if(wn.test(n)){for(n=n.replace(wn,'<span class="bf2-hp bf2-hp-pre bf2-hp-pre-$2">$1</span><span class="bf2-hp bf2-hp-$2">$2</span>'),gn.innerHTML=n;gn.firstChild;)e.parentNode.insertBefore(gn.firstChild,e);e.parentNode.removeChild(e)}}}))})),k("show-timestamps",!1).watch(".post-lock-icon",(function(e){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),e.dispatchEvent(n)})),k("no-comment-more",!1).watch(".comment-tail__actions",(function(e){var n=e.querySelectorAll(".comment-tail__action");1===n.length?e.hidden=!0:n[n.length-1].hidden=!0}));var xn=t(918),kn={};function En(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return Sn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Sn(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _n(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}kn.styleTagTransform=d(),kn.setAttributes=c(),kn.insert=i().bind(null,"head"),kn.domAPI=o(),kn.insertStyleElement=l(),n()(xn.Z,kn),xn.Z&&xn.Z.locals&&xn.Z.locals;var Tn=k("previews-in-comments",!1),An=/^https?:\/\/(?:www\.|m\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?(?:v=|.+&v=)))([\w-]+)/i;function Mn(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function Pn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}Tn.watch(".comment",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t,r,o,a,i,s,c,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=n.querySelectorAll(".media-link"),r=[],o=0;o<t.length;o++)"https://media.freefeed.net"===(a=t[o]).origin&&/\.(jpg|png|gif|webp)$/.test(a.pathname)&&((i=a.href.replace(/\/attachments(\/\w+)?\/[0-9a-f]{8}-/,(function(e){var n=e.split("/");return 3===n.length?n.splice(2,0,"thumbnails"):4===n.length&&(n[2]="thumbnails"),n.join("/")}))).replace(/\.webp$/,".jpg"),r.push({thumb:i,link:a})),An.test(a.href)&&(s=An.exec(a.href),c=En(s,2),u=c[1],r.push({thumb:"https://img.youtube.com/vi/".concat(u,"/default.jpg"),link:a,type:"video"}));if(0!==r.length){e.next=5;break}return e.abrupt("return");case 5:l=r.map((function(e){var n=K("img.bf2-prvs__item",{src:e.thumb,loading:"lazy"});return"video"===e.type&&n.classList.add("bf2-prvs__item--video"),n.addEventListener("click",(function(){return e.link.click()})),n.addEventListener("error",(function(){return n.src=e.thumb.replace("/thumbnails","")})),n})),f=K(".bf2-prvs",l),n.appendChild(f);case 8:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){_n(a,r,o,i,s,"next",e)}function s(e){_n(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}());var Cn=P().userId;function Rn(){var e=Date.now();localStorage["bf2-next-update"]=e+36e5;var n=new XMLHttpRequest;n.open("GET","https://api.github.com/repos/davidmz/BetterFeed2/tags?page=1&per_page=1"),n.responseType="json",n.onload=function(){try{var t=n.response;if(1===t.length&&"name"in t[0]){var r=t[0].name;localStorage["bf2-version"]=r,localStorage["bf2-next-update"]=e+864e5,"v2.21.2"!==r?confirm("Доступна новая версия: ".concat(r,". Она будет установлена после перезагрузки страницы.\n\nПерезагрузить страницу сейчас?"))&&location.reload(!0):alert("У вас установлена последняя версия (".concat(r,")"))}}catch(e){}},n.send()}/^\/(attachments\/|files\/|bookmarklet|v\d\/)/.test(location.pathname)||(MutationObserver&&Promise?null===Cn?console.error("Can not start BetterFeed: user not logged in"):"__BetterFeed"in window?console.warn("BetterFeed already started"):(window.__BetterFeed=!0,Promise.all([re.ready,oe]).then((function(e){var n,t,r=(n=e,t=1,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(n,t)||function(e,n){if(e){if("string"==typeof e)return Pn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pn(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];!function(e){S(e);var n=new me;n.on("getSettings",(function(){return e.toJSON()})),n.on("saveSettings",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.ready;case 2:return t=e.sent,e.next=5,t.saveProps(new ue(n));case 5:location.reload(!0);case 6:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){Mn(a,r,o,i,s,"next",e)}function s(e){Mn(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()),n.on("checkUpdates",Rn)}(new ue(r.bf2Props))}))):console.error("Can not start BetterFeed: MutationObserver & Promise not supported"))})()})();