!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e){var t=this;(0,u.startObserver)(e);var n=new v.default;n.on("getSettings",function(){return e.toJSON()}),n.on("saveSettings",function(){var e=o(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.ready;case 2:return r=e.sent,e.next=5,r.saveProps(new m.default(n));case 5:location.reload(!0);case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()),n.on("checkUpdates",a)}function a(){var e=Date.now(),t="v2.18.0";localStorage["bf2-next-update"]=e+36e5;var n=new XMLHttpRequest;n.open("GET","https://api.github.com/repos/davidmz/BetterFeed2/tags?page=1&per_page=1"),n.responseType="json",n.onload=function(){try{var r=n.response;if(1===r.length&&"name"in r[0]){var o=r[0].name;localStorage["bf2-version"]=o,localStorage["bf2-next-update"]=e+864e5,o!==t?confirm("Доступна новая версия: "+o+". Она будет установлена после перезагрузки страницы.\n\nПерезагрузить страницу сейчас?")&&location.reload(!0):alert("У вас установлена последняя версия ("+o+")")}}catch(e){}},n.send()}var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n(1);var u=n(6),c=n(9),f=n(10),l=r(f),d=n(19),p=r(d),h=n(20),m=r(h),b=n(21),v=r(b);n(22),n(25),n(27),n(28),n(30),n(31),n(34),n(35),n(37),/^\/(attachments\/|files\/|bookmarklet|v\d\/)/.test(location.pathname)||(MutationObserver&&Promise?null===c.userId?console.error("Can not start BetterFeed: user not logged in"):"__BetterFeed"in window?console.warn("BetterFeed already started"):(window.__BetterFeed=!0,Promise.all([l.default.ready,p.default]).then(function(e){var t=s(e,1),n=t[0];i(new m.default(n.bf2Props))})):console.error("Can not start BetterFeed: MutationObserver & Promise not supported"))},function(e,t,n){var r=n(2);"string"==typeof r&&(r=[[e.id,r,""]]);n(5)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,'.bf2-lightbox-container{left:0;top:0;width:100%;height:100%;position:fixed;z-index:10}.bf2-lightbox-shadow{left:0;top:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.5)}.bf2-lightbox-content{position:relative;border:1px solid #000;background-color:#ccc;box-shadow:0 0 50px rgba(0,0,0,.5)}.bf2-settings-lightbox .bf2-lightbox-content{width:90vw;height:90vh;max-width:800px}.bf2-settings-lightbox .bf2-lightbox-content iframe{left:0;top:0;width:100%;height:100%}.bf2-access-token-lightbox .bf2-lightbox-content{background-color:#fff;max-width:90vw;padding:2em}.bf2-access-token-lightbox .bf2-lightbox-content button{padding:.25em 2em;cursor:pointer}.bf2-access-token-lightbox .bf2-lightbox-content .bf2-access-token{word-wrap:break-word;font-family:monospace;color:#069;background-color:#eee;padding:1em}.bf2-green{padding:1em}.bf2-via-names{font-size:12px}.bf2-hide-aliens-cont{font-size:14px;font-weight:400;margin-left:1em;display:none}.bf2-homepage .bf2-hide-aliens-cont{display:inline}.bf2-hide-aliens .bf2-alien-post{display:none}.bf2-saving-settings-indicator{position:fixed;top:.66em;right:1em;background:#f66;color:#fff;padding:.25em 1em;border-radius:4px;z-index:100}.bf2-animated-gif{position:relative;display:inline-block}.bf2-animated-gif:after{content:"\\25B6   GIF";position:absolute;bottom:3px;right:4px;background-color:#069;color:#eee;font-weight:700;padding:.1em .4em;border-radius:3px;font-size:11px;line-height:normal}.arrow-span{padding:0 .2em}.bf2-moon{width:18px;height:18px;margin-left:4px;margin-bottom:10px}.bf2-moon-shadow{fill:#666}.bf2-moon-light{fill:#f5eed9}h1{float:left;position:relative}.bf2-moon-cont{position:absolute;top:0;right:-20px}.bf2-switch-acc{color:#ccc;cursor:pointer;text-align:center}.bf2-switch-acc:hover{background-color:#eee;color:#000}.bf2-switch-acc__icon{display:inline-block;background:url('+n(4)+') no-repeat;background-size:contain;width:14px;height:14px;opacity:.4}.bf2-switch-account-box .bf2-lightbox-content{width:360px;height:auto;cursor:auto;border:1px solid #000;box-shadow:1px 1px 10px rgba(0,0,0,.5);background-color:#fff;padding:1em}.bf2-switch-dlg-header{font-size:120%}.bf2-switch-dlg-accounts{margin:1em 0}.bf2-switch-dlg-account{cursor:pointer;font-weight:700;border:1px solid #ddd;margin:.5em 0;position:relative}.bf2-switch-dlg-account.-current,.bf2-switch-dlg-account:hover{background-color:#eee}.bf2-switch-dlg-account.-current{cursor:not-allowed}.bf2-switch-dlg-account.-current .bf2-switch-dlg-del{display:none}.bf2-switch-dlg-upic{width:50px;height:50px;margin-right:1em;border-right:1px solid #ddd}.bf2-switch-dlg-new-form{display:none}.bf2-switch-dlg-del{position:absolute;right:0;top:50%;width:20px;height:20px;line-height:20px;text-align:center;margin-top:-10px}.bf2-switch-dlg-del:hover{color:#c00}.box{clear:both}.bf2-lightboxed-images .image-attachments a{cursor:zoom-in}.bf2-search-highlight{background-color:#ffff80}.bf2-hp-pre:empty{display:none}.bf2-hp-pre-\\({margin-right:.13em}.bf2-hp-\\({margin-left:-.13em}.bf2-hp-pre-«{margin-right:.2em}.bf2-hp-«{margin-left:-.2em}.bf2-hp-pre-\\"{margin-right:.2em}.bf2-hp-\\"{margin-left:-.2em}.bf2-hp-pre-“{margin-right:.33em}.bf2-hp-“{margin-left:-.33em}.bf2-hp-pre--{margin-right:.1em}.bf2-hp--{margin-left:-.1em}',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgd2lkdGg9IjE3OTIiIGhlaWdodD0iMTc5MiIgdmlld0JveD0iMCAwIDE3OTIgMTc5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTc5MiAxMTg0djE5MnEwIDEzLTkuNSAyMi41dC0yMi41IDkuNWgtMTM3NnYxOTJxMCAxMy05LjUgMjIuNXQtMjIuNSA5LjVxLTEyIDAtMjQtMTBsLTMxOS0zMjBxLTktOS05LTIyIDAtMTQgOS0yM2wzMjAtMzIwcTktOSAyMy05IDEzIDAgMjIuNSA5LjV0OS41IDIyLjV2MTkyaDEzNzZxMTMgMCAyMi41IDkuNXQ5LjUgMjIuNXptMC01NDRxMCAxNC05IDIzbC0zMjAgMzIwcS05IDktMjMgOS0xMyAwLTIyLjUtOS41dC05LjUtMjIuNXYtMTkyaC0xMzc2cS0xMyAwLTIyLjUtOS41dC05LjUtMjIuNXYtMTkycTAtMTMgOS41LTIyLjV0MjIuNS05LjVoMTM3NnYtMTkycTAtMTQgOS0yM3QyMy05cTEyIDAgMjQgMTBsMzE5IDMxOXE5IDkgOSAyM3oiLz4NCjwvc3ZnPg=="},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(c(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(c(r.parts[i],t));p[r.id]={id:r.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a=o[1],s=o[2],u=o[3],c={css:a,media:s,sourceMap:u};n[i]?n[i].parts.push(c):t.push(n[i]={id:i,parts:[c]})}return t}function i(e,t){var n=b(),r=y[y.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function c(e,t){var n,r,o;if(t.singleton){var i=g++;n=v||(v=s(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=d.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=l.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),b=h(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,g=0,y=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var s=n[a],u=p[s.id];u.refs--,i.push(u)}if(e){var c=o(e);r(c,t)}for(var a=0;a<i.length;a++){var u=i[a];if(0===u.refs){for(var f=0;f<u.parts.length;f++)u.parts[f]();delete p[u.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new l(e,t,n);return f.set(e,r),r}function a(e){if(!d){d=e,f.forEach(function(e){d.isModuleEnabled(e)&&e._initiate(d)});var t=new MutationObserver(function(e){e.forEach(function(e){for(var t=function(t,n){var r=e.addedNodes[t];r.nodeType==Node.ELEMENT_NODE&&f.forEach(function(e){d.isModuleEnabled(e)&&e._trigger(r,d)})},n=0,r=e.addedNodes.length;n<r;n++)t(n,r)})});t.observe(document.body,{childList:!0,subtree:!0})}}Object.defineProperty(t,"__esModule",{value:!0}),t.registeredModules=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.registerModule=i,t.startObserver=a;var u=n(7),c=r(u),f=t.registeredModules=new Map,l=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,e),this.name=t,this.alwaysEnabled=r,this.enabledByDefault=n,this.requiredModules=[],this.active=!0,this._watchers=[],this._initiators=[]}return s(e,[{key:"init",value:function(e){this._initiators.push(e)}},{key:"watch",value:function(e,t){this._watchers.push({selector:e,callback:t})}},{key:"required",value:function(e){this.requiredModules.push(e)}},{key:"_initiate",value:function(e){this.active&&(this._initiators.forEach(function(t){return t(e)}),this._watchers.forEach(function(t){var n=t.selector,r=t.callback;return(0,c.default)(document.body,n,function(t){return r(t,e)})}))}},{key:"_trigger",value:function(e){this.active&&this._watchers.forEach(function(t){var n=t.selector,r=t.callback;return(0,c.default)(e,n,function(e){return r(e,d)})})}}]),e}(),d=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=r(o);t.default=function(e,t,n){if(null===e)return[];var r=e.querySelectorAll(t),o=r?Array.prototype.slice.call(r):[];if((0,i.default)(e,t)&&o.unshift(e),n)for(var a=0,s=o.length;a<s;a++)n(o[a]);return o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e[n](t)};var n="matches"in HTMLElement.prototype?"matches":"msMatchesSelector"},function(e,t){"use strict";function n(e){var t=document.cookie.match(new RegExp("(?:^|;\\s*)"+e+"=([^;]*)"));if(t){var n=t[1],r=n.split(".");if(3===r.length)try{var o=JSON.parse(atob(r[1]));if("userId"in o)return[o.userId,n]}catch(e){}}return[null,null]}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=t.userId=null,i=t.authToken=null,a={"freefeed.net":{cookies:["freefeedBETA_authToken","freefeed_authToken"]},"gamma.freefeed.net":{cookies:["freefeed_authToken"]}},s=t.siteDomain=location.hostname,u=t.cookieName="freefeed_authToken";s in a&&a[s].cookies.some(function(e){var a=n(e),s=r(a,2);return t.userId=o=s[0],t.authToken=i=s[1],t.cookieName=u=e,null!==o})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(11),f=o(c),l=n(12),d=o(l),p=n(15),h=r(p),m="me.davidmz.BetterFeed2",b=function(){function e(){s(this,e),this.me=null,this.myID=null,this.myScreenName=null,this.friends=[],this.readers=[],this.banIds=[],this.bf2Props={},this._savePropsQueue=[],this._savingPropsNow=!1,this._savingIndicator=(0,h.default)(".bf2-saving-settings-indicator","Saving settings…")}return u(e,[{key:"whoIs",value:function(t){var n=0;return t===this.me&&(n|=e.ME),this.friends.indexOf(t)!==-1&&(n|=e.FRIEND),this.readers.indexOf(t)!==-1&&(n|=e.READER),n}},{key:"isBanned",value:function(e){return this.banIds.indexOf(e)!==-1}},{key:"saveProps",value:function(e){return this._savePropsQueue.push(e.toJSON()),this._saveProps()}},{key:"_saveProps",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._savingPropsNow){e.next=2;break}return e.abrupt("return");case 2:document.body.appendChild(this._savingIndicator),this._savingPropsNow=!0;case 4:if(!(this._savePropsQueue.length>0)){e.next=11;break}t=this._savePropsQueue.shift(),n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=null);return e.next=9,f.put("/v1/users/"+this.myID,JSON.stringify({user:{frontendPreferences:i({},m,t)}}));case 9:e.next=4;break;case 11:this._savingPropsNow=!1,document.body.removeChild(this._savingIndicator);case 13:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=b,b.ME=1,b.FRIEND=2,b.READER=4,b.ready=null,b.update=function(){b.ready=f.get("/v2/users/whoami").then(function(e){var t=new b;return t.me=e.users.username,t.myID=e.users.id,t.myScreenName=e.users.screenName,d.setPic(e.users.username,e.users.profilePictureMediumUrl),t.friends=e.subscribers.map(function(e){return d.setPic(e.username,e.profilePictureMediumUrl),e.username}),t.readers=e.users.subscribers.map(function(e){return d.setPic(e.username,e.profilePictureMediumUrl),e.username}),t.banIds=e.users.banIds,t.bf2Props=e.users.frontendPreferences[m]||{},t})},b.update()},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.authToken;return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("GET",u(e)),o.responseType="json",o.setRequestHeader("X-Authentication-Token",t),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send()})}function o(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("PUT",u(e)),o.responseType="json",o.setRequestHeader("X-Authentication-Token",c.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function i(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("DELETE",u(e)),o.responseType="json",o.setRequestHeader("X-Authentication-Token",c.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function a(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("POST",u(e)),o.responseType="json",o.setRequestHeader("X-Authentication-Token",c.authToken),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function s(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("POST",u(e)),o.responseType="json",o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onload=function(){o.response&&"err"in o.response?r(o.response.err):n(o.response)},o.send(t)})}function u(e){return f+e+(e.indexOf("?")!==-1?"&":"?")+"_initiator=betterfeed2"}Object.defineProperty(t,"__esModule",{value:!0}),t.get=r,t.put=o,t.del=i,t.post=a,t.anonFormPost=s;var c=n(9),f="https://freefeed.net"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e){return l.has(e)||l.set(e,s(e)),l.get(e)}function a(e,t){l.set(e,Promise.resolve(t&&""!==t?t:f))}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPic=void 0;var s=function(){var e=o(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://davidmz.me/frfrfr/uinfo/upic?username="+t);case 2:return e.next=4,e.sent.json();case 4:return n=e.sent,e.abrupt("return","ok"===n.status&&""!==n.data?n.data:f);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.getPic=i,t.setPic=a;var u=n(13),c=r(u);n(14);var f=t.defaultPic=c.default+"/build/default-userpic-50.png",l=new Map},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="https://davidmz.me/betterfeed-cdn/"+localStorage["bf2-version"];if(document.currentScript){var r=document.currentScript.src.split("/");n=r.slice(0,r.length-2).join("/")}t.default=n},function(e,t,n){e.exports=n.p+"default-userpic-50.png"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r,o,s,f=e.split("."),l=f.shift()||"div";"$"===l?s=document.createDocumentFragment():(s=document.createElement(l),f.length>0&&(s.className=f.join(" ")));var d=1;if(arguments.length>1&&"object"===("undefined"==typeof t?"undefined":a(t))&&!(t instanceof Node)&&!(0,u.default)(t)&&!(0,c.isSafeHTML)(t)){for(o in t)t.hasOwnProperty(o)&&s.setAttribute(o,t[o]);d=2}if(arguments.length>d)for(r=d;r<arguments.length;r++)i(s,arguments[r]);return s}function i(e,t){t instanceof Node?e.appendChild(t):(0,u.default)(t)?t.forEach(i.bind(null,e)):"string"==typeof t?e.appendChild(document.createTextNode(t)):(0,c.isSafeHTML)(t)&&e.insertAdjacentHTML("beforeEnd",t.toString())}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var s=n(16),u=r(s),c=n(17)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return new l(e)}function a(e){return e instanceof l}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e.reduce(function(e,t,r){var o=n[r-1];return e+(a(o)?o:(0,f.default)(o))+t}))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.safeHTML=i,t.isSafeHTML=a,t.html=s;var c=n(18),f=r(c),l=function(){function e(t){o(this,e),this.text=t}return u(e,[{key:"toString",value:function(){return this.text}}]),e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Promise(function(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,0):document.addEventListener("DOMContentLoaded",e)})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(this,e),this.modules=new Map,a.registeredModules.forEach(function(e){e.alwaysEnabled||t.modules.set(e.name,e.enabledByDefault)}),this.hideAliens=!1,this.commentCloudsMode=2,n&&((n.modules||[]).forEach(function(e){var n=o(e,2),r=n[0],a=n[1];(i||t.modules.has(r))&&t.modules.set(r,!!a)}),this.hideAliens=!!n.hideAliens,1!==n.commentCloudsMode&&2!==n.commentCloudsMode||(this.commentCloudsMode=n.commentCloudsMode))}return i(e,[{key:"toJSON",value:function(){var e={modules:[]};return this.modules.forEach(function(t,n){return e.modules.push([n,t])}),e.hideAliens=this.hideAliens,e.commentCloudsMode=this.commentCloudsMode,e}},{key:"isModuleEnabled",value:function(e){var t=this;return e&&(e.alwaysEnabled||!this.modules.has(e.name)&&e.enabledByDefault||this.modules.get(e.name))&&!e.requiredModules.map(function(e){return a.registeredModules.get(e)}).some(function(e){return!t.isModuleEnabled(e)})}}]),e}();t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=1,a="@response",s=function(){function e(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n(this,e),this.__responders=new Map,this.__listeners=new Map,this.defaultWindow=o,this.defaultOrigin=i,window.addEventListener("message",function(e){if("object"===r(e.data)){var n=e.data,o=n.action,i=n.requestId,s=n.value,u=e.source,c=e.origin;if(o===a&&t.__responders.has(i))t.__responders.get(i)(s),t.__responders.delete(i);else if(t.__listeners.has(o)){var f=t.__listeners.get(o)(s);u.postMessage({action:a,requestId:i,value:f},c)}}})}return o(e,[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.sendEx(this.defaultWindow,this.defaultOrigin,e,t)}},{key:"sendEx",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(a){var s=i++;r.__responders.set(s,a),e.postMessage({action:n,requestId:s,value:o},t)})}},{key:"on",value:function(e,t){this.__listeners.set(e,t)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e){var t=e.dataset.author;if(!t){var n=e.querySelector(".comment-body > .user-name-wrapper > a");n&&(t=n.getAttribute("href").substr(1),e.dataset.author=t)}return t}function a(e){var t=e.dataset.author;if(!t){var n=e.querySelector(".post-header a.post-author");n&&(t=n.getAttribute("href").substr(1),e.dataset.author=t)}return t}function s(e){return/[\u0600-\u06ff\u0700-\u077f\u08A0-\u08ff]/.test(e)}var u=n(6),c=n(23),f=r(c),l=n(24),d=r(l),p=n(7),h=r(p),m=n(10),b=r(m),v=n(9),g=(0,u.registerModule)("common",!0,!0);g.init(function(){(0,d.default)(function(e){var t="/"===e.pathname,n="/filter/best_of"===e.pathname;document.body.classList.toggle("bf2-homepage",t),document.body.classList.toggle("bf2-best-of",n),document.body.classList.toggle("bf2-aggregate-page",t||n)}),document.addEventListener("click",function(e){if(0==e.button&&e.target.classList.contains("bf2-user-link")){var t=document.querySelector('a:not(.bf2-user-link)[href="'+CSS.escape(e.target.getAttribute("href"))+'"]');t&&(e.preventDefault(),e.target.blur(),t.click())}}),"gamma.freefeed.net"===v.siteDomain&&document.body.classList.add("bf2-gamma-frontend")}),g.watch(".timeline-post, .single-post",function(e){var t=e.querySelector(".post-timestamp").getAttribute("href").match(/^\/.+?\/([\w-]+)/)[1];e.id="post-"+t,e.dataset.postId=t;var n=e.querySelector(".post-author").getAttribute("href").substr(1);e.dataset.postAuthor=n,e.classList.add("bf2-post-from-"+n),(0,h.default)(e,".post-recipient").map(function(e){return e.getAttribute("href").substr(1)}).filter(function(e){return e!==n}).forEach(function(t){return e.classList.add("bf2-post-to-"+t)});var r=e.querySelector(".post-text"),o=e.querySelector(".comment-body");(s(r.textContent)||o&&s(o.textContent))&&e.classList.add("bf2-lang-arabic")}),g.watch(".user-card .display-name",function(e){(0,f.default)(e,".user-card").dataset.userName=e.getAttribute("href").substr(1)}),g.watch(".comment",function(){var e=o(regeneratorRuntime.mark(function e(t){var n,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i(t)){e.next=3;break}return e.abrupt("return");case 3:if(r=a((0,f.default)(t,".post"))){e.next=6;break}return e.abrupt("return");case 6:return o=[],o.push("from"),r===n&&o.push("from-post-author"),e.next=11,b.default.ready;case 11:e.t0=n,s=e.sent.whoIs(e.t0),s&b.default.ME?o.push("from-me"):s&b.default.FRIEND?o.push("from-friend"):s&b.default.READER&&o.push("from-reader"),t.dataset.commProps=o.join(" ");case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)return null;var r=n?e:e.parentNode;return s&&r?r.closest(t):r&&r.nodeType==Node.ELEMENT_NODE?(0,a.default)(r,t)?r:o(r,t):null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(8),a=r(i),s=!!Element.prototype.closest},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){n.push(e),e(location)};var n=[],r=history.pushState.bind(history),o=history.replaceState.bind(history);history.pushState=function(e,t,o){r(e,t,o),n.forEach(function(e){return e(location)})},history.replaceState=function(e,t,r){o(e,t,r),n.forEach(function(e){return e(location)})},window.addEventListener("popstate",function(){return n.forEach(function(e){return e(location)})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,c.default)("a","configure settings"),n=(0,c.default)("a","show access token");e.parentNode.insertBefore((0,c.default)("p.bg-success.bf2-green","BetterFeed enabled ("+v+") | ",(0,c.default)("i.fa.fa-cog")," ",t," | ",(0,c.default)("i.fa.fa-exclamation-triangle")," ",n),e),t.addEventListener("click",function(){return i()}),n.addEventListener("click",function(){return a()})}function i(){var e=l.default+"/src/html/settings.html?origin="+encodeURIComponent(location.origin);return/iPhone|iPad/.test(navigator.userAgent)?void window.open(e,"_blank"):void new p.default("bf2-settings-lightbox").showContent((0,c.default)("iframe",{src:e,frameborder:"0"}))}function a(){var e='\n        <p>\n            Your access token is:\n        </p>\n        <p class="bf2-access-token">\n            '+(0,b.default)(h.authToken)+'\n        </p>\n        <p>\n            <strong>WARNING:</strong> Keep your token secure at all times and do not share it with services you do not fully trust.\n            They will be able to perform ANY operation on your behalf including changing your password and\n            <strong>locking you out of your account</strong>.\n        </p>\n        <p>\n            Giving your token to third party services provides them with FULL and UNLIMITED access to your account.\n            You can not change the token, you cannot revert access once you give it out.\n        </p>\n        <p>\n            If you suspect your token is being abused, contact <a href="mailto:freefeed.net@gmail.com">freefeed.net@gmail.com</a> <strong>immediately</strong>.\n        </p>\n        <p style="text-align: center">\n            <button>Close</button>\n        </p>\n    ',t=new p.default("bf2-access-token-lightbox");
t.showContent(e),t.contentEl.querySelector("button").addEventListener("click",function(){return t.hide()})}var s=n(6),u=n(15),c=r(u),f=n(13),l=r(f),d=n(26),p=r(d),h=n(9),m=n(18),b=r(m),v="v2.18.0",g=(0,s.registerModule)("settings-link",!0,!0);g.watch(".sidebar",function(e){if(!e.querySelector(".bf2-sidebar-box")){var t=(0,c.default)("a","BetterFeed settings"),n=(0,c.default)(".bf2-sidebar-box.box",(0,c.default)(".box-header-groups","Add-ons"),(0,c.default)(".box-body",(0,c.default)("ul",(0,c.default)("li",t))),(0,c.default)(".box-footer",v));e.insertBefore(n,null),t.addEventListener("click",function(){return i()})}}),"__BetterFeedOnSite"in window?g.watch(".bf2-settings-description",function(e){document.body.querySelector(".bf2-green")||o(e)}):g.watch(".box-body > form > h3",function(e){if(!document.body.querySelector(".bf2-green")&&"Change password"===e.textContent){var t=e.parentNode,n=(0,c.default)("p.bf2-settings-description","BetterFeed is an add-on that improves or dramatically alters stock interface of FreeFeed (",(0,c.default)("a",{href:"https://github.com/davidmz/BetterFeed2",target:"_blank"},"details"),"). "),r=(0,c.default)("div",(0,c.default)("h3.bf2-settings-header","Add-ons"),n,(0,c.default)("hr"));t.parentNode.insertBefore(r,t),o(n)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(15),s=r(a),u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,e),this._container=(0,s.default)(".bf2-lightbox-container"),""!==n&&this._container.classList.add(n);var i=this._container.appendChild((0,s.default)(".bf2-lightbox-shadow"));this.contentEl=i.appendChild((0,s.default)(".bf2-lightbox-content")),i.addEventListener("click",function(e){e.target!==i||r||t.hide()})}return i(e,[{key:"showContent",value:function(e){"string"==typeof e?this.contentEl.innerHTML=e:(this.contentEl.innerHTML="",this.contentEl.appendChild(e)),document.body.appendChild(this._container)}},{key:"hide",value:function(){this.contentEl.innerHTML="",this._container.parentNode.removeChild(this._container)}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return((new Date).getTime()-l)/d%1}function i(e){var t=document.querySelector(".bf2-moon");if(t){var n=t.querySelector(".bf2-moon-light"),r=50,o=r*Math.abs(Math.cos(2*Math.PI*e)),i=void 0;i=e<.25?"M 50 0 a "+o+" 50 0 0 1 0 100 a 50 50 0 0 0 0 -100 Z":e<.5?"M 50 0 a "+o+" 50 0 0 0 0 100 a 50 50 0 0 0 0 -100 Z":e<.75?"M 50 0 a 50 50 0 0 0 0 100 a "+o+" 50 0 0 0 0 -100 Z":"M 50 0 a 50 50 0 0 0 0 100 a "+o+" 50 0 0 1 0 -100 Z",n.setAttribute("d",i),Math.abs(.5-e)<.05?t.parentNode.setAttribute("title","Achtung Vollmond!"):t.parentNode.removeAttribute("title")}}var a=n(6),s=n(15),u=r(s),c=(0,a.registerModule)("moon"),f='<svg class="bf2-moon" viewBox="-4 -4 108 108" xmlns="http://www.w3.org/2000/svg" version="1.1">\n        <circle class="bf2-moon-shadow" cx="50" cy="50" r="54"></circle>\n        <path class="bf2-moon-light" d="M 50 0 a 30 50 0 0 0 0 100 a 50 50 0 0 0 0 -100 Z"></path>\n    </svg>';c.watch("h1",function(e){e.appendChild((0,u.default)(".bf2-moon-cont")).innerHTML=f,i(o()),setInterval(function(){return i(o())},36e5)});var l=new Date("Thu Apr 07 2016 14:22:37 GMT+0300").getTime(),d=Math.round(2551442813.5680003)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function s(e){e.style.display="none",document.body.querySelector("."+I+"new-form").style.display="block"}function u(e){var t=this;return confirm("Are you sure?")?a(regeneratorRuntime.mark(function n(){var r,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.default.ready;case 2:if(r=t.sent,o=r.me,i=(0,L.default)(e,"."+I+"account").dataset.username,i!==o){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,l();case 9:if(t.t0=function(e){return e.username!==i},a=t.sent.filter(t.t0),1!==a.length||a[0].username!==o){t.next=16;break}return t.next=14,D.set(N,null);case 14:t.next=18;break;case 16:return t.next=18,D.set(N,a);case 18:return t.t1=q,t.next=21,f();case 21:t.t2=t.sent,t.t1.showContent.call(t.t1,t.t2);case 23:case"end":return t.stop()}},n,t)}))():Promise.resolve()}var c=function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q=new _.default("bf2-switch-account-box"),q.showContent("<p>Loading…</p>"),e.t0=q,e.next=5,f();case 5:e.t1=e.sent,e.t0.showContent.call(e.t0,e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=a(regeneratorRuntime.mark(function e(){var t,n,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.ready;case 2:return t=e.sent,n=t.me,r=(0,x.default)("form."+I+"new-form",(0,M.html)(h)),r.addEventListener("submit",function(e){e.preventDefault();var t=r.elements.username.value,n=r.elements.password.value;a(regeneratorRuntime.mark(function e(){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.anonFormPost("/v1/session","username="+encodeURIComponent(t)+"&password="+encodeURIComponent(n));case 2:if(r=e.sent,!r.err){e.next=6;break}return alert(r.err),e.abrupt("return");case 6:return i=r.users.username,a=r.authToken,e.next=9,d(i,a);case 9:return e.t0=q,e.next=12,f();case 12:e.t1=e.sent,e.t0.showContent.call(e.t0,e.t1);case 14:case"end":return e.stop()}},e,o)}))()}),e.t0=x.default,e.t1=(0,M.html)(m,I),e.t2=x.default,e.t3="."+I+"accounts",e.next=12,l();case 12:return e.t4=function(e){var t=e.username,r=(0,x.default)("img."+I+"upic",{src:j.defaultPic});(0,j.getPic)(t).then(function(e){return r.src=e});var o=(0,x.default)("."+I+"del",{title:"Remove from list"},(0,x.default)("i.fa.fa-times-circle"));return(0,x.default)("."+I+"account"+(t===n?".-current":""),{"data-username":t},r,t,o)},e.t5=e.sent.map(e.t4),e.t6=(0,e.t2)(e.t3,e.t5),e.t7=(0,M.html)(b,I),e.t8=r,e.abrupt("return",(0,e.t0)("",e.t1,e.t6,e.t7,e.t8));case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get(N);case 2:if(t=e.sent){e.next=10;break}return e.next=6,E.default.ready;case 6:e.t0=e.sent.me,e.t1=C.authToken,e.t2={username:e.t0,token:e.t1},t=[e.t2];case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=a(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(r=e.sent,!r.some(function(e){return e.username===t})){e.next=5;break}return e.abrupt("return");case 5:return r.push({username:t,token:n}),e.next=8,D.set(N,r);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=a(regeneratorRuntime.mark(function e(t){var n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dataset.username,e.t0=n,e.next=4,E.default.ready;case 4:if(e.t1=e.sent.me,e.t0!==e.t1){e.next=7;break}return e.abrupt("return");case 7:return r=null,e.next=10,l();case 10:if(e.t2=function(e){return e.username===n&&(r=e.token,!0)},e.sent.some(e.t2),!r){e.next=22;break}return q.showContent("Please wait…"),o=new Date,o.setTime(o.getTime()+31536e6),document.cookie=C.cookieName+"="+encodeURIComponent(r)+"; path=/; expires="+o.toUTCString(),e.next=19,S.get("/v2/users/whoami",r);case 19:i=e.sent,localStorage.setItem("whoamiCache",JSON.stringify(i.users)),location.reload();case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h=i(['\n        <p>Please enter username and password of your other account:</p>\n        <p><input class="form-control" type="text" name="username" placeholder="Username" required></p>\n        <p><input class="form-control" type="password" name="password" placeholder="Password" required></p>\n        <p><button type="submit" class="btn btn-default">Add</button></p>\n        '],['\n        <p>Please enter username and password of your other account:</p>\n        <p><input class="form-control" type="text" name="username" placeholder="Username" required></p>\n        <p><input class="form-control" type="password" name="password" placeholder="Password" required></p>\n        <p><button type="submit" class="btn btn-default">Add</button></p>\n        ']),m=i(['<div class="','header">Switch account to:</div>'],['<div class="','header">Switch account to:</div>']),b=i(['<div class="','add-new"><a><i class="fa fa-plus"></i> Add new account</a></div>'],['<div class="','add-new"><a><i class="fa fa-plus"></i> Add new account</a></div>']),v=n(6),g=n(29),y=o(g),w=n(15),x=o(w),M=n(17),k=n(26),_=o(k),T=n(10),E=o(T),P=n(11),S=r(P),j=n(12),C=n(9),O=n(23),L=o(O),A=(0,v.registerModule)("switch-accounts"),I="bf2-switch-dlg-",N="bfAccounts-freefeed.net",R=[{selector:"."+I+"del",handler:u},{selector:"."+I+"account",handler:p},{selector:"."+I+"add-new",handler:s}],D=null;A.init(function(){D=new y.default,document.body.addEventListener("click",function(e){R.some(function(t){var n=(0,L.default)(e.target,t.selector,!0);return!!n&&(e.preventDefault(),t.handler(n),!0)})})}),A.watch(".logged-in > .avatar, .logged-in > .userpic",function(e){e.appendChild((0,x.default)(".bf2-switch-acc",{title:"Switch account"},(0,x.default)("span.bf2-switch-acc__icon"))).addEventListener("click",c)});var q=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(21),s=r(a),u="https://davidmz.github.io/BetterFeed2/storage.html?_="+Math.random(),c="https://davidmz.github.io",f=function(){function e(){o(this,e),this.iframe=document.createElement("iframe"),this.iframe.src=u,this.iframe.style.cssText="visibility: hidden;\n            position: absolute;\n            left: 0; top: 0;\n            height:0; width:0;\n            border: none;",document.body.appendChild(this.iframe),this.msg=new s.default(this.iframe.contentWindow,c)}return i(e,[{key:"get",value:function(e){return this.msg.send("get",e)}},{key:"set",value:function(e,t){return this.msg.send("set",{key:e,value:t})}}]),e}();t.default=f},function(e,t,n){"use strict";var r=n(6),o=(0,r.registerModule)("no-read-more",!1);o.watch("a.read-more",function(e){return e.click()}),o.watch(".expand-button > i",function(e){return e.click()})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}var i=n(6),a=n(15),s=r(a),u=n(12),c=n(10),f=r(c);n(32);var l=(0,i.registerModule)("comment-clouds"),d=new Map,p=!1,h=null;l.init(function(e){h=document.head.appendChild((0,s.default)("style.bf2-comments-avatars")).sheet,p=2===e.commentCloudsMode,p&&document.body.classList.add("bf2-comments-with-avatars")}),l.watch(".comment[data-author]",function(){var e=o(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.querySelector(".bf2-comment-ex")&&!t.classList.contains("is-hidden")){e.next=2;break}return e.abrupt("return");case 2:if(!p){e.next=20;break}if(n=t.dataset.author,t.appendChild((0,s.default)(".bf2-comment-avatar.bf2-comment-ex")),d.has(n)){e.next=18;break}if(d.set(n,!0),e.t0=u.getPic,e.t1=n,e.t1){e.next=13;break}return e.next=12,f.default.ready;case 12:e.t1=e.sent.me;case 13:return e.t2=e.t1,e.next=16,(0,e.t0)(e.t2);case 16:r=e.sent,h.insertRule('.comment[data-author="'+n+'"] .bf2-comment-avatar { background-image: url('+r+"); }",0);case 18:e.next=21;break;case 20:t.appendChild((0,s.default)("i.fa.fa-comment.icon.bf2-ico-bg.bf2-comment-ex"));case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}())},function(e,t,n){var r=n(33);"string"==typeof r&&(r=[[e.id,r,""]]);n(5)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".comment .comment-icon:not(.fa-stack){position:relative;top:-2px;left:-1px;z-index:1}.comment-likes .comment-likes-list{z-index:2}.bf2-ico-bg{position:absolute;top:0;left:0;color:#fff;display:none}.comment[data-comm-props~=from] .bf2-ico-bg{display:block}.comment[data-comm-props~=from-reader] .bf2-ico-bg{color:#ededed}.comment[data-comm-props~=from-friend] .bf2-ico-bg{color:#cef4fc}.comment[data-comm-props~=from-post-author] .bf2-ico-bg{color:#b5b5b5}.comment[data-comm-props~=from-me] .bf2-ico-bg{color:#ffd061}.comment.omit-bubble .bf2-ico-bg{display:none}.bf2-comment-avatar{position:absolute;width:16px;height:16px;background-size:cover;top:0;left:-4px;z-index:1;background-color:#fff;border-radius:50%;border:1px solid #ccc;box-sizing:content-box;pointer-events:none}.comment.omit-bubble .bf2-comment-avatar{display:none}.bf2-gamma-frontend .highlighted .bf2-comment-avatar{top:4px;left:3px}.bf2-comments-with-avatars .comment-time{margin-right:5px}.bf2-comments-with-avatars .feed-comment-dot:after{margin-top:1px}.bf2-comments-with-avatars .comment{margin-top:10px}.bf2-comments-with-avatars .bf2-likecomm-shift{left:-9px}.bf2-comments-with-avatars .likes{position:relative;left:-2px}.bf2-comments-with-avatars .likes .icon{margin-right:7px}.bf2-comments-with-avatars .fold-comments-sticky{z-index:2}.bf2-comments-with-avatars .fold-comments-sticky i{left:-2px}.bf2-gamma-frontend.bf2-comments-with-avatars .comment.highlighted{margin-top:6px}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(6),i=n(15),a=r(i),s=(0,o.registerModule)("hide-arabic",!1),u=null;s.init(function(){u=document.head.appendChild((0,a.default)("style.bf2-hide-posts")).sheet,u.insertRule(".bf2-aggregate-page .bf2-lang-arabic { display: none; }",0)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(6),i=n(36),a=r(i),s=n(18),u=r(s),c=n(8),f=r(c),l=(0,o.registerModule)("hanging-punct"),d=void 0;l.init(function(){d=document.createElement("div")});var p=/(^|\s)([(«“-]|&quot;)/g;l.watch(".post-text, .comment-body",function(e){if((0,f.default)(e,".comment-body")){var t=e.querySelectorAll(".user-name-wrapper"),n=t[t.length-1];if(n&&n.nextElementSibling){var r=n.nextElementSibling;(0,a.default)(r,function(e){"("===e.nodeValue&&(e.nodeValue=" (")})}}(0,a.default)(e,function(e){if(!e.parentNode.classList.contains("bf2-hp")){var t=(0,u.default)(e.nodeValue);if(p.test(t)){for(t=t.replace(p,'<span class="bf2-hp bf2-hp-pre bf2-hp-pre-$2">$1</span><span class="bf2-hp bf2-hp-$2">$2</span>'),d.innerHTML=t;d.firstChild;)e.parentNode.insertBefore(d.firstChild,e);e.parentNode.removeChild(e)}}})})},function(e,t){"use strict";function n(e,t){if(e.nodeType===Node.TEXT_NODE)t(e);else if(e.nodeType===Node.ELEMENT_NODE)for(var r=e.firstChild;r;){var o=r.nextSibling;n(r,t),r=o}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";var r=n(6),o=(0,r.registerModule)("show-timestamps",!1);o.watch(".post-timestamps-toggle",function(e){return e.click()})}]);
//# sourceMappingURL=better-feed.min.js.map